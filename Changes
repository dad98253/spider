07Nov00=======================================================================
1. removed sh/call because the owner isn't happy about us using it. 
2. change sh/qrz to the new interface. MUCH QUICKER! you will need a user id
and password from qrz.com to use it and you will have to copy the 
/spider/perl/Internet.pm to /spider/local and alter it accordingly. Do 
remember to set $allow=1 as well!
06Nov00=======================================================================
1. Added sh/qrz to the list of callbook services
05Nov00=======================================================================
1. 75% speed up on sh/dx !, lower memory usage as well!
2. Fixed problem with clear/spot 0 (how did this one last so long!!!)
3. add 'on' in accept/reject spots as synonym for 'freq'
4. add the same speed up to general log printing
5. fixed help \ 
04Nov00=======================================================================
1. fix sh/filter so ity now works for any callsign (and not just connected
ones).
2. Have only one is_callsign and not an iscallsign as well.
3. Add set/hops and show/hops commands.
4. Add unset/badnode command and put some help in for these commands
03Nov00=======================================================================
1. allow - in filter strings
2. store only the filter expression NOTE BENE: you will need to clear all 
your existing filters and re-enter them!!!!!!
3. Added announce filtering
4. Fixed problem with announce filtering on output to the node
02Nov00=======================================================================
1. updated filtering logic. You will need to RECREATE your filters (clear/spot
all, then start again) for testing.
2. allow PC73 for DXNet
3. added some help text for filtering and filtering spots in particular.
01Nov00=======================================================================
1. put PC11 field 2 check back to m for pc text.
2. improve 'simple' callsign checking
3. Added the first cut of the new user/sysop filtering code. This cut works 
for spots and the syntax is:-

accept/spots [<call>] [input] [<filterno>] things ..
reject/spots [<call>] [input] [<filterno>] things ..

where things are: 
  freq 0/30000 | hf | hf/cw | 6m,4m,2m
  call G,PA,HB9
  info iota
  by G,PA,HB9
  call_dxcc 61,62
  call_itu 31
  call_zone 14,15,16
  by_dxcc 61,62
  by_itu 31
  by_zone 14,15,16
  origin GB7,MB7
  channel GB7DJK,GB7BAA
      
You can simply string these together on one line one after the other and 
there is an implied 'and', you can also string together with 'or' 'not' (or
'!') and '(' and ')' - in otherwords an arbitrary expression.
              
You can see what you have done with:

show/filter [<call>]

You can clear your work with:

clear/spots [<call>] [input] [<filterno>|all]

Have fun and someone please write the documentation.
4. Added show/msg_status.pl sysop command (shows some info on what is busy in 
the message system)
31Oct00=======================================================================
1. add 0x8e to the list of characters we clobber (make xterm go into graphics
mode).
30Oct00=======================================================================
1. put in new Filter::it code and tested it. Now all we have to do is write
the user access routines (oh and the help files!).
29Oct00=======================================================================
1. put in echo cancelling measures into the clients. This doesn't mean you
shouldn't take steps to prevent echoing on node links, but it may help where
(whatever you do) it still bloody echos! This is experimental.
2. store dxchan and mynode as callsigns (and not references) in the routing 
tables and do some checking in accessors to see if we can capture some errors.
3. tart up the stat/chan etc display to give more useful debugging info 
28Oct00=======================================================================
1. updated show/sun and show/moon from stuff sent by Steve Franke K9AN
2. added show/call which queries jeifer.pineknot.com for any call in the 
world (as opposed to UALR which only does US calls). Inspired by a bit of 
perl sent to me by Steve Franke (again!) and also Angel EA7WA who gave me the
pineknot ip address.
3. fixed clients so that they accept -0 as a valid SSID and then strip it off
as though they had come in without (why has this taken so long to appear? How
long have we been running this code ??????). 
27Oct00=======================================================================
1. alter the code in clean_old of DXMsg system to see if we get some different
behaviour with random crashing
26Oct00=======================================================================
1. if there is a 'connected' file in /spider/data then the client will send
it out to the user after connection.
25Oct00=======================================================================
1. fix catchup and uncatchup commands so that they accept ranges
24Oct00=======================================================================
1. added cty.dat from http://www.k1ea.com/cty/index.htm to the prefix_data.pl
data file and modified create_prefix.pl accordingly.
2. the 'no text line' messages should now propagate correctly
3. added the dxcc, itu and cq zone numbers for announcer and origining node 
on announce filters - see the /spider/filter/ann/*.issue files for more info.
4. you can now specify a 'user_default.pl', 'node_default.pl' and 
'in_node_default.pl' in each of the filter directories
23Oct00=======================================================================
1. Added K5K as Kingman Reef
1. Added K7K as Kure
17Oct00=======================================================================
1. force frames to go down the local interface when doing a route. This is 
particularly important for pings!
16Oct00=======================================================================
1. add a ':' after 'G7BRN de G1TLH' in a talk message.
2. added /J to the list of things to ignore (as in G1TLH/J) in prefix 
processing (ie /J mean Jota not /JA [Japan]).
3. change all INCOMING 00-08 0A-1F and 9B characters that make it past the
intermediate client->server protocol to '.'.
04Sep00=======================================================================
1. made PC10,11,12 badword checking dependant on a flag variable ($censorpc)
default = 0 (off).
02Sep00=======================================================================
1. fix a long standing talk bug to do with routing to specific nodes (t xxx >
yyy .....)
2. Add badwords checking in various places. You put a list of words into
/spider/data/badwords one or several per line. Lines starting with # are
ignored. PC10, PC11, PC12 with words contained in this file will not be
sent on. Also ann, talk and dx commands have badword checking added. Words
are NOT case sensitive, but you will need to put all the endings in (eg 
...k, ...ker, ...king).
3. Added new version of admin manual from G0VGS.
01Sep00=======================================================================
1. allow blank on field 4 of PC10 (even though it's "illegal").
28Aug00=======================================================================
1. changes DXChannel::get_all_ak1a to get_all_nodes.
2. ignore PC21s coming in on the interface with that callsign (ie nodes 
trying to disconnect themselves).
3. output correct PC29 on blank lines and escape ^ characters differently 
(and transparently for spider nodes).
26Aug00=======================================================================
1. make blank origins on messages the node call.
2. added new version of FAQ from Ian G0VGS
3. added a dummy PC75 command (WCY merge?)
4. Don't allow mail routing for clx nodes
5. Log isolates
25Aug00=======================================================================
1. moan about and then delete empty message files
24Aug00=======================================================================
1. Removed WWV command so that users can't interfere (read mess up) the
automatic feeds which come from various places on the net.
23Aug00=======================================================================
1. Added persistant dupe file so that all dupes are stored here (including
announces) - announces are now kept for 5 days (as default).
2. limit the characters stored in a dupe for spots and announces
20Aug00=======================================================================
1. Added system Alias for set/nodxgrid => unset/dxgrid
2. Add full individual checking for all PC protocol fields in all messages
and removed any language dependant stuff (hopefully).
3. console.pl is now a bit more international (client.c/pl already are)
19Aug00=======================================================================
1. Added an efficiency thing for AUTOLOADed accessors from OO Perl by Conway.
2. Fiddled with the rtty and digital bandplan frequencies.
18Aug00=======================================================================
1. added a couple of changes for perl 5.6.0
2. removed del_dup from DXUser for earlier versions of DB '1.85' (ie real ones
not 2.x versions in 1.85 compatibility mode).
3. Started the OOing of the PC protocol stuff.
15Aug00=======================================================================
1. added 1.25 of the admin manual html
14Aug00=======================================================================
1. Added regex support to sh/dup_*.pl commands
2. fixed rcmd in crontab so that will work again
13Aug00=======================================================================
1. removed extra /60 in AnnTalk to make deduping of announces work a bit
better for longer...
05Aug00=======================================================================
1. Fixed hex character problem put in somewhen in the C Client
03Aug00=======================================================================
1. caught some more signals (are any of these causing the random stopping
of the code?
2. the Console now requires 1.05 of the Curses module ^R REFRESHES THE SCREEN
(as does ^L) AT LAST!!!!!
02Aug00=======================================================================
1. put back hex check exception for PC29
01Aug00=======================================================================
1. made the export and import ascii system work finally. The user_asc file
generated (automatically and 0000Z Sunday morning) is autoloading. Just 
execute it and it will automatically reload your user database.
2. remove import_users.pl no longer necessary
31Jul00=======================================================================
1. try to fix paging problem.
2. added help for spoof and set/forward
3. fixed bogus callsign check for field 2 of a PC12
4. Add DB_File to DXCommandmode to make it available for commands
30Jul00=======================================================================
1. Added talk mode so that I don't have to keep typing T <call> all the time.
2. fiddled around with storing of Debug messages a bit more.
3. bomb proofed the type command.
4. started the objectifying for talk, dx and announcements.
5. fix talkmode so that it only does 'via' PC10s when it really needs to.
6. SEND now displays a message if you try to do it in not prompt mode.
7. stopped a few more things being done by rcmd (eg send, talk, ann, dx)
8. tidied up the talking a bit more.
9. Increase default hop counts all round.
10. Adjust hex encoding so that 8 bit characters should now go thru
11. check more of the essential protocol fields for 8 bit characters.
29Jul00=======================================================================
1. added forward/latlong which will forward ALL the users that have a latitude
and longitude set on them to one or more locally connected nodes - with a hop
count of 1.
2. speeded up the show/node command by using the DB_File interface and 
sequentially reading the data directly and only 'get'ting the ones that are
nodes.
3. did the same for show/isolate and show/lockout.
28Jul00=======================================================================
1. fixed watchdbg midnight rollover loop and removed the date part of the 
date/time translation to leave just the time.
27Jul00=======================================================================
1. made sure that 'en' is the default language on new users.
2. issue error message if shutdown is attempted by a low privileged user.
3. Make sure a privilege is defined for all users (even if it is 0).
4. Try to fix some more dups (and the time on them).
5. make the time stored on dups generated locally on spots an integer no of 
minutes * 60 
6. send unsolicited PC[38]5s to the sysop if online.
7. merged current html from www.dxcluster.org with Ian's stuff
8. Added sgml files into the source tree
9. changed default paclen in client.c to 236
26Jul00=======================================================================
1. added wantgrid (to control display of grid square info on DX Broadcasts)
2. added lastoper for controlling periodic demands for user info from other
nodes.
3. added spiderFAQ stuff from Ian G0VGS and latest update of the admin manual
4. changed updating and deleting from user file in an attempt to keep down
duplicates and possibly corruptions.
5. added a DXUser::export routine to allow the cluster to automatically 
export the user data in ascii from cron.
6. added a line in the ISSUED crontab to do the export once a week
7. delete annok and dxok if set to 1 in user records.
8. added export_users command to allow arbitary exporting of user files
9. added set and unset/dxgrid command to allow control over the grid squares 
on DX announcements
10. Removed export_user.pl (no longer needed)
11. made import_users.pl accept a non related input filename and always
update the current user file.
12. added an 'auto rcmd <node> for/oper <call>' for people I can see on the
cluster that issue spots and for whom I have no qra info (no more than once
a month). This isn't the default - set $send_opernam in
/spider/local/DXProtVars.pm (copied from /spider/perl). Good for gateways.
13. Despace spot texts properly again for deduping purposes.
14. Corrected Pc84/85 handling a bit.
15. Sync the user database every 15 secs to see whether we can reduce the 
corruptions and duplicates.
25Jul00=======================================================================
1. ignore \n in ax25 mode for C client.
2. remove extra space at the end of a DX spot announce when no grid square
is output.
3. added new admin manual from Ian G0VGS
20Jul00=======================================================================
1. Finally managed to update my source with the sourceforge one
2. added user->qra cleaning in various places
3. added four digit locator strings to broadcast DX spots (for users).
4. PC11 with blank callsigns should now be ignored.
5. put back the unpadding to the PC11 dup checking to catch spots with added
blanks at the end of lines.
25Jun00=======================================================================
1. added 0 to the regex that checks for valid data on the cluster.pl->client
channel - this will allow G0VGS and G0RDI to connect....
2. removed technically unnecessary /= 60 from the dup routines to see if 
Arnold's Sparcs don't then crash.
19Jun00=======================================================================
1. move ann_dup, spot_dup etc to dup_ann, dup_spots etc
2. made mode 3 the default line ending convention for all out going connects
via telnet in client.pl
18Jun00=======================================================================
1. fixed line ending ambiguities (I think) for telnet connections. Well 
actually only really band aided it. It works but isn't how I want it. 
Client.pl has got to go....
2. Added 1.21 of Ian G0VGS's admin manual
17Jun00=======================================================================
1. I believe I have fixed all the login/logout 'broken pipe' errors
2. Added G0RDI's 'links' command.
3. added update_sysop.pl which cleans out all previous versions of the sysops
information from the user database and recreates it with that in DXVars.pm
4. Added node type to links and who
5. Hardened up the cluster->client link in the cluster software so that 
rubbish on port 27754 doesn't (usually) crash the cluster.
14Jun00=======================================================================
1. fixed sh/node crash
2. fixed RTT in who.pl
13Jun00=======================================================================
1. fixed looping bug in C client on ending.
12Jun00=======================================================================
1. Added RCMD for clx
2. Added WCY processing
3. Added new node types (clx, spider, dxnet, arcluster)
4. Store echo settings
5. Store pagelth settings
6. sort out source of DXVars for callbot.pl
7. added sh/isolate
8. added sh/lockout 
11Jun00=======================================================================
1. removed extraneous DXDebug from DXUtil
2. added help for set/echo
3. Centralised all spot, wwv and ann dup handling into respective packages.
4. Created new AnnTalk package (for above and OOing announce and talk 
handling).
5. Fixed problem with outputting lines with | in them to console.pl.
10Jun00=======================================================================
1. got rid of some more nasty bugs in sh/qra.
2. fixed 9A3xx to always be Croatia (and not Haiti!).
09Jun00=======================================================================
1. change some print commands in DXMsg to dbg('err'...
2. overloaded confess, croak et al into DXDebug and removed Carp from 
everywhere and checked that the necessary debugging really does go into
the debug files now.
3. changed print statements in cluster.pl to dbg('err',... so they go into
the debug files as well.
4. Altered the logic around duplicate spots, reduced the length of comment
checked to 20 characters (this should solve some problems including those
people sucking ar-cluster spots with prefixes in the extreme rh end). 
08Jun00=======================================================================
1. fixed problem with binary characters from cluster->client
2. added set/echo and unset/echo commands
3. echo login characters on login: prompt for C client
4. Send \r\n on telnet connections for C Client
5. Make echoing the default option (for M$ telnet clients :-()
11May00=======================================================================
1. fixed looping in Msg.pm (at last)
10May00=======================================================================
1. wrote a cross between 'tail -f' and grepdbg so that you can watch the
debug files for particular strings and only have them print out. 
05May00=======================================================================
1. rewrote parts of Msg.pm and client.c so that the messages no longer use
a length word at the front of each one. They are simply strings of characters
separated by a \n. No binary characters are allowed (they are encoded as %nn)
a la HTTP. This hopefully cures Arnold's problem and also make it more
secure anyway. It also paves the way for the ax25/ip multicast client.
30Apr00=======================================================================
1. put some extra checks and balances in to message send routine in Msg.pm to
see if I can prevent the error seen by Arnold (which I think is only likely to
appear in heavily loaded sites).
25Apr00=======================================================================
1. Changed reply so that you can reply to more than one address privately
31Mar00=======================================================================
1. fixed nnn-mmm in kill (erase/delete) msgs so that mmm is also deleted and
not just nnn -> mmm-1.
2. Added an autosplit to message importing so that messages are split
automagically into bits if the filename used in the import directory starts
with "split". This will add a [1/5] type string on the the end of the subject. 
3. dedupe more aggressively on the text of Spots so that only the 1st 27 chars
of text are considered (as opposed to the whole lot).
30Mar00=======================================================================
1. altered client.pl connect code so that it doesn't falsely recognise 
/spider/src/client as a 'client' instruction.
28Mar00=======================================================================
1. Added buffering to client 
2. Fixed LOGIN so that you can login with an arbitrary callsign
27Mar00=======================================================================
1. updated wpxloc.raw and rsgb.cty for 4W and TX0.
2. display 'start time' rather than 'last start time in' in who.
3. Allow local users to see their own sh/talk or sh/log stuff.
4. A more robust version of the C client.
5. Added a message exporting command 'export'.
6. allow swopping on all messages, including imported and manually sent ones
7. S A < B @ C $BID now works from the command line and thus bbses ought to
be able to send messages into the cluster. Bids are (currently) ignored.
26Mar00=======================================================================
1. first cut of C client
18Mar00=======================================================================
1. fixed convkeps.pl so that it accepts more formats for floating point.
08Mar00=======================================================================
1. tidied up Sun.pm and sh/sat
2. fixed sh/qra so that the correct lat/long is displayed if only one locator
is given.
10Jan00=======================================================================
1. added Steve Franke's new Sun.pm and show/satellite command
08Jan00=======================================================================
1. really removed the restriction on 0 length messages.
2. added a periodic msg file import system a la FBB. Stick one or more files
into /spider/msg/import with a suitable SEND line, subject and the text and 
it will import it. The importer will accept some BBS syntax (eg < GB7TLH) to
allow you to customise the 'from' callsign.
03Jan00=======================================================================
1. changed the copyright statement in sh/version!
2. added sh/date with special "be compatible with ak1a" syntax for the output
of sh/date with no arguments, otherwise the same as sh/time. A special favour
to G4PDQ...
3. and another one, added show/node especially for G4PDQ.
01Jan00=======================================================================
1. Fixed Julian routines to get rid of the millenium bug! (do as I say, not
as I do!).
2. updated gdx.pl so that external programs can do a sh/dx just as a normal
user can. On reflection this could be used as a model for all sorts of 
"external" interface routines.
3. renamed gdx.pl as showdx.
11Dec99=======================================================================
1. added missing pc48 so that it calls the DXDb::process routine 
10Dec99=======================================================================
1. allow msgs to marked as read or unread
02Dec99=======================================================================
1. DX command doesn't recognise '6M' as '6m' in SH/DX ON 6M.
2. set/node now sets the homenode as the callsign.
3. changed the label for the 18Mhz band from '18m' to '17m' in the bands 
table. 
01Dec99=======================================================================
1. started the callbot which lives at n2tly.dxcluster.net 9000.
2. added www.qrz.com
3. added www.buck.com
4. added k4ute at no4j.com
28Nov99=======================================================================
1. fixed all the stupid errors introduced in 1.36 confusing DXUser->get with
DXCluster->get_exact.
24Nov99=======================================================================
1. extended badmsg.pl stuff so that it works like the forward file and allows
one to reject on to, from, origin and subject fields.
2. added a swop.pl again in a forward.pl like format that allows simple swop
for a field or test on a field and set another.
3. Fixed the problem that read private mail follows you around as well as
unread private mail does.
4. Change the logic of connections so that the node will accept callsigns with
SSIDs to -8 as different entities from each other. SSIDs > 8 are subtracted 
from 15 and are assumed to be coming in via netrom diddled connections. This
affects lots of the commands as well. I may not have got them all.
5. Hangup clients on HUP signals. I originally ignored them, for reasons that
are now lost in the mists of time. HUP signals now cause clients to die 
(cleanly) and disconnect everything correctly.
6. Added show/time command
21Nov99=======================================================================
1. lose extraneous rubbish after the callsign as sent by BBSes.
2. Change end label on sh/moon to RGain dB rather than Loss dB.
3. Remove spurious call to DXCluster->get_exact in pc50.
4. Allow rcmd to locally connected nodes that are not (for some reason) in the
nodes table.
5. Try and send a PC39 in more cases to a cluster that I want to disconnect
from in the hope that it notices and disconnects its end.
20Nov99=======================================================================
1. Added set/unset logininfo which will tell anybody that has this set when
someone has either logged in or out of this node.
2. Added set/pinginterval command which alters the length of time between
pings sent to nodes, the value is minutes < 120 and seconds above that, 0
means disable pinging (not recommended).
3. If someone does a sysop whilst connected via ax25, don't show privilege
level or passwd in stat/user.
4. Fixed the problem with the dx command where if the callsign ended in a ?
then the call and the freq would be replicated in the remarks.
5. Set/unset ann, dx, talk, beep, wx, wwv all are now permanent (ie stored in
the user file)
19Nov99=======================================================================
1. Added new version of sh/sun and also sh/moon from Steve K9AN
2. Added rtt to who.
3. added Aliase for show/tnc_sta to who.
4. added Alias for show/uptime to sh/cl 
18Nov99=======================================================================
1. Added ping obs counter together with Time::HiRes timers. This will dis-
connect nodes that fail to respond to 3 ping requests (on the 4th attempt). 
The default time is a ping every 3 mins, therefore a link will be struck out
after 12 minutes of nil response.
2. Maintain a table of outstanding connects to other nodes and prevent over-
laps (special favour to G0RDI).
17Nov99=======================================================================
1. Started using Data::Dumper for things again
2. 'Fixed' DXUser file corruption?
3. Allow multiline (ie lines with \n in them) output in $DXChannel::send 
4. Added Andrew K9CW's updated wpxloc.raw, regenerated prefix_data.pl
5. Put in callsign matching and stuff into sh/sun.
14Nov99=======================================================================
1. added BBS.pm to start BBS input of mail
2. fixed eval in DXUser to log errors rather than banging out
12Nov99=======================================================================
1. added sh/sun command kindly supplied by Steve K9AN.
2. allow ^Z on its own on a line to terminate a message
08Nov99=======================================================================
1. added spoofing (mk1 version) for sysops, useful for those little jobs like
reseting a user's qra locator and such like "spoof g7brn set/qra jo02lq".
2. fixed set/location so it stores the qra locator in the qra locator slot, 
NOT the lat/long (who wrote this stuff...?).
07Nov99=======================================================================
1. reduced the amount of stuff compared against for dup announces.
2. Check the regex for DK0WCY announces produces results before storing it as
a WWV.
3. Added some logging for set/priv (un)set/lockout.
4. Added test long path calc to sh/muf
5. Only wonder down the msg queue every minute
6. Put in the initial DB code (at last), you can create and remove local and
standard remote dbs, you can import AK1A style .FUL ascii databases, you can
enquire on a local or remote database.
7. A return ping to a node will clear down all outstanding pings to
that node (which might cause some confusion if more then one ping is
outstanding for a node, but then - shit happens).
04Nov99=======================================================================
1. Removed ~ from the end of the PC18.
2. Removed a hangover from duff character checking in cluster.pl
3. Stop PC frames that are to be routed, being routed back to themselves.
03Nov99=======================================================================
1. Simplified command caching so it uses anonymous subroutines, you should
also get error messages back on the console now when developing.
2. Allow locally connected AK1A clusters that for some obscure reason don't
issue PC19s to still appear as connected and allow them to acquire users.
31Oct99=======================================================================
1. updated Minimuf.pm and show/muf.pl to the fixed versions sent to me by
Steve Franke K9AN. 
2. Made set/badnodes work, added show/badnodes. This is an interim fix until
input spot filtering works.
24Oct99=======================================================================
1. fixed announces so that nodes only get one of them (not two).
2. Altered the select timeouts to prevent apparent excessive CPU usage on
multiprocessor machines (or at least that is what seems to be the trouble
here). 
22Oct99=======================================================================
1. allow filter CALLSIGNS to be in upper or lower case.
2. create the concept of input and output filters, input filters are of the 
form "in_$call.pl" eg: "in_g1tlh.pl" (or "in_G1TLH.pl"), output filters are 
"g1tlh.pl" (or "G1TLH.pl").
3. all users can now filter on spots, ann and wwv (assuming the sysop has set
the filters up - still no user creatable filters. Nodes can filter on both
input for announces and output for all of these. I would recommend setting 
up a few filters that are likely to be wanted and then symlinking callsigns
to them as you get requests.
4. added callsign and length of history/position of screen stats to console.
If you want to change the colour of the callsign you will need to copy the
Console.pm to your /spider/local directory and change the $mycallcolor equate.
21Oct99=======================================================================
1. fixed reply so that reply b or reply nop generate a bulletin with the 
correct address.
2. implemented sh/muf command.
3. reduced privilege of catchup and uncatchup to 5. This so that, suitably
privileged, nodes that occasionally link can rcmd a "catchup <nodecall> all"
to the node they are connecting to and thus prevent a large tranche of, 
potentially duplicate, mail. This isn't an issue for DXSpider, but may be
an issue for any AK1A clusters you are connected to.
20Oct99=======================================================================
1. Translated all the subroutines of minimuf into perl as Minimuf.pm
2. Limited the length of an ANN that is saved for de-duping to $pc12_dup_lth
(def 72)
3. help command should now return stuff that you expect.
4. reduced necessary privilege to use 'MSG' command to 6.
5. Correct the count of spots and wwv for a merge.
6. Allow decodes of DK0WCY-3 WWV data beacon announces
7. rewrote send so that an SB doesn't send a buckshee bull to NOPRIVATE!
8. Changed default colouration on console so that all spots >= 50Mhz are red
9. Fixed init command so that PC21s are sent down non-initted channels
10. Allow forwarding of unknown private mail. This means that you can set up
forwarding of 'foreign' mail across to and by gateways using the same 
mechanism as bulletins (/spider/msg/forward.pl).
11. Allow line wrapping on the console (G0RDI, G0VGS et al).
18Oct99=======================================================================
1. changed help command so that it works correctly with multiple title lines.
2. added to address to the list of things a message checks to see whether it
is a duplicate (how on earth did it take _this_ long to find this one?).
3. Changes S CC so that the callsign it says it has sent to is the real one
(request from G8TIC)
21Sep99=======================================================================
1. allow zero messages to be stored (request from G4PDQ)
2. make DX more flexible and change spotter syntax to be consistant with
sh/dx (request from K9AN)
30Aug99=======================================================================
1. remove -@ as well as \d from SSIDs for spots
2. remove WEB and/or NET from the front or rear of callsigns in Prefix.pm
29Aug99=======================================================================
1. Added msg command to allow the changing of To, From, Subject and so on the
messages. This seems particularly important just now as a whole raft of G3's
seem to be putting out non private bulls to callsigns.
2. While I am at set messages to TO fields that appear to be users to private
if they have been sent as bulls.
3. Add DISTROs, if a callsign field appears in /spider/msg/distro in upper
use that as a list of callsigns to send further. Note this is potentially
recursive as callsigns in a distro can be distros.
25Aug99=======================================================================
1. check the date of a WWV much more carefully.
24Aug99=======================================================================
1. Prevented spots with lowercase callsigns being forwarded. This opens a
much bigger can of worms which I shall have to address later.
17Aug99=======================================================================
1. all protocol except PC29 containing %XX characters will be dumped.
2. Changed console.pl so that if you start typing it moves the top window
back to the bottom.
19Jul99=======================================================================
1. Added iota and qra clauses to sh/dx as well, these take optional arguments
and will look for the appropriate strings.
17Jul99=======================================================================
1. Started database integration.
2. added qsl clause to sh/dx that searches for qsl or via in the dx info
16Jul99=======================================================================
1. drop frames with 'illegal' characters in them (but pass frames with 
embedded %XX characters).
15Jul99=======================================================================
1. Changed grepdbg to accept a regexp. More useful (to me anyway).
2. Altered init command so that it doesn't send PC21s down the initted 
channel.
10Jul99=======================================================================
1. added an explicit disconnect from my side for already connected calls. This
appears to have fixed a problem where if two consoles connect at the same time
with the same (sysop?) callsign the cluster would stop.
2. added some debugging in the Message handler to allow more state to be seen.
3. Message handler now seems to work better for longer and doesn't spew out
PC42 aborts with quite such gay abandon.
05Jul99=======================================================================
1. added stat/msg and stat/cluster commands to allow me to poke about inside
the msg and cluster node tables.
04Jul99=======================================================================
1. removed silly 'new message has arrived' to connected nodes 
2. added a ! command to the console.pl program; works like the bash shell.
01Jul99=======================================================================
1. Altered priv to 5 for connect.pl to match disconnect for nodes
29Jun99=======================================================================
1. fixed merge command that I broke.
2. added some randomness in waittimes for aborted outgoing messages 
3. Message Queuing now only occurs every 5 minutes (configurable if anyone 
wants to write the command for doing it) and on receipt of a PC16. This is
a further attempt at sorting the crossing of messages!
4. a PC33 will cause another attempt at queuing. If you are on a roll, keep
going!
28Jun99=======================================================================
1. console.pl now works with history and editting.
2. added scrolling to stuff sent by the cluster.
3. added colours to things.
27Jun99=======================================================================
1. added WWV filtering
2. added timeouts to for forwarding Messages, also added a waiting time for
failed (stalled) outgoing messages.
3. Incoming messages will now have priority over outgoing messages to the
same node.
4. Added 'catchup' command which will 'catchup' messages to date for a node. 
This means that when you start forwarding to a node, it doesn't get all the
messages queued up that are probably old.
5. added 'uncatchup' which does the opposite of the above.
6. fixed kill full and PC49 handling so that it actually works.
7. Fixed local aliases so they add to the front of the standard ones. This
means you only need to add your specials or override the system ones you need
to.
21Jun99=======================================================================
1. changed regex for cluster->client msgs so that strings like |---| are no
longer ignored.
20Jun99=======================================================================
1. prevented a merge to myself (causes a loop)
18Jun99=======================================================================
1. fixed a problem with DXLogPrint repeating log entries.
2. altered the permissions on disconnnect so that priv 5 users can disconnect
clusters, but still require priv 8 to disconnect users.
3. made sure that an incoming PC18 clears out all the cluster info for
that channel before re-initialising.
4. add init command.
5. disconnect users before nodess on shutdown
15Jun99=======================================================================
1. added grepdbg program (so you can search your debug files and get times
and dates of incidents).
2. Moved DXVars.pm to DXVars.pm.issue to force new users to cp it to their
local directory.
3. added $allowzero to DXProt to allow thru PC19s with zero protocol versions.
14Jun99=======================================================================
1. changed IO::File in help and apropos to IO::File
2. added a check for isa('DXNode') for PC50s
08Jun99=======================================================================
1. Started work on the curses based operator console.
03Jun99=======================================================================
1. cluster seems to have a memory leak, put DESTROY functions in where 
appropriate.
2. try to make sure that PC21 commands are not issued inappropriately and
also reformat PC19 for onward broadcast so that nodes coming in on loops are
dropped from those broadcasts.
3. make sure PC16,17,19,21 doen't affect locally connected nodes.
4. Changed all instances of FileHandle to IO::File.
01Jun99=======================================================================
1. removed a output of an unwanted pc21 for isolated nodes
31May99=======================================================================
1. Added checking for PC16,17,19 and 21 to make sure that they come in from
the channels that they are supposed to.
2. Pass the RCMDing node's priv level to the command (rather than the 
connecting node's privilege level).
3. Pass thru merge requests for other nodes.
4. Removed a warning from client.pl
5. routed external DB commands and drop them (for now) locally
6. routed external mail commands (ie those addressed elsewhere)
7. routed external PC26/27 lines 
25May99=======================================================================
1. try to make the lastin value correct even for local users
2. got rid of the stupid bug that failed to print out the offline message
but put a "*main::STDOUTmain" for every line of that message instead.
3. Ported to 5.00503 (well actually just installed it and it just runs). 
4. Added who command
23May99=======================================================================
1. Got rid of some of the useless error messages on global destruction when
quiting a program.
2. Stuck -w back on client.pl
23May99=======================================================================
1. tried to change connection to raw mode for cluster connections
2. sh/c and sh/u are now sorted in alphabetical order
3. Limited the number of queued dx spots when composing messages to 20 (the 
oldest one is lost for every one added above 20).
4. Added generalised shell globbing everywhere I think it is useful, including
sh/dx, dir, sh/files etc
5. Made dir more compatible with ak1a and added 'to' and 'from' call searching
it should now do everything that ak1a does except counts.
6. added similar functionality to kill command so that you can kill ranges, to
and from callsigns etc.
22May99=======================================================================
1. added check for -1 from Date::Parse and return undef for out of range dates
2. added show/files and type commands
21May99=======================================================================
1. made set/nodx work again.
2. made dx stuff queue nicely again when sending messages.
18May99=======================================================================
1. Added announce dup checking.
2. Added system announce filtering.
08May99=======================================================================
1. Added a bit more checking to the rcmd thing to make more sure that this
rcmd isn't coming from an imposter. Not possible to prevent everything 
ofcourse, just make it a bit harder.
2. altered set/lockout and set/privilege so that they can't executed remotely.
3. Added some code to reject rubbish (with invalid binary characters) protocol
or user lines as input.
4. prevented PC command being executed remotely :-)
05May99=======================================================================
1. change the connection overlap from an abort to a disconnect.
02May99=======================================================================
1. Added the mechanism for doing user spot filtering for spots in the cluster 
(no user control just yet - but sysops can do it).
2. Fixed problem with nodes sending out the node lists of isolated nodes.
30Apr99=======================================================================
1. Try to make it even more AK1A friendly by putting the node list out in the
'correct' order.
2. added code so that local users and commands go to all connected nodes 
INCLUDING the isolated ones.
26Apr99=======================================================================
1. added set/user command as a hack, please use this with care, there is
very little checking.
2. added export_opernam.pl which is a basic reader of AK1A opernam.dat files
to stdout
25Apr99=======================================================================
1. Fixed problem with filtered spots not coming out.
2. Added the possibility of filtering on channel callsign
20Apr99=======================================================================
1. altered order of undefing and closing of user file in an attempt to make 
corruptions/missing users less likely.
2. made messages that are addressed to the node call appear to the alias call
3. check dates much more rigourously.
4. ignore SIGTERM and SIGINT during shutdown of the cluster
15Mar99=======================================================================
1. added $actiondata to filter line to allow per action data such as no of hops
2. fixed a silly problem in talk for non-existant callsigns
3. Added sysop command
02Mar99========================================================================
1. Changed DXUser so that it uses a homemade import/export hash routine 
2. DXUser now uses a DB_BTREE file
3. Added export_users.pl, import_users.pl and convert_users.pl
25Feb99========================================================================
1. added NL language stuff.
2. added set/language
21Feb99========================================================================
1. Allowed multiple 'on <freq>' for show/dx
2. Made sure the 'on 20m/ssb' thing worked (also 'on hf/cw').
3. first cut of the Filtering code, no user commands yet but the file
format is defined and manually added filters should work for spots
17Feb99========================================================================
1. added export_user.pl to export user files (for interest and safety)
2. changed DXUser::init to allow O_RDONLY access which may limit the number
of coredumps G0RDI seems to get.
15Feb99========================================================================
1. Added msg forwarding code which uses $main::root/msg/forward.pl.
14Feb99========================================================================
1. Changed A & K in WWV to be the other way around (I am told by G3IOR that
this will mean that we won't have pole to pole aurora nor all the power lines
overloading everywhere as well as a result of having values of K > 10).
2. allow the '~' character in message bodies.
3. Moved $main::data/badmsg.pl to $main::root/msg/badmsg.pl.
11Feb99========================================================================
1. Fixed a problem with isolated nodes' configurations being sent on sending 
local configs to new connections.
08Feb99========================================================================
1. added a $SIG{ALRM} in the client to actually catch the alarm when it goes 
off which means that the netrom/ax25 call programs terminate properly (and not
loop as fast as their little legs can paddle, soaking up CPU time).
2. Implemented read receipts as an especial request from G4PDQ.
3. Fiddled with DXUser a bit to see whether I can stop it core dumping on new
users in PC16s on G0RDI's machine.
4. Added E4 (Palestine) to Prefix data.
30Jan99========================================================================
1. Some of the dates we get can cause crashes, tried to make it more robust (oh
and Y2K compliant)
2. PC16 seem to come in with missing callsigns from somewhere
3. added $main::data/baddx.pl which prevents callsigns that are in the list being
a) forwarded b) stored and c) (except for the originator, if local) being
displayed locally.
4. added $main::data/badmsg.pl which deletes any messages whose TO address is
in this list (this is largely for european sensibilities). 
18Jan99========================================================================
1. added present(),presentish() and disconnect() to DXCron so that you can see 
(easily) if a station is on the cluster anywhere and also disconnect them
locally. 
2. added rcmd() to DXCron so you can send an rcmd to someone else from crontab.
3. <embarrassment>Fixed create_sysop.pl so that longitude is spelt correctly
there as well</embarrassment> made the update work properly. NOTE create_sysop
will only do what you expect if all cluster.pl and client.pl programs are 
stopped.
4. DXCron wasn't reading in reliably on startup, this is now (hopefully) fixed.
the -M semantics are rather strange!
5. The -w switch is now standard on cluster.pl
6. Added last_connect() which gives the last connect time of a user (or now
if connected).
7. Added present_on(call, node) and presentish_on(ditto) which returns true if 
the call is connected to the node.
8. incoming messages for users will now send a 'new message' message (instead
of merely generating the message)[who wrote this rubbish?].
9. Hooked $SIG{__WARN__} and $SIG{__DIE__} so we store these nasty error 
messages.
10. Print the no of users on restricted protocol links if we have had PC50
11. Had a go at making the sh/cl stats more accurate.
12. PC11 was trying to call Local::spot1 instead of Local::spot, no warning 
previously.
13. Added a simple lockfile to prevent more than one cluster running at a time
17Jan99========================================================================
1. fixed some permission problems on DXLog.
2. There is a circumstance in DXMsg which caused the cluster to stop on an 
null ref pointer which I can't get to the bottom of but have bandaided out 
for now.
3. Started filter and Database code.
4. Upper cased all the TO callsigns for sending to more than one station in
messages.
07Jan99========================================================================
1. Fixed Geomag after emacs reformatted it wrong so sh/wwv works again.
2. Added more range checking in WWV spots (they really are a heap of ...)
3. Changed create_sysop.pl so that you can update as well as create the user 
file
4. Remove spotter's SSID from WWV spots
06Jan99========================================================================
1. Do some range checking for spots and WWV in the future (got a WWV for Oct 
2034 whhich caused a bit of confusion!)
2. Make WWV spots broadcast them to the users! (as opposed to merely storing 
them)(thank you G0RDI).
3. Allow users to do show/announce (thank you JE1SGH).
4. Delay broadcasts to users if they are not in a 'prompt' state (means you can
add messages and see what you are doing on a busy system)
5. Made set/unset dx,ann,wx,talk,wwv do what is expected
6. added set/sys_location and set/set_qra to set the cluster lat/long and qra
7. New messages will now be announced on logon (if there are any)
03Jan99========================================================================
1. Upped the version no !!!!
2. made the DXProtocol routines much less sensitive to '~' characters (JE1SGH)
3. added '^' -> ':' conversions on ann, talk and dx commands
4. You can now send messages containing blank lines.
5. Fixed merge command problem reported by G0RDI
28Dec98========================================================================
1. Crossed fingers, got rid of the instabilities caused by execing programs
at vast speed (reduced it significantly anyway).
2. Personals will now move if homenode is known.
3. Added Local.pm for doing local specials
27Dec98========================================================================
1. Various detail changes to remove some more warning with -w on
2. Added DXCron handling - you can do crontabs now.
3. Added show/program command so you can see where it is loading your .pm files
from.
4. Added pc26/27 replies to locally connected cluster's merge (pc25) requests
5. Added spotters DXCC and original cluster to Spot data files.
23Dec98========================================================================
1. Reindented various things
2. Added missing $main::mycall on the end of outgoing PC11s (!)
3. Check that PC16/17 node calls really are nodes (AFAIAC).
22Dec98========================================================================
1. Added brackets round callsign if not here for prompt
2. Added Iain's set/password routine
3. Fixed sh/dx problems (the xemacs indent region messed Spot.pm up!)
4. Issued 1.15
21Dec98============= late! ====================================================
1. fixed problem with missing DXDebug in DXProt.
2. Fixed DXDebug so that it actually works as advertised with and without 
trailing \n. 
3. Added deduping of WWV spots as well (at for date,time,sfi,k and i) dups
4. Replaced the 0 in "02-Dec-1998" with ' ' so it reads " 2-Dec-1998", it seems
hard to credit it but some 'programs' out there that connect to clusters have
problems with the leading '0'!
5. In the same vain, included a strictly AK1A compatible sh/heading, apparently
this is necessary for the same reason as 4.
6. Started contrib tree stored the old show/heading in contrib/g0rdi/show.
7. Because I now correctly dedupe spots and wwv (there's a hostage to fortune..)
I have added a merge command. 
21Dec98========================================================================
1. Added "issue" to the client program for 'login' connections
2. Added more docs for client program.
3. Fixed problem introduced in 1.12 where a connect locally with a callsign of
someone connected remotely would stop the cluster.
4. issue release 1.13
20Dec98========================================================================
1. Removed all the warnings I get with perl -w (at least for just starting the
cluster and running a few commands).
2. Added per node hop control.
3. Added some docs on how to use it and isolation
4. Made talk command more intelligent in that if the user isn't seen and the
user's last node is visible it tries the talk anyway.
19Dec98========================================================================
1. Fixed problems with sh/rcmd (talk/ann/log) with a callsign as argument and
also made what G0RDI wanted work as well!
2. Added isolate flag to allow isolation of different networks at a gateway.
3. Changed make Makefile.PL to perl Makefile.PL in instructions
4. Copied latest instructions to html directory
5. Had another attempt at making clients disconnect without hanging everytime.
6. Changed msg queuing semantics so that the system routes on exact callsign.
7. Changed the protocol version so that it increments with the DXSpider version.
14Dec98========================================================================
1. Made the telnet thing work a bit better. It still will not work reliably to
a real telnetd on port 23.
2. Allowed network logins on client by specifying login instead of call.
3. made msg handling more robust (PC30 with unknown streams cause PC42), queueing
is only done on channels that are in state 'normal'.
4. Added pc command which takes a callsign and some text and sends it without
mods to the callsign, useful for sending manual PC protocol to unstick things.
Also for sending anonymous messages to online users.
5. Stopped duplicate messages being stored (it receives them and then bins them)
6. Implemented PC49 delete/full from outside (kill full on the inside)
7. Implemented the client command in connect scripts so that you can have 
different scripts for the same callsign.
8. Added sh/wwv command
13Dec98========================================================================
1. Fixed VS6 lat/long in prefix_data and wpxloc.raw
2. Sorted out last in times for remote users
3. editted and substitued G0RDI's version of the install instructions over
mine in spider/html
4. fixed telnet connections
5. added connect instructions to html tree.
6. Added some more help
7. Upissued version
12Dec98========================================================================
1. Incorporated sh/st, (un)set/lockout, forward/opername from Iain G0RDI
2. Added group handling with (un)set/group, show/group. This allows arbitrary
groups to be formed (for ann/<group> for example) and is also used to 'filter' 
spots, announces, wwvs etc into groups of cluster nodes (useful for creating 
disjoint cluster networks)
3. **** CHANGE mylongtitude to mylongitude in DXVars.pm ****
4. Altered QRA locator routines so they work correctly!
5. Fixed all commands that had the wrong mylat(itude) and mylong(itude) names
in.
07Dec98========================================================================
1. Added set/name, set/qra, set/location, set/qth, set/homenode, set/bbs, 
set/email
2. changed the Msg socket close to a shutdown (hopefully more reliable), this 
should stop clients hanging on exit.
3. Added Alias support for help
4. Added lltos and stoll routines to DXBearing
5. Added auto prompting for name, qth, location and homenode if any of these
aren't known.
06Dec98========================================================================
1. Fixed DXBearing::is_qra so that it correctly detects full QRA locators
2. Added sh/qra for doing locator distances and bearings
3. Added some stuff to Notes.txt on hints for command writers
4. Changed help system to use just one file per language
5. Started adding more help
6. Fixed 24Mhz band limits
7. Added apropos command and lots of new help text
05Dec98========================================================================
1. Added sh/heading and QRA locator calculation stuff
04Dec98========================================================================
1. Started Changes file
2. Added load/cmd_cache.pl to clear cmd cache shortcuts (use this if cluster.pl
get confused about where it is getting its commands from eg if you have
removed a file from local_cmd 'cos you want to go back to standard one)
3. Fixed bull handling at least to the extent that it stores them and
doesn't mess up the normal directory handling.
4. Fixed the unset/debug command so that it actually does the job!
5. Removed the middle line 'written in perl for unix' from show/version.pl
