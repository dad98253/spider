04Feb23=======================================================================
1. Fixed sh/log so that callsigns beginning with a digit (or several) are 
   printed rather than being ignored.
   This affects: show/ann, chat, log, rcmd and wx
03Feb23=======================================================================
1. Fix is_ipaddr to accept trailing '::'  on IPV6 addresses.
2. Fix and extend the TEST program 'showdx' so that it now works on the mojo
   branch. Type 'showxd -?' for more information or read the source. This is 
   NOT a user program, but is will accept most sh/dx expressions. 
3. Fix create_master_badip_files.pl so that it does not emit IP addresses
   that the system is_ipaddr() function fails.
01Feb23=======================================================================
1. Harden DXCIDR (badip stuff) against format errors in downloaded badip files
   downloaded using wget from the crontab. If these problems persist PLEASE 
   TELL me and send me examples of the errors that end up in the badip files.
30Jan23=======================================================================
1. Add ip addresses to outgoing PC93 messages
2. Get rid of (some of?) the uninitialised warnings 
3. Add the ability to set the (time) locale to UTC or LOCALTIME by adding 
   the string LOCALE = UTC or LOCALE = LOCAL(TIME)? to your local crontab
   
   NOTE: this will affect ALL timings in both the system as well as your
   local crontabs. Changing the LOCALE will make no difference to the system
   crontab other than using localtime rather than UTC. Which is fine by me. 

   You can see what crontab is doing and which LOCALE is in use by doing a
   'set/debug cron' in a console and running a 'watchdbg cron' in another 
   shell.
25Jan23=======================================================================
1. Add a switch to enable the routing of generated PC92 A/D records and also
   prevent the rebroadcast of incoming ones.

   set/var $DXProt::pc92_ad_enable 0 

   to disable PC92 A/D records. 
2. Add a switch to enable the addition of IP addresses to PC92 C records.

   set/var $DXProt::pc92c_ipaddr_enable 1

   to enable the addition of IP addresses to outgoing PC92 C records.

   ## These two features are experimental, but will become the default if
   ## some other changes and these are successful
24Jan23=======================================================================
1. Optimise the PC11->PC61 promotion code, improve readability of the 
   debugging when 'set/debug pc11' is active.
2. Remove spurious '$' character at the end of Listeners.pm (thanks Kin).
3, Fix show/ik3qar command
20Jan23=======================================================================
1. Add the variable @main::localhost_names to allow other IP addresses to
   be treated in the same way as localhost in item 1 on 19Jan23 below. NOTE
   you must include ALL the normal localhost names + any other interface
   names that you might want to include:

      set/var @main::localhost_names qw(127.0.0.1 ::1 192.168.1.30)

   using the qw() construction is easier than:

      set/var @main::localhost_names ('127.0.0.1', '::1', '192.168.1.30')

   but either will work. You can define as many IP addresses as you like and
   they can be IPV4 or 6. 
   
   You do NOT need to fiddle with this unless you specifically have more
   than just the normal definitions of localhost. So for 'normal' nodes with
   one external interface, you DO NOT NEED TO DO ANY OF THIS. 
2. Added CTY-3304 prefix data
3. Fix Bad IP address system so that one can carry on as normal without
   Net::CIDR::Lite (or libnet-cidr-lite-perl on debian based systems)
19Jan23=======================================================================
1. Introduce aliasing for localhost in DX Spots and outgoing PC92 A records
   on login. There are two variables which can be set with the alias to use:
      $main::localhost_alias_ipv4
      $main::localhost_alias_ipv6 
   These can be set in the /spider/scripts/startup, but this is only 
   necessary if the node has more than one interface, or virtual hosts. If 
   there is ONLY ONE ipv4 and/or ipv6 IP address on the node machine then 
   these variables will be automatically populated on first use. But the SAFE
   thing to do is to set them in the startup file.  

   THIS FEATURE IS EXPERIMENTAL... 
18Jan23=======================================================================
1. Make sure than *every* channel has an IP address. Thank you (I think) Kin 
   for pointing out that PC92 A records were not going out with IP addresses.
   I'm guessing that other things (like spots) had a similar problem. 
15Jan23=======================================================================
1. Fix strange errors for carp on missing route_*_cache files on startup.
14Jan23=======================================================================
1. Fixed route PC11 promotions so that a new PC61 is actually generated and 
   also sent instead of the original PC11 (to PC61 capable nodes).
13Jan23=======================================================================
1. Periodically store Routing tables and, if they are young enough (def: 3hrs)
   autotically restore them on restart of the node. This will short circuit
   the need to rebuild the routing tables from scratch on every restart - 
   which is normally for something like software update. 
2. Fix pc11 debugging stats with the correct figures. Sigh... Also move some
   of the totals to a different place.
3. Add show/spotstats command which gives the current spot statistics shown
   during pc11 debugging (which means you don't need to set/deb pc11 unless
   you really want that extra noise).
12Jan23=======================================================================
1. Regularise 'set/debug pc11' output to track all the routes through PC11 and
   PC61 processing and statistics.
11Jan23=======================================================================
1. Improve (?) the PC11 -> PC61 upgrading process that delays incoming PC11s
   for a very short time in the hope that a PC61 will come in to be used 
   instead. It will also upgrade a PC11 if we have an uptodate IP address 
   that has come in from the routing system PC92s. do a 'set/debug pc11' to 
   see it in action.   
2. I have chosen a definitive list of TOR exits and relays which can be 
   downloaded from http://www.dxspider.net/download/badip.torexit,
   http://www.dxspider.net/download/badip.torrelay and finally, for those IP
   addresses that are deemed to be 'bad':
   http://www.dxspider.net/download/badip.global. I have added the following 
   lines to my /spider/local_cmd/crontab:

24 * * * * spawn('cd /spider/local_data; wget -qN http://www.dxspider.net/download/badip.torexit')
24 * * * * spawn('cd /spider/local_data; wget -qN http://www.dxspider.net/download/badip.torrelay')
24 * * * * spawn('cd /spider/local_data; wget -qN http://www.dxspider.net/download/badip.global')
25 * * * * run_cmd('load/badip')

   The tor files are downloaded from https://lists.fissionrelays.net/tor/ at 
   15 minutes past every hour, please would you use some other minute than
   23 or 24 to get your own local copies. 

   A 'set/debug badip' will show you what is being blocked. 
3. Fix set/badip so that it appends new IP addresses correctly.
10Jan23=======================================================================
1. Add baddx on incoming callsign in RBN.
2. Search for all /spider/local_data/badip.* files to allow more control on
   which IP addresses are detected. e.g. badip.torexit, badip.torrelay as well
   as baddx.local. The suffixes, apart from .local (created by set/badip) are
   completely arbitrary. You can use whichever suffix name you like. This is
   a more useful arrangement for the ever increasing sources of "bad ip
   addresses" that we need to deter.  

   NOTE: all badip.<suffix> are read only EXCEPT badip.local (which can be
   altered in real time by the sysop using set/badip <ip address> ...). 
   If one uses periodic crontab jobs to update any other badip.<suffix>
   files from web resources then don't forget to 'load/badip' afterwards. 
3. Add a /spider/data/baddx.issue file which can be copied to (or used as a 
   basis to create) /spider/local_data/baddx
09Jan23=======================================================================
1. Finish implemention of DXCIDR ip address filtering. This works on both 
   logins (treated the same as locked out - i.e. just disconnected) and also
   with PC61s where these sentences are just dropped. Also attempt to prevent
   any *following* PC11s with the same data getting through. 

   YOU WILL NEED either 'cpanm Net::CIDR::Lite' or debian/ubuntu based distros 
   'apt install libnet-cidr-lite-perl'. RedHat based systems will have similar
   packages available.

2. Recognise PC18s coming from CC Clusters more nicely.
04Jan23=======================================================================
1. Fillout DXCIDR, attach checks in PC61 and logins. Login that fail will 
   simply disconnect, like locked out callsigns
2. Fix qrz.com URL in stock Internet.pm.
3. Fix DXHash issues (baddx, badnode, badspotter etc)
30Dec22=======================================================================
1. Add more BadWords (regex) checks.
01Dec22=======================================================================
1. Re-add some debugging to see which incoming PC protcol sentences are
   being dumped because of any bad content (words or calls) if debugging
   option 'nologchan' is set.
2. All debugging for badwords has the word 'badword' in it. So that one can
   do a 'grepdbg -1 badword' and one should see who said it and all of what
   they said. Watchdbg will also work with this.
3. My latest recommended additions to the badword list includes:
   RU STOP SPOT DISGRACE CRM CRIM CRUD SUBHUMAN FASCIST DEGENERATE CATTLE CNT
23Nov22=======================================================================
1. The BadWord system has been rewritten. This change is pretty radical and
   needs to be used with care as a word that is entered will be reduced to the
   minimum sized string needed to match that word. 

   This is effective a sysop command changeable version of the file badw_regex
   but in a much more sysop friendly form. The (un)set/badword <word>...
   commands now update the /spider/local_data/badword.new file in real time
   without having to mess about with editing files and running load/badword.
   load/badword still works, but you should now never need it.  
19Nov22=======================================================================
1. "Fix" Badword detection in spots and announces etc. 
   NOTE: setting $DXCommandmode::maxbadcount to 0 (default 3) will disable
   autologout on swearing. But any (detected) swearing will be logged.
   User generated swearing will not be propagated, not will incoming 
   protocol. 
2. Fix is_ipaddr so that it accepts more (most?) valid IPV6 addresses that
   actual real IP addresses that might appear as endpoints. 
3. Add CTY-3237 prefixes.
06Jun22=======================================================================
1. Fix show/wcy so that it works even if no wcy broadcasts have been received
   this month. 
01Jun22=======================================================================
1. Fix show/(v)hfstats commands.
2. Add CTY-3221 Prefixes.
07Feb22=======================================================================
1. (re)add set/seeme and show/seeme commands which don't appear to have
   "taken". 
03Feb22=======================================================================
1. Improve/add the help text for grepdbg and watchdbg. 
31Jan22=======================================================================
1. Set $RBN::respottime to 3 minutes. NOTE change of name from 
   $RBN::minspottime.
2. Allow callsigns connected to a node with an SSID to get SEEME RBN spots
   for their base callsigns. So G1TLH-2, G1TLH-7 will get **SEEME** RBN spots
   if G1TLH is spotted on the RBN system - even is are both connected to the
   node and G1TLH is not. Each call is unique and each callsign (variation) 
   must have done a set/seeme + set/skimmer. .
29Jan22=======================================================================
1. Implement RBN set/seeme which displays any passing RBN spots for your
   callsign in "raw" format. 
28Jan22=======================================================================
1. Add Capabilities Line to logged in users.
2. Make absolutely sure that all DB_Files are closed correctly.
3. Introduce (un)set/debug rbnchan to control the visualisation  of raw RBN 
   input lines.
25Jan22=======================================================================
1. Fixed grepdbg so that it does what -help says it does.
24Jan22=======================================================================
1. Change Local::pcprot() calling conventions to be the same as the rest of
   software (see any 'sub handle_nn' function in DXProtHandle.pm.
2. Corrected some interpolations in Messages. 
3. Tried to make users file deletes and updates more stable.
22Jan22=======================================================================
1. Refine spot display to retain the ':' and also reduce the likelyhood of
   of misalignment by using the available space in the 39 characters more
   intelligently. This is WIP.
21Jan22=======================================================================
1. Fix version tracking in PC92
2. Bring the major parts of master and mojo together to make maintenance a
   bit less challenging. This does add anything extra to mojo, but it's still
   quite a bit of work.
18Jan22=======================================================================
1. fix (un)set/registered.
09Jan22=======================================================================
1. Add the New Year CTY-3201 prefix data.
08Jan22=======================================================================
1. I don't think there are any more warnings...
06Jan22=======================================================================
1. Fix the last of any frequent warnings caused by yesterday's modifications.
05Jan22=======================================================================
1. Mark nodes that send PC92 K records as spider. These will include VE7CC
   nodes. NOTE: there appear to be user records marked as user or other sorts
   of node, which (now) are actually spider (compatible) nodes and will be
   marked accordingly.
2. Adjust nodes currently marked as spider nodes, but are sending versions 
   not in the spider range of versions on PC92 A records as AK1A.
3. Try to undo some damage where users have been autocreated with similar
   attributes as nodes (locked out with privilege set to 1). This will 
   slowly fix this problem over time, but see item 4 for a 'big bang' 
   approach.
4. It has come to my attention that there are a large number of users (of 
   all sorts) that have incompatible SSIDs. See 03Jan22/4 for details. 

   These are now being scrubbed out of the users file and also will present
   as their normalised selves. If a -0* SSID is encountered then, if the 
   normalised version of that call is not present, it will be renamed to 
   that normalised call. If the normalised version of that user record is
   already present, the un-normalised user record (-0*) will be removed. 
5. Make export_users do a batch clean (as in 3. above) and also get rid of
   (default) 12+ year old unaccessed user records and (default) 2+ year old 
   "empty" records (with no qra/latlog/qth or handle).
 
   NOTE: if you do an manual export_users (as opposed to the automatic one
   done once a week), do not be alarmed by the number of old (i.e. more than
   12 years old) callsigns that it will get rid of. In my case it was about 
   ~2/5th of the users file. Still left me with over 100,000 "active" users.

   In you are a bit twitchy about this, the code will copy the current
   user_json and user_json.ooooo to user_json.keep and user_json.backstop
   respectively. These files will never be overwritten unless you remove one
   or both, when they will be regenerated on the next export_user. 
04Jan22=======================================================================
1. Fix issue in the RBN (and probably other places) with callsigns that
   contain trailing / in callsigns like: OH0K/6, K2PO/7 etc.
2. Regard strange callsigns like DR4W-HB (seen in skimmer spots) as invalid. 
   This *should be* something like HB9/DR4W or (spit) DR4W/HB9.
3. Fix the (probably) spurious locking out of users that are unknown to this 
   node, that come in from other nodes. These create new user records which
   where then automatically locked.  
03Jan22=======================================================================
1. Allow overrides (on modern versions of perl) with things in DXVars.pm, such
   $clusterport. This is really only of use for people trying to run more than
   one instance of DXSpider on the same machine.
2. Fix who command to make RBN connections as RBN and not USER.
3. Prevent other nodes claiming that $myalias or $mycall is a different type
   (user or node) from changing our route table and thence the user type. 
4. Normalise callsigns of incoming connections to G1TST if G1TST-0 or G1TST-00
   amd G1TST-2 if G1TST-02. There are 800+ instances of callsigns with extra
   0 characters in the SSID in my users file. Allow SSIDs up to 99. 
02Jan22=======================================================================
1. Fix dx bug introduced to handle dx by ip <ipaddr> for webclusters.
2. Remove _add_thingy dbg message from general view.
3. Increase sh/ann cache to 130 to cope with some client programs' profligate
   need to fill their users' screens with needless erm... data. 
01Jan22=======================================================================
1. Fixed missing ';' in spoof
30Dec21=======================================================================
1. Try to fix (nuke) tabs in comment field.
28Dec21=======================================================================
1. Fix issues with wwv & wcy updates into the cache.
2. Add a simple sh/announce cache to stop spawning when used (especially) in
   a script.  
27Dec21=======================================================================
1. Fix "kwalitee control" issue in /spider/cmd/dx.pl.
2. Make sh/wcy and sh/wwv cacheble for simple queries.
3. Fix set/nodxxxxxx etc.
22Dec21=======================================================================
1. Add the possibility to do "sender verify" that spots (and later on, other
   things like announce etc) are coming from spotters that exist on the node
   that the PC11/61 says it does. At the moment, this is advisory as many
   users seem to be on web clusters and many of them do not send PC61 and also
   don't update the node's routing tables that normal node usage would do.
2. Prioritise PC61 spots over PC11 spots wherever possible. Also promote PC11
   spots to PC61 where the spotter's IP is known.
3. Add a shell script "perlbrew-dxspider" that can be used for starting the
   node when using perlbrew (i.e. more modern perls) on older distros such
   as Centos 7/8.
4. Allow to "dx by <spotter> ip <ip address> <qrg> <spot call> <comment>.
   This is added as a convenience measure for webcluster authors while waiting
   for the internal websocket interface (or because they cannot use that). 
   This can only be used by suitably privileged users. 
   This likely to be a temporary measure and will be immediately withdrawn if
   there is any sign of abuse. 
11Dec21=======================================================================
1. Removed dependency on perl Git package.
2. Force code to change directory to $DXSPIDER_ROOT || '/spider'. Also force
   git -C $root describe.
3. Change git commands AGAIN to work on old perls (which mojo won't work on,
   but it makes my life easier).
4. Change version strings to include the perl version in use. 
10Dec21=======================================================================
1. Fix the output of set/dxgrid, set/usstate and set/dxcq or set/dxitu to how
   it was always supposed to be since 2003.
09Dec21=======================================================================
1. Moved isregistered to DXChannel for safety...
08Dec21=======================================================================
1. Get to the bottom of why ssid'd calls were using the base call's 
   credentials. This should now work as expected. 
06Dec21=======================================================================
1. Improve console.pl scrolling. Split long lines (eg on announcements.
04Dec21=======================================================================
1. Fix illogicalities in USDB creations and make sure that O_CREAT on tie does
   NOT encounter an existing file to barf about. Even though it shouldn't.
   Thanks Howard WB3FFV.
2. Fixed a typo in show/registered that prevents a list of callsigns being
   searched for. Got rid of some over complex code. Thanks Fabrizio iZ0UIN. 
3. Fix long line wrapping in console.pl
03Dec21=======================================================================
1. Move motd and issue files to local_data if not already there.
30Nov21=======================================================================
1. Fix sh/dx with callsigns that have /p or VE/G1TLH in them.
2. Add unset/ak1a, unset/arcluster aliases and some minimal help for UNSET/
   SPIDER, NODE, ARCLUSTER, AKIA and also SET/USER.
26Nov21=======================================================================
1. *Really* change spot display format and sh/dx format "back the way they
   were. But They won't stay that way for long!!!! There are four (yes, count
   them) completely unused spaces at the end of the line!!!! 
25Nov21=======================================================================
1. Restored spot format back to the way it was.
2. Added CTY-3127 prefixes
24Nov21=======================================================================
1. Make /spider/perl/create_sysop.pl work on a base git cloned tree.
2. Add /spider/local /spider/local_cmd /spider/local_data to git. 
3. Make user supplied console width (set/width) sticky.
19Nov21=======================================================================
1. Add the ability of console.pl to resize and have dx spots also resize so
   that the comment field's size will increase accordingly. Sh/dx amd sh/mydx
   also work similarly. If you make the console width smaller or wider then 
   spots already on the screen will not resize. 
2. For client programs that parse the output (why? use set/ve7cc to get more
   easily machine parsed output), a new command "set/width <width>" is 
   available. 
18Nov21=======================================================================
1. Add a dx spot cache which will store 2 days worth (configurable) of spots.
   This is then used by the vast majority of simple sh/dx queries without 
   using a sub process. A simple sh/dx is any sh/dx that does not have an
   "expression" such as "sh/dx g1tlh". So "sh/dx", "sh/dx 200", "sh/mydx" will
   always run in the main program via the cache. Certain client programs (no
   names, no pack drill) will notice the difference immediately. It's also a
   bit snappier.
2. set/badspotter or set/badnode will work for RBN input. 
3. RBN input with invalid QRGs will be dropped with a nice friendly message
   rather than a scary exception message about multiplication thrown by one 
   of the libraries that I use. 
4. Added CTY-3126 prefixes.
5. Silently ignore self spotting below 1240000Khz (change 
   $Spot::minselfspot to 0 to disable or some other freq in Khz). NOTE this 
   will appear as a spot to the spotter's feed, but will not be passed on.
15Jul21=======================================================================
1. Fix long standing bug in crontabs that commands with " rather than ' around
   strings could cause those commands not to work. 
2. Add CTY 3117 prefixes. 
15Mar21=======================================================================
1. Fix DXUtil::localdata so that it does actually prefer the latest version 
   of a file regardless of whether it is in /spider/data or /spider/localdata.
2. Add CTY-3105 prefixes.
05Mar21=======================================================================
1. Fix DXCron::spawn_cmd so that more than one spawn_cmd can be active at a 
   time. This affects many nodes where lots of regular spawn_cmds happen at
   a time and this prevented crucial things like 'start_connect' from working!
2. Sort user lockout issues to cope with all likely scenarios - including 
   "phantom" SSID working.
3. Fix "close_gracefully" error messages which are useless, but benign. These 
   happen (mainly) when outgoing connects timeout.
24Feb21=======================================================================
1. modify RBN timing arrangements
    
   There are two new twiddle pots:
    
   $limbotime (default 5*60 secs) which allows potential spots to
   hang around longer to allow $minqual *different* skimmers to spot
   them. At which point they are emitted. This is to catch the "slow
   burning" spots where a call is spotted by different skimmers but
   separated in time by more than $dwelltime - in fact maybe by
   minutes.
    
   $maxqual (default 9 skimmers) which short circuits the normal
   hard maximum $quality (9 skimmer spots) and $dwelltime (10secs)
   to allow a spot that has $maxqual *different* skimmers (usually
   as the result of a burst from the RBN) to defeat $dwelltime and
   be emitted the moment that condition is satisfied. There maybe
   a better name for this.
21Feb21=======================================================================
1. add data section on 160m in bands.pl.
07Sep20=======================================================================
1, Change interface to watchdbg & grepdbg slightly so that multiple search
   regexes are ANDed rather than ORed together. ORing is easily achieved 
   already by the usual regex pattern 'PATT..|PATT..|..' whereas ANDing could
   not be done as easily without resorting lots of 'PATT.*PATH' things which
   would not necessarily get what was wanted.
2. Make sure that the pc92 C record only contains nodes and users and not
   other extranoeus things like skimmers...
15Aug20=======================================================================
1. Simplify the skimmer scoring mechanism.
13Aug20=======================================================================
1. Improve the (displayed) RBN frequency weighting the skimmers' frequencies
   w.r.t majority view on each spot. Any skimmer that disagrees with a 
   gets docked a 'point' from their 'good' score (if any) and have a 'point'
   added to their 'bad' score. This score is then taked into account during
   the 'choosing the real frequency' process. If a skimmer agrees with the
   majority the process is reversed. To see this in action: set/deb rbnskim
06Aug20=======================================================================
1, Add CTY-3013 Prefixes
2. Make RBN more efficient. Start the process of skimmer node performance 
   caching. Add minimum quality allowed (at 2), which will be overrideable.
   The format of the rbn_cache has changed and so a full restart will occur.
3. Collect channel input/output stats. New command: show/data_stats to show
   them. 
4. Add local::lib qw{/spider/perl5lib} to store cpanm loaded modules just for
   DXSpider. This is done so that updates needed by future changes can be done
   as the sysop user and doesn't have to be done as root. This paves the way
   for UPDATE.pl which will pull down new modules that it needs automatically.
   When it's written, which will be soon. 
29Jul20=======================================================================
1. Add show/rbn command that allows one to see who is online and configured
   for RBN. See help sh/rbn for details.
2. Fixed issue with set/ve7cc mode adding unwanted newlines to output.
3. Attempted to make the QRG normalisation more "intelligent". This would be
   sooooooooo much easier if skimmers were calibrated more accurately.
4. Added CTY-3012 prefixes.
23Jul20=======================================================================
1. fix Filtering so that it does less of what it was doing badly, thus 
   the perl interpreter to do more of the work. Which means you *should* be
   able to define  more or less any allowable operation for that type of 
   filter. Which is a complicated way of saying: you can now use brackets.
2. Regex expressions now appear as readable text in sh/filter.
3. Make the RBN status file JSON, rather than DD format. In future versions
   it will also be VERSIONed to enable more features to be added 
   transparently.
4. Add show/rbn command to allow sysops to see who is using rbn.
11Jul20=======================================================================
1. Fix (embarrassing) gratuitous '#'s in bands.pl
2. IMPORTANT: certain PC92 strings can crash DXSpider if the nologchan debug
   category is set (which reduces debug files to sizes that non-developers can
   reasonably store (especially during big contests)),
10Jul20=======================================================================
1. Fix console.pl permissions problem when running as another user not in 
   debug mode. Console.pl WILL NOT WORK in debug mode unless it is running
   as the sysop user.
08Jul20=======================================================================
1. "Finish" the RBN system :-)
2. This includes enabling the coarse selection of spot modes using set/wantrbn
   with arguments like 'set/wantrbn cw beacon'. This limits your output to
   just CW, BCN and DXF modes.  
3. The RBN spot is now cached. With a following wind, this means that even a
   node restart, done in a timely fashion (within a few minutes) will not
   cause a "cache warmup" delay for users on a restart.
4. Added the "full fat" set/wantrbn command and aliased it to 'set/skimmer'. 
   I use both terms (whenever I remembered) in the help text.
5. Help text has been written.
6. The UPGRADE.mojo file has been tweeked to point out the users file format
   change.
7. Merge in users.v3j to the mojo branch.
8. Add CTY-3011 prefixes.
07Jul20=======================================================================
1. Fix show/node command.
2. Fix show/cluster command to take into account the presence of skimmer nodes
   which are a new category of thing which is neither a node nor a user.
06Jul20=======================================================================
1. Add RBN.mojo with information of the RBN capabilities of DXSpider.
05Jul20=======================================================================
1. Fix show/dxcc.
2. Add HAPROXY "real ip" type 1 handling for incoming connections.
04Jul20=======================================================================
1. Give console.pl (or dx) a good going over with a bog brush to *finally*
   (cough) make it work correctly with a full 80 column window (and not just
   to a width of 79 really). Also fix scrolling.
28Jun20=======================================================================
1. Merge mojo with users.v3j to remove all vestages of Storable from DXSpider
   in an effort to make the whole storage thing more reliable (and also a
   bit faster). The user file will be auto-upgraded on restart. This may take
   up to 20 seconds on slower hardware (and maybe a bit longer on huge user
   files). On my 180,000 odd users, on my hardware, it takes 4 seconds.
2. The DXQSL system storage is also upgraded, Please run 
   /spider/perl/create_dxqsl.pl in a spare shell. This will recreate the 
   dxqsl.v1j file. Run 'load/dxqsl' in the console to activate it. 
17Jun20=======================================================================
1. Change the Spot file reading mechanism back to the default of using 'tac'.
08Jun20=======================================================================
1. Fix show/mydx (lack of) filtering bug.
2. Add qra locator to prefix_data.pl.
3. Add 4 digit qra square for spotted callsign if show/dxgrid is enabled.
4. Fix general filtering bug where erroneous input causes crashing.
03Jun20=======================================================================
1. Make sure that all possible regexes get passed across to the search engine.
2. Fix out of order logging on sh/log queries spanning more than one month.
3. Do not read backwards on sh/dx, reading forwards seems a 1/3 quicker. 
4. Add <ms>, <tr> and <es> shortcuts to sh/dx (e.g sh/dx <tr> on 2m).
02Jun20=======================================================================
1. Fix the small whoopsie in sh/dx.
01Jun20=======================================================================
1. Fix sh/dx iota and qra. This completes the conversion of sh/dx's limited
   "old style" parsing to using Filter style parsing with something that 
   allows expressions include brackets ( and ) as well as the 'not' keyword.
   NOTE: the precedence rules are the same as perl's '!', '||' and '&&' 
         operators.  
31May20=======================================================================
1. Improve links command layout slightly.
2. Issue an *accurate* UPGRADE.mojo with all the new packages included! 
3. Fix issue with sh/dx
30May20=======================================================================
1. Fix sh/dx! It appears that there is a long standing problem with sh/dx not
   actually return all the answers it should. I have also had a request to
   allow / enable the "not" keyword (just like the filtering system dones).

   Now this was one of the earliest modules that I wrote and it took quite
   a bit of work to tease out the important bits and then use the Filter 
   module (as in acc/spot) to generate the sh/dx filtering expressions. This
   seems to have been done. 
 
   NB This will likely not work if you are using a SQL backend to do sh/dx
   commands. This was never actually an official feature. It is now 
   deprecated.   
29May20=======================================================================
1. Please install Math::Round and Data::Structure::Util. Instructions are
   available in UPGRADE.mojo.
2. ** Withdrawn ** user file format change to json not yet committed.
20May20=======================================================================
1. Backport convert-users-v3-to-v4.pl to allow creation of the new json 
   formatted *text* based user file from the old v3 DB_File and Storable 
   version. This can be done either online (with the node running) or offline
   with the node stopped. This is in preparation for the next update of the
   mojo branch. Running this program just *BEFORE* doing your next update of
   the mojo branch *should* ensure a seemless transition to the Storable &
   DB_File free version of the users file. 
2. Show git branch in show/version.
3. Add CTY-3010 changes.
17May20=======================================================================
1. Backport DXSubprocess to change serialisations.
   Currently the internals of Mojo::IOLoop::Subprocess defaults to
   using Storeable as its cross-process argument and data serialisaion
   method. It can use others. This update reverts back to the
   original ForkCall method of using JSON.
10May20=======================================================================
1. Added basic changes so that users *could* have multiple connections to the
   same node if it is allowed. This is work in progress and is there to see 
   if it deals with some networking problems encountered on very high volume
   sites which can see more than 1000 users (although the problems can occur
   with many hundreds or by the practices of certain ISPs). More information
   will be forthcoming if I get to the bottom of what's REALLY going on and
   whether this is (or maybe just one part of) the solution. It won't be 
   ready for general use until then.
2. Fixed the script import error reported by Joaquin (EA3CV?), by the simple
   expedient of restoring the version from the master branch. 
09May20=======================================================================
1. Show the route by which this PCxx came in progress debugging reports. In
   some other words: the spot/wwv/wcy/ann message arrived first from this 
   connection. 
2. Improve progress WWV & WCY messages.
3. Stop random node isolations (at least in one place)
08May20=======================================================================
1. Tidy up routing table
2. Add new argument to show/version (ALL or list of regexes) that allow you
   to see the version and build nos of all nodes on the system. 
07May20=======================================================================
1. Revert changes made since 25Apr concerning IP address reconciliation.
25Apr20=======================================================================
1. Add maximum no of users on node to show/cluster.
2. Add ability to show last n lines of debugging ring buffer.
3. Remove redundant wpxloc.dat file.
24Apr20=======================================================================
1. Add 'progress' debugging for showing that stuff is happening in nologchan
   a.k.a ringbuffer only mode. 
2. Fix grepdbg so that no regex argument simply lists the file. 
3. Add CTY-3008 prefixes.
22Apr20=======================================================================
1. Fix the module search path in update_sysop.pl
2. Add latest prefixes CTY-3007
3. Fix unset/startup command. This will only work for users' start up scripts
   things like user_default or startup must be edited or removed by hand. 
21Apr20=======================================================================
1. Finally fix the "actually tranmit" any output (like from 'logout' files)
   to users before disconnecting. This also means that disconnecting nodes
   now receive the (totally redundant, but hey) PC39 reason for disconnection.
20Apr20=======================================================================
1. Speed up sh/log (including chat, rcmd, ann etc) that search the system
   log files, by removing a completely redundant subsystem and also leveraging
   the core operating system utility 'tac', if it's available. 
19Apr20=======================================================================
1. The long haul that is the mojo branch has started up again. It's something
   to do during this lockdown.
2. The problems and instabilities around running commands that worked in 
   forked processes, when used other than by normally logged in users (e.g. 
   in the local crontab), have been fixed.  
3. If a /spider/local_data/logout file is present then its contents will be
   sent to the user on logout.
4. Add the ability to sh/dx origin or ip (address).
5. Retire the use of the deprecated Mojo::IOLoop::ForkCall in favour of using
   the supported equivalent in Mojolicious 7.26 and above. Which means you
   will need to upgrade Mojo to at least the version. The current version is
   8.36 and is known to work.
10Sep19=======================================================================
1. Improve DXSql database filtering to exclude most via <locator> type 
   reports.
2. Add CTY-2913 prefixes + wpxloc.raw
14Jul18=======================================================================
1. Add CTY-2808 prefixes + wpxloc.raw
16Jun18=======================================================================
1. add more modes to rbn.pl
23Jan18=======================================================================
1. Add CTY-2802 prefixes
27Oct17=======================================================================
1. Get correct hostname support and privilege levels on web connects.
26Oct17=======================================================================
1. Start (serious) work on web interface. Make the necessary changes to allow
   a local webserver to connect and get its own style of messages.
11Aug17=======================================================================
1. Add default systemd service file file
10Aug17=======================================================================
1. check for disconnecting flag in more places
31Jul17=======================================================================
1. Fixed create_usdb.pl path specifications
2. add CTY-2708 prefixes
12May17=======================================================================
1. Fix sh/425 (mostly)
2. Add CTY-2706 prefixes
05May17=======================================================================
1. Add CTY-2705 prefixes
04Apr17=======================================================================
1. Add CTY-2704 prefixes
17Mar17=======================================================================
1. Add latest cty.dat & wpxloc.raw
21Feb17=======================================================================
1. Fix sh/dx on 14050 so that it does what one expects.
2. Add CTY-2702 prefixes
15Feb17=======================================================================
1. Update UPGRADE.mojo a bit
2. Add local::lib so that it can be used for non-root installations.
09Jan17=======================================================================
1. Fix mojo branch clean install issues (failing to find $main::data et al)
02Jan17=======================================================================
1. Add CTY-2615 prefixes
2. Add rbn.pl - an experimental rbn deduplicating spot filter. 
26Dec16=======================================================================
1. Fix some possible routes to $myalias callsigns becoming nodes.
22Nov16=======================================================================
1. Add CTY-2614 prefixes
21Nov16=======================================================================
1. Add CTY-2613 prefixes
17Nov16=======================================================================
1. Change method (again) of get processor seconds in cmd/mrtg.pl. Split out
   main process from children and display each separately.
16Nov16=======================================================================
1. Change method of get processor seconds in cmd/mrtg.pl
18Aug16=======================================================================
1. Add CTY-2610
2. put back msg total in & total out for mrtg and background mrtg
3. add dxcc == ADIF country code.
16Aug16=======================================================================
1. Mega change to push all local data in $root/local_data and where there
   is duplication with system data (still in $root/data) then use whichever
   is newer. This will move stuff (permanently) like spots and other DXLog
   files to local_data as well as the userfile, DX QSL file and usdb stuff.
25Jul16=======================================================================
1. Add some timing stats to cmd spawn_cmd.
08Jul16=======================================================================
1. Add latest wpxloc.raw
2. Add CTY-2609
28Mar16=======================================================================
1. Fix get/keps.pl so that it does the right fetch
25Mar16=======================================================================
1. Rework DXCron::spawn command to use Mojo::IOLoop::ForkCall
04Jan16=======================================================================
1. Add CTY-2601 prefix file
02Jan16=======================================================================
1. fix new URL for sh/425 command
30Dec15=======================================================================
1. Add CTY-2516 prefix file
2. Try to stop and also reset node call user records back to 'S'
3. Fix multiple on_disc events in AsyncMsg.pm
02Jun15=======================================================================
1. Extend regex for quit to allow other commands starting in 'q'.
2. Add CTY-2506 prefix file
26May15=======================================================================
1. Add CTY-2506 prefix file
01Mar15=======================================================================
1. Add CTY-2503 prefix file
13Feb15=======================================================================
1. Fix problem with sh/dx <call> if people are logging spots to a SQL database
3. Added CTY-2502 prefixes. 
3. My late father would have been 102 today.
27Nov14=======================================================================
1. Add CTY-2415 prefix list
25Nov14=======================================================================
1. Add CTY-2414 prefix list
21Nov14=======================================================================
1. Add CTY-2413 prefix list
21Oct14=======================================================================
1. Add CTY-2011 prefixes
16Sep14=======================================================================
1. Add CTY2410 wpxloc.raw + cty.dat
2. remove autoflush from logs
16Sep14=======================================================================
1. Fix (now) missing error_handler
30Aug14=======================================================================
1. add CTY-2409 prefixes
2. add new wpxloc.raw
19Jul14=======================================================================
1. Use JSON::XS for ForkCall serialisation in DXCommandmode.pm
19Jun14=======================================================================
1. Fix EOF detection of incoming nodes.
2. Attempt to autogenerate Version.pm with *correct* values (instead of the
   the git id of the previous commit). Oh, and do it on  every commit or pull.
17Jun14=======================================================================
1. Add CTY2405 prefix changes
2. Arrange for all file searching routines based on sh/dx or sh/log to be
   non-blocking. This should allow incoming and outgoing protocol to 
   continue flowing when such a command is run. 
3. Added some usable code to show/wx (finally).
4. Make stats cmds (sh/v?hfstats, sh/v?hftable) non-blocking.
5. Make sh/isolate, sh/registered, sh/lockout non-blocking.
6. Fix shutdown command.
16Jun14=======================================================================
1. Get AsyncMsg working for HTTP type ephemeral connections
21Apr14=======================================================================
1. Add CTY-2405 prefix list
08Mar14=======================================================================
1. Add newer version of wpxloc.raw with some missing prefixes added.
07Mar14=======================================================================
1. Add new version of wpxloc.raw 
2. Fix a small crash with Spot::dup
12Jan14=======================================================================
1. Fix minor issue with dx command when used in a script, as found by
   Christian Furst.
2. Fix (rather serious) error in import_cmd that did not reset callsigns
   correctly in $main::me.
30Dec13=======================================================================
1. Add CTY2312 prefix changes
19Nov13=======================================================================
1. Add CTY2311 Prefix changes - needed for CQWW 2013
09Oct13=======================================================================
1. Add CTY2310 prefix changes
13Sep13=======================================================================
1. Added CTY2309 prefix data, together with its associated wpxloc.raw file.
10Sep13=======================================================================
1. Add the get/keps command, which allows a sysop to get the latest AMSAT
   keplarian elements either on demand or periodically in the crontab.
10Sep13=======================================================================
1. Fix sh/time such that no arguments print details for the caller.
09Sep13=======================================================================
1. Make all the Net::Telnet based commands (sh/425, sh/contest, sh/db0sdx,
   sh/wm7d, sh/ik3qar) asynchronous, so that they no longer pause the node
   while they go off and query the internet for results.
06Sep13=======================================================================
1. Fixed sh/contest so that it works again. How it ever worked at all is
   a bit of a mystery. Now possible to type sh/cont dec or sh/cont dec 2013
   (with month and year in any order). Please comment out any $contest_host
   or $contest_url variables you may have in /spider/local/Internet.pm (if
   you have one, that is). It will not work with the previous values.
2. Added CTY2308 prefix changes.
3. Added (back) internal function support inside commands. This allows
   commands to create functions inside the <cmd_name>.pl files. There are
   now also standard function names that can do special things.
24Jul13=======================================================================
1. Alter default node address in client.c from "localhost" to "127.0.0.1".
21Jul13=======================================================================
1. Fix Msg.pm to allow IPV6 addresses again (how did it ever work?).
2. Add latest CTY2307 prefix changes.
3. Other changes including (some) more prefix files, 4mm band data and 
   DXSql/Pg.pm
4. Add ip address in links.pl
31May12=======================================================================
1. Added CTY2210 prefix changes
29May12=======================================================================
1. Added CTY2209 prefix changes
10Apr12=======================================================================
1. Added DXSql/Pg postgres Spot collection interface from Wijnand PD0MZ. 
2. Add CTY2206 prefix changes
13Mar12=======================================================================
1. add CTY2204 prefix changes + new wpxloc.raw
12Mar12=======================================================================
1. Check database operations on MySQL/SQlite3.
2. Add ipaddr field to spot table if not present.
3. Add ipaddr field from PC61 to database stored spots.
09Mar12=======================================================================
1. Try to trap unblessed references on receipt of PC34s
15Feb12=======================================================================
1. Add CTY2202 changes
25Jan12=======================================================================
1. Add CTY2201 changes
21Dec11=======================================================================
1. Add CTY2118 changes
20Dec11=======================================================================
1. fix strange startup repeating lockfile issue where (somehow) there is an
empty (but existing) lockfile, from GB7YDX.
29Nov11=======================================================================
1. fix shutdown() in Msg.pm
2. Add CTY2117 changes
05Nov11=======================================================================
1. Add CTY2116 changes
04Nov11=======================================================================
1. Add CTY2115 changes
20Oct11=======================================================================
1. Add CTY2113 Changes
02Oct11=======================================================================
1. change 40m bandplan after some input from Martin, ik2rmz
2. Add CTY2112 changes
25Jul11=======================================================================
1. add CTY2109 changes + wpxloc.raw for ST0
2. add CTY2110 changes
24May11=======================================================================
1. Add CTY-2108 prefixes
04Apr11=======================================================================
1. After being poked by Brendan EI6IZ, add outgoing IPV6 connect() handling
29Mar11=======================================================================
1. Add CTY-2106 prefixes
16Mar11=======================================================================
1. Add CTY-2105 prefixes
10Mar11=======================================================================
1. Add CTY-2104 prefixes
01Mar11=======================================================================
1. Add CTY-2103 prefixes
31Oct10=======================================================================
1. Increase PC92 A/D "slug" time to 5 minutes.
29Oct10=======================================================================
1. Allow Jim AD1C to track the changes to the cluster in realtime using the
debug system (set/debug cluster).
27Oct10=======================================================================
1. fix chat problem introduced in the last update
25Oct10=======================================================================
1. Drop PC12s purporting to originate at nodes that do PC9x (suggestion from
Lee VE1CC).
2. Increase default dup age for announces from 5 -> 18 hours.
3. add CTY 2009 cty.dat data.
4. Stop downgrading and sending CHAT messages on PC12 groups as it appears
that this is yet another "standard" that isn't universally understood.
23Oct10=======================================================================
1. add dbexport command to allow the export of ak1a style databases to a
file.
2. add dxqsl_import and dxqsl_export commands to allow the import and export
of sh/dxsql qsl manager data extracted from spots as they pass through.
04Oct10=======================================================================
1. add CTY-2007 prefix list
04Oct10=======================================================================
1. incorporated the major prefix release CTY-2006 from Jim AD1C
17Jun10=======================================================================
1. Add ip address to dxspots and default to PC61 output to dxspider nodes.
2. Allow 4 letter callsign portions again.
16Jun10=======================================================================
1. Increase default ephemeral dupe time for PC41 and such like lines.
2. Include CTY-2004 updates.
08Apr10=======================================================================
1. Modify console.pl so that it works in a Windows Cmd window. Get a Windows
Curses ppd from: http://cpan.uwinnipeg.ca/dist/Curses.
18Mar10=======================================================================
1. Make privilege 0 "stick" if set on nodes
13Mar10=======================================================================
1. try to fix AGW crashes caused by peerhost looking at the wrong thing.
2. Add more ax25 fixes for peerhost
03Mar10=======================================================================
1. add IP addresses to connecting PC92 A addresses and log them
2. add CTY-2002 prefixes
27Nov09=======================================================================
1. Add 500khz band as suggested by Béla, HA5DI.
2. Add CTY-1923 prefixes
26Nov09=======================================================================
1. add ip address to PC92 A records
25Nov09=======================================================================
1. Change sh/qrz to use the xml interface. You will have to subscribe to
the xml interface - see http://www.qrz.com/XML/index.html for more info.
2. Remove (bodged) forced encoding to iso-8859 on incoming text. More
subtle handling will be required.
3. Add CTY-1922 prefixes
14Nov09=======================================================================
1. Add CTY-1921 prefixes
2. allow -SSID values on set/badnode
27Aug09=======================================================================
1. Add CTY-1913 prefixes
2. Limit Route::config to 10 levels (as default)
08Jul09=======================================================================
1. Add CTY-1912 prefixes
26Jun09=======================================================================
1. Add CTY-1911 prefixes
14Jun09=======================================================================
1. Add CTY-1910 prefixes
04Jun09=======================================================================
1. removed warnings from debug.c from the C Client.
2. Add CTY-1909 prefixes
02Jun09=======================================================================
1. Add CTY-1908 prefixes
29May09=======================================================================
1. Add CTY-1907 prefixes
19May09=======================================================================
1. Add CTY-1905 prefixes
15May09=======================================================================
1. Add CTY-1904 prefixes
2. Accommodate "official" git command syntax in issue.pl
29Dec08=======================================================================
1. Add show/motd command as requested by Ian G0VGS.
2. add CTY-1817 prefixes
17Nov08=======================================================================
1. Fix sh/425 to work with new server
2. add CTY-1814 prefixes
21Oct08=======================================================================
1. Add CTY-1811 prefixes
04Oct08=======================================================================
1. set $main::maxconnect_node = 0 as default. It's causing too much aggro..
02Oct08=======================================================================
1. Add set/maxconnect command to allow the defaults to be overridden for
individual users/nodes.
2. Make sure that the check really is for incoming connections only...
01Oct08=======================================================================
1. added CTY-1809 prefix data
2. added new config variables to allow an incoming users to have (as default)
up to 2 other connections to other nodes and incoming nodes up to 8 other
parents. Note that you can switch off this behaviour by setting
$main::maxconnect_user or $main::maxconnect_node = 0 (or set them to whatever
you need).
28Jun08=======================================================================
1. Made buddies work again on PC92.
26Jun08=======================================================================
1. added show/ik3qar command by Leo IZ5FSA. See comments in perl/Internet.pm
for setup instructions (note that you will have to copy these lines to
local/Internet.pm before it will work).
2. Send talks to every node a user is logged onto.
24Jun08=======================================================================
1. Change the route finding algorithm completely. No more recursion. No more
tree searching. It now gives you answers even on a partial cluster map. Oh
and the answers are correct, instead on completely random.
2. Put back (maybe some of) US State handling.
3. Add CTY-1806 prefix data
28May08=======================================================================
1. remove "recursion limit" message from Route.pm
28May08=======================================================================
1. Improve the detection of short exact callsigns that are out of prefix area
(eg K7A) (thank you FCC).
2. Improve long line handling on console.pl
3. Add CTY-1805 cty.dat
26May08=======================================================================
1. Put a hard limit on the depth of searching for routes
2. Add CTY-1804 prefix changes
13May08=======================================================================
1. add disc users|nodes|all so that each of these classes can be disconnected
in one command. From a request by Luigi IK5ZUK.
12May08=======================================================================
1. add 'exact' keyword on sh/dx to allow for an exact match to a callsign.
From a request by Robert HB9DZA.
10May08=======================================================================
1. add some privileges to (un)set/bad* and show/bad* commands. Thanks to
Mauro IV3SCP for pointing this out to me.
06May08=======================================================================
1. Finally made the incompatible change of changing DXUser->get* to
DXUser::get*. This will break any third party addons or commands use these
commands.
2. Change version to 1.55
3. Drop the lower limit of 60m to 5100 after Dave G7RAU pointed out usage.
(see http://www.bandplans.com/index.php?band=60)
22Apr08=======================================================================
1. Added two Xmas Is calls.
15Apr08=======================================================================
1. added CTY-1803 changes
25Mar08=======================================================================
1. Include some cty.day changes
19Mar08=======================================================================
1. Include CTY-1802 cty.dat changes from Jim AD1C
29Feb08=======================================================================
1. Fix crash on rcmd of an invalid command.
25Feb08=======================================================================
1. Arrange for AGWMsg to retry connection either if the AGW engine isn't
loaded on startup or it disappears for some reason and restarts.
19Feb08=======================================================================
1. Added CTY-1801 cty.dat data.
2. Fix problem with entering non-ascii data and then executing commands that
are guessed from the "cleaned up" version of the string. Now if you enter
commands with invalid characters, it will error immediately.
3. fix a problem detecting IPV4 localhost on IPV6 enabled systems.
10Feb08=======================================================================
1. sort sh/node output. Also show more information.
05Feb08=======================================================================
1. Added a Windows only BPQ interface from the man himself: John G8BPQ.
See some instructions in /spider/txt/spiderBPQ_en.txt for how to use it.
07Jan08=======================================================================
1. more changes to cty.dat
07Jan08=======================================================================
1. added TO5FJ to cty.dat (under orders from Jim AD1C :-)
05Jan08=======================================================================
1. Made necessary change to get DXSpider to (seem to) work in perl 5.10
27Dec07=======================================================================
1, added CTY-1711 prefix changes (and new wpxloc.raw) from Jim AD1C.
25Nov07=======================================================================
1. Fix a crash on receiving an rcmd from an new node.
21Nov07=======================================================================
1. Added CTY-1710 prefix changes
19Nov07=======================================================================
1. change MRTG graphs to be based on GMT, not localtime. This allows one to
more easily compare debug data with traffic graphs.
2. Add a create/user command to just add a plain user.
17Nov07=======================================================================
1. Add Local::ann() as requested by Felipe PY1NB.
16Nov07=======================================================================
1. add CTY-1709 prefix changes
2. added extra checking for the time stamp on PC9x sentences. These must now
be within 15 minutes (configurable) of this node's time to be accepted.
3. made show/newc terminal width aware.
24Oct07=======================================================================
1. Added CTY-1708 prefix changes
23Oct07=======================================================================
1. Added CTY-1707 prefix changes
15Oct07=======================================================================
1. prevent PC61 from propagating outside spider boxes.
2. simplify the regex for sh/contest to allow it to work on perl < 5.8.x.
09Oct07=======================================================================
1. Added *VERY* important change to prevent loops on PC9x sentences.
06Oct07=======================================================================
1. added the possibility of having a motd_ax25 especially for sending to
radio connections after a suggestion by Paolo YV1DIG.
05Oct07=======================================================================
1. Handle PC61 from VE1CC clusters as PC11.
01Oct07=======================================================================
1. fix .gtkconsole_data creation bug.
27Sep07=======================================================================
1. Fixed gtkconsole to split out all the windows. See
/spider/gtkconsole/README for installation and usage instructions. This
program will work on both Windows and Linux provided the extra Gtk2 perl
libraries + dependencies are installed. Instructions for getting them are in
the README file.
25Sep07=======================================================================
1. Fix mrtg command so that it does not require /var/lock (which anyway gets
removed and recreated on boot - and the debianised mrtg does not recognise
that) nor /var/lib/mrtg for the confcache (whatever that is).
24Sep07=======================================================================
1. fix error message on disconnect and, BTW, fix the cause of premature
disconnections in the new PC92 code.
22Sep07=======================================================================
1. fix mrtg script so that it sets LANG='C', in addition, it appears that you 
will need to create a /var/lock/mrtg and /var/lib/mrtg directory, both with
chmod 01777 /var/lock/mrtg /var/lib/mrtg. They may already exist but without
the correct permissions.
15Sep07=======================================================================
1. Add *optional* INET6 connectivity. In order to use this you must load
IO::Socket::INET6 and its dependencies from CPAN or get the distro's packaged
versions. I used 'sudo aptitude install libio-socket-inet6-perl' for ubuntu
(which should work for debian as well), for fedora/rpm based systems
'sudo yum install perl-IO-Socket-INET6' or near equiv should work. This has
been done quite simplistically, but it seems to work.
10Sep07=======================================================================
1. Remove warnings for EINPROGRESS etc for Windows perl 5.8.
2. Try to see if using just one lastid is viable in all situations. If it is
then this will cure the talk problem.
20Aug07=======================================================================
1. add cty.dat + wpxloc.raw changes for CTY-1706.
31Jul07=======================================================================
1. extend 60m band slighty and add ssb section.
2. add a new cty.dat (CTY-1705) from Jim AD1C.
27Jul07=======================================================================
1. Added Angel's changes to Messages for Spanish (finally).
25Jul07=======================================================================
1. don't clear out routing tables on shutdown. This should speed that up.
24Jul07=======================================================================
1. Try to target PC93 (the combined talk/ann/chat sentence) better. Prevent
PC12 chat going to non-dxspider and non-ak1a nodes. None of the others seem to
handle it correctly (Lee VE7CC: do you?).
2. a few other tidyups,
see: http://www.dxcluster.org/cgi-bin/gitweb.cgi?p=spider.git
for details.
18Jul07=======================================================================
1. Change the meaning of set/isolate. Set/isolate now works in both directions
in that an isolated node will only have its local config remembered and will
only be sent this nodes local config. This is exactly equivalent to both
ends setting set/isolate. If that is already the case then there should be
no noticeable change. Any extra that the far node sends, over and above its
local config will now be ignored.
17Jul07=======================================================================
1. remove dupefile on startup and on ending the node. Add clear/dupefile
command to allow people to do it at runtime as well.
12Jul07=======================================================================
1. Change disconnection code so that nodes that are no longer routable are
(all) cleared out.
2. Add help for sh/band and also allow query of individual band or regions.
11Jul07=======================================================================
1. improve speed of sh/c/n
2. remove all $Id$ strings from cmd tree
09Jul07=======================================================================
1. remove check for PC93 from legacy nodes. This will allow PC10s to be
propagated correctly. Probably.
08Jul07=======================================================================
1. put in a temporary fix to the crashing on incoming PC10 talks, whilst I
try to work out how it is happening.
06Jul07=======================================================================
1. re-arrange id checking so that it is more logical and check that config
records, that can be an hour coming, are not thoughtlessly ignored, thus
causing nodes to time out.
2. Make sure that the 'over midnight' distance calculation actually does what
is required!
3. Tart up version number reporting in sh/node.
4. Pass the correct number of parameters in pc93 -> pc12 conversions which
should stop returning PC12s coming out as SYSOP announces.
05Jul07=======================================================================
1. Try to make sure that the node config broadcasts are actually sent...
03Jul07=======================================================================
1. fix unwanted dupe notifications if a PC12 comes back in on a loop.
02Jul07=======================================================================
1. Add a new command to show the contents of the cmd_cache. This allows those
people whom develop their own commands to see which version they are using.
It is called show/cmd_cache (or sh/cmd for short).
2. Add some extra info to the links command. Show whether a link is isolated
and also whether it has filters (if applicable) and whether these are
personalised ('Y') or the default node_filter ('D').
29Jun07=======================================================================
1. If a node is set/isolated then make sure that a) pc9x is not advertised
and b) pc9x is ignored.
2. Add (un)set/wantpc9x command (but please don't use them without talking
to me first), here be dragons!!
25Jun07=======================================================================
1. make sure that a C record is sent for node call every update period.
2. make announces work again (probably).
3. Fix long standing possibility of a crash with a new user.
4. Add continuous chatting (like talk with no message eg 'chat #9000' just on
its own with no message).
24Jun07=======================================================================
1. Fix the routing algorithms to allow route selection in the face of
incomplete trees of nodes (trees as produced by sh/newc).
2. Fix the obscount issues which mean that many nodes get timed out after 3hrs.
3. Extend 4m to 70631 to cover CT.
23Jun07=======================================================================
1. fix basic deduping algorithm
2. rearrange node startup protocol to avoid issuing unnecessary PC92 and also
to spread the PC92Cs out for dependent nodes.
3. increase the PC92C update time to 1 hour.
4. fix sh/route, with a view toward replacing Route::alldxchan.
5. downgrade a link advertising pc9x if no PC92C forthcoming from it back to
old style protocol and carry on, rather than disconnecting (protocol facist
that I was).
6. Fix isolated pc9x nodes so that they remain in oldstyle protocol.
22Jun07=======================================================================
1. Fix Alias for sh/mydx (so it isn't the same as sh/myfdx).
2. Fix sh/c/n uninitialised variable message
3. Fix (and improve) sh/newc gb7 problem
4. Fix broken set/sys_qra command
21Jun07=======================================================================
1. merge back SIMPLEROUTE branch to issue as official 1.54.
18Jun07=======================================================================
1. add a optional dependency on Encode (included in 5.8.x) to encode strings
to latin1 for deduping purposes, hopefully getting rid of some dupes.
2. add a default INPUT filter for a node (by_dxcc <node's country>) if no
specific or default INPUT node exists.
14Jun07=======================================================================
1. prepare for git repository and moving of anon cvs repository to
scm.tobit.co.uk.
13Jun07=======================================================================
1. start using git.
2. change all the version / build numbering.
11Jun07=======================================================================
1. Change the frequency normalisation for DX Spot dupe checks so that any
decimal part is thrown away (in other words: truncate the freq to integer khz)
20May07=======================================================================
1. add 1704 cty.dat
08Apr07=======================================================================
1. add CTY-1703 cty.dat
2. alter the way the dupefile deletion is done.
18Mar07=======================================================================
1. change URL in show/425.
04Mar07=======================================================================
1. add CTY 1702 prefix data files
22Feb07=======================================================================
1. add show/myfdx to Aliases.
15Feb07=======================================================================
1. allow convkeps.pl to parse NORAD keps files.
22Jan07=======================================================================
1. disable default propagation of PC9x sentences
2. simplify PC17 handling
16Jan07=======================================================================
1. back ported a change to PC16 handling so that a locally connected node's
info clears out and generally overrides any residual PC16 info gathered from
elsewhere.
15Jan07=======================================================================
1. added CTY-1701
07Jan07=======================================================================
1. use IO::Socket blocking where available and switch off or ignore all
attempts to block.
05Jan07=======================================================================
1. increase default ephemeral deduping on PC15 to 6 minutes (from 2).
23Nov06=======================================================================
1. added wrapping to over length lines in console.pl.
03Nov06=======================================================================
1. add CTY-1609 changes
2. add back Geo::Taf code with submitted mods
3. add new version of the sh/425 code using the new database location.
09Oct06=======================================================================
1. fix problems with bad filters pointed by Thomas DL3SBB.
27Jul06=======================================================================
1. merge in official issue version of wpxloc.raw (with one change: 4U1V).
26Jul06=======================================================================
1. incorporated Jim AD1C's spiffy new, unified, wpxloc.raw and version 
1605 of cty.dat.
21Jul06=======================================================================
1. Added the (now) all new gtkconsole program, with all the changes needed in
dxspider to run it (yet another cmd interface (sigh)). You will need gtk2-perl
installed (most modern linux distros do this automatically). The big news is
that this will work on Windows boxes as well if you install the Gtk libraries
as per: http://gtk2-perl.sf.net.
03Jun06=======================================================================
1. Added changes to wpxloc.raw (prefixes) suggested by Jim AD1C. 
2. Made a change to prevent xml data being interpreted unless we are
configured for it.
3. Change the buddy messages after a suggestion from Angel EA7WA.
02Apr06=======================================================================
1. incorporated cty-1604 data.
29Mar06=======================================================================
1. fix sh/muf that I broke in the previous change
26Mar06=======================================================================
1. Arrange for any online buddies to be displayed when a user logs on.
2. Try to reduce the amount of POSIX stuff that is loaded to just that which
is required.
23Mar06=======================================================================
1. Added cty-1603 data.
2. On the advice of Jim AD1C I have changed around some things in wpxloc.raw
that affect 8J,CT2,KC4,KG4,KG6,ZK1 and ZS2. These should now show the more 
likely canonical prefix.
3. On the advice of Tom WB8ZRL, I have made BW an alias for BV (Taiwan) and 
made some other changes to affect the selection between the mainland and the
island more reliable. 
10Mar06=======================================================================
1. fix sh/c/n.
2. Add new Spanish translations by Angel EA7WA.
07Mar06=======================================================================
1. Add the node call to remote tell_login and tell_buddie calls.
06Mar06=======================================================================
1. Fix warning on empty PC19s.
2. Add new command set/local_node to allow people to see logins/outs on other
related nodes.
3. Add new command set/buddy to allow people to see when their favorite 
chum(s) logins/out.
4. Arrange filter reading so that the following order is followed for users: 
callsign, callsign less ssid, user_default. Nodes are unchanged. 
14Feb06=======================================================================
1. Turn R and SFI around in mrtg.pl.
13Feb06=======================================================================
1. Updated prefixes with cty-1601 data.
2. Fixed qth in show/muf so that it shows the correct qth (if known).
3. Try to make the state machine in convkeps.pl deal with more variations
of the 2 line keps sets that are available on line. Also give a sensible
error message if no keps were actually decoded.
4. Update the base keps to the latest set of AMSAT keps 06033.
04Feb06=======================================================================
1. Explicitly ignore spots with lower case characters in the spotted call
01Feb06=======================================================================
1. Explicitly ignore spots with blank spotted callsigns
26Jan06=======================================================================
1. Fix divide by 0 error in DXBearing (how come this has taken so long to
appear?).
22Jan06=======================================================================
1. Remove +<prefix> from the fronts of comments to fix LoTW dupes.
18Jan06=======================================================================
1. Fix spurious announce from previous year appearing in sh/ann.
15Jan06=======================================================================
1. Fix some obviously long standing problems with create_sysop.pl and also
with initialising the User file.
2. Fixed the problem with certain things not being shown in sh/log (because of
a regex that rejected too many things).
3. Speeded up sh/log quite a bit at the same time.
4. Add a default limit of the last 36 months for sh/log querys. 
14Jan06=======================================================================
1. undo frequency rounding change, it causes more problems than it solves.
11Jan06=======================================================================
1. Fixed problem with badspotters doing ann/full as pointed out by Luigi 
IK5ZUK.
07Jan06=======================================================================
1. Fixed problem with the standalone 'showdx' program pointed out by Leo,
IZ5FSA.
2. Fixed rounding problem on entering spots as pointed out by Ron N5IN.
3. Fixed problem with badspotters sending DX as pointed out by Luigi IK5ZUK.
4. Added some extra logging for swearing so that we can see what lines used
which swear words. Hopefully this will allow sysops to refine their swearing 
filters more easily. 
06Jan06=======================================================================
1. Fix problem with rcmd <call> sh/fdx
27Dec05=======================================================================
1. put some more flesh on the SQL stuff (which may turn out to be a bit of a
red herring as it doesn't appear to be significantly faster (for spots) than
the existing code).
21Dec05=======================================================================
1. Add start of optional SQL working.
2. Fix BadWords so that the simple word check splits words on word boundaries.
13Dec05=======================================================================
1. upissue version no to 1.52
07Nov05=======================================================================
1. Fix warnings on filtering spots where the filter was looking at US states
and there is no US state in the spot. 
2. Fix the dupes caused by having a prefix in the last characters of the 
comment.
01Nov05=======================================================================
1. add log2csv.pl for printing out logfiles
25Oct05=======================================================================
1. Incorporated the cty.dat from Jim dated today (25Oct05).
08Oct05=======================================================================
1. Reject PC11s with blank spot callsigns
01Sep05=======================================================================
1. Change the logic of propagating WWV broadcasts. Now all non-input filtered
PC23s will be sent on. Previously only the first successful new WWV was 
rebroadcast.
2. fix the problem with by_dxcc and origin_dxcc not working on WWV.
29Aug05=======================================================================
1. try something else to resolve/prevent more of these spot dupes. It appears
that there is software out there chopping off variable amounts from the ends
of comment fields. This makes the task of detecting dupes that much harder.
10Aug05=======================================================================
1. trim dx spot duplicate length after normalisation
2. Do the same for announces
08Jul05=======================================================================
1. new CTY.DAT encorporated
27May05=======================================================================
1. change copyright in dbg message at startup.
25May05=======================================================================
1. Added a means to import a script of arbitrary commands to allow external
programs to do stuff.
23Mar05=======================================================================
1. fix (un)set/badspotter so that it only stores non-ssid calls.
2. mention action on talk and ann/full in help.
22Mar05=======================================================================
1. Fix ? so it works again.
2. Fix Aliases for sh/c so they are correct
3. Fix sh/connect for AGW ports and other niffnaffs.
22Mar05=======================================================================
1. fixed sh/c/node sh/c/a and sh/newc/n.
21Mar05=======================================================================
1. log AGW port on connection
2. merge in latest (2Mar2005) cty.dat 
3. fix command searching so it does not pick up false positives for commands
with / in them in directories that don't have that.
4. Important security change.
5. add missing input filter for WWV
16Mar05=======================================================================
1. make the correct correction to the DL entry in wpxloc.raw (left out the
'N' of 'North' in the latitude).
2. Severely reduce the dupes caused by some of the badly configured / written
spot suckers out there. 
13Mar05=======================================================================
1. There has been a mix up in the Aranea1 branch. I have managed to merge a
change that I have been meaning to do for ages. I have now made that change
here.
27Feb05=======================================================================
1. fix duping on bad spot suckers that copy the prefix that is put at the end
of the comment section by AR-C nodes becoming the whole comment. 
26Feb05=======================================================================
1. Added show/grayline command from Steve K9AN. This is also aliased to
show/greyline :-)
2. fix spot dupe ambiguity on spotter having an SSID (remove it).
25Feb05=======================================================================
1. Changed the way spot deduping is done. This is likely to make deduping much
stricter. In essence a person cannot spot the same call on the same frequency
more than once an hour (configurable) unless he makes a (non-duped) comment
as well. 
2. Added Swains Island
3. Added TO4G for Glorioso 
19Feb05=======================================================================
1. changed ssb allocation on 40m to add missing 5Khz.
2. Change sh/425 to Leo, IZ5FSA's requirements.
08Feb05=======================================================================
1. possibly fixed the multiple condition problems on sh/dx
2. added some FAQs.
05Feb05=======================================================================
1. Fix a long standing (ie since the first bulletin was sent) bug with old
mail not being deleted until a restart was done.
2. As well as a duplicate check on existing bulletins, I have added a check 
the message is not (already) too old. 
3. fix problem for perl < 5.6 in Thingy.pm 
03Feb05=======================================================================
1. Added latest Spanish translations courtesy of Angel EA7WA.
2. Force all languages to use pr in en in Messages, as the prompt is
the same for all.
19Jan05=======================================================================
1. More Spanish changes by Angel, EA7WA.
2. add language dependant motd files. You can now have motd_{lang} and 
motd_nor_{lang} (eg for Spanish: motd_es and motd_nor_es) for normal and
non-registered (if you use registration) users respectively. Based on an idea
from Angel, EA7WA.
18Jan05=======================================================================
1. Added missing Spanish translation courtesy of Angel EA7WA.
2. Really incorporate latest cty.dat (11Dec04) as opposed to merely thinking 
I had (and still add 3X0Y as well).
3. fix ? all in non english language
4. Alias sh/st and sh/sta back to show/station from show/startup.
17Jan05=======================================================================
1. Added 3Y0X to Peter Island 3Y in cty.dat.
16Jan05=======================================================================
1. Added the changes to Canadian Prefixes so that usdbraw.gz from Charlie
K1XX's website (http://dxc.k1xx.com/download) dated after 1Jan05 will include
Canadian city and province data as well the existing US data.
2. Improve the apropos command to take better account of language and do
a better job of only showing english stuff for commands where there really is
no local language version.
15Jan05=======================================================================
1. knocked over a few possible ways of people annoying other people thru
the use of scripts
2. Fixed problem in DXCommandmode with an indirect call that did not work
in perl < 5.8.0.
3. Add Spanish translations of new scripting commands in help, from Angel 
EA7WA. 
13Jan05=======================================================================
1. Fixed prompting in languages other than English.
2. Fixed language problem with spoof, but that simply hides a whole can of
worms that I shall have to address later.
3. Added make clean to src Makefile (!!!)
12Jan05=======================================================================
1. Add $main::bumpexisting variable which allows a new connection for a user
call to disconnect an existing connection with the same call. The default for
this variable is 'true' (1). This means that existing behaviour has changed.
set/var $main::bumpexisting = 0 to return to original behaviour.
2. Remind a user every hour (as default) that they have new messages.
set/var $DXCommandmode::msgpolltime = 3*3600 to set it to 3 hours.
3. Allow some substitutions in set/prompt (call, date, time and
cluster call) and add dxspider just before the > as standard. 
4. Add $main::allowdxby variable so that sysops can switch off the 
'DX BY <othercall' command. It is set to 0 (ie disabled) by default. This
is for sysops who don't want to bump privilege to allow it. That still works
as before.
5. Fix the bug in 'dx by <call>' that causes only the first word of the 
comment to be recorded.
6. Fix bug counting backwards over a leap year in Julian.pm which meant that
sh/dxstats doesn't start at 'yesterday' anymore.
7. Added set/startup and show/startup commands to allow users and sysops
to create and display startup scripts. There is also an unset/startup to
remove a script.
27Dec04=======================================================================
1. add improved VE data from Charlie K1XX. You should update usdb as well.
22Dec04=======================================================================
1. Changed all the names of US prefixes to be prepended with their State code.
thus "Alaska-KL7" becomes "AK-Alaska-KL7". 
21Dec04=======================================================================
1. added AGW port no after an example by IW5DEZ.
2. modified links command to suggestions by Charlie K1XX.
3. added show/groups command to show recently used chat groups by Tommy 
SM3OSM.
4. fixed T8 / V6 ambiguity (at least basically).
20Dec04=======================================================================
1. updated create_prefix.pl to only use (supplied) wpxloc.raw and cty.dat
2. Added IG9, GM/S, 4U1V and some other detail changes to make it compatible
with cty.dat.
3. regenerated prefix_data.pl with updated wpxloc.raw and cty.dat 11Dec04.
17Dec04=======================================================================
1. add undocumented special command for VE7CC.
10Dec04=======================================================================
1. Included fixes sent in by David, N9KT for the new DB0SDX site.
2. removed redundant "rm *bys" and "rm *cys" from Spot::init().
09Dec04=======================================================================
1. fix show/mydx properly this time (and test the fix!)
2. fix the default in show/qrz
06Dec04=======================================================================
1. fix show/mydx if there is no defined spotfilter
07Oct04=======================================================================
1. added the ability for people to import chat from external programs.
create a directory called /spider/chat_import, make sure it is writable
by any applications that might dump stuff in there (chmod 1777 
/spider/chat_import on *nux). Put a file with a sensible name in there;
the first part of the name will be the chat group to whom the message will
be sent. So solar.txt.12325 = SOLAR. Announces can also be sent to local, all
and sysop (ie files whose name begins with those names). Each line in the
file becomes a chat line or an announce. See importwwv.pl for an example.
DO NOT USE importwwv.pl, I am already using it and if you do as well, people
will get duplicates which will ANNOY THEM!!! It is just an example.
23Aug04=======================================================================
1. add the start of an alternative routing engine (RouteDB)
20Aug04=======================================================================
1. Added new protocol specification to techdoc
17Aug04=======================================================================
1. change 'fo' alias in Aliases 
31Jul04=======================================================================
1. add a load of .cvsignore lines to reduce the updating noise
30Jul04=======================================================================
1. make sure that // is not converted to / in command lines.
28Jul04=======================================================================
1. backported 'Investigate' from NP branch so that only pingable nodes
are 'believed'.
2. added missing entries in Internet.pm for sh/contest
26Jul04=======================================================================
1. added extra variables to Internet.pm to allow the various internet query
commands to alter the url that they use. 
2. Added show/425 command from Leo, IZ5FSA.
05Jul04=======================================================================
1. fix rspfcheck on pc27
23Jun04=======================================================================
1. Add zone, by_zone, itu, by_itu, state and by_state searches to sh/dx
2. Update manuals for CVS and new commands
22Jun04=======================================================================
1. Add the show/mydx command which *may* filter your spots using your
spot filter.
17Jun04=======================================================================
1. alter processing of PC17 to see if they get distributed more than now.
14Jun04=======================================================================
1. fix previous fix of sh/dx
09Jan04=======================================================================
1. removed PC90 which was breaking various filtering things.
2. added realtime spot formats to sh/dx (at least in basic form), this is
activated by using either of the keywords 'real' of 'rt' on the command
line. Also added sh/fdx as an alias.
01Jan04=======================================================================
1. move position of USDB init to get rid of an obscure bug pointed out by
Charlie K1XX.
2. Remove redundant documentation.
31Dec03=======================================================================
1. alter remote database handling to 'new standard'.
30Dec03=======================================================================
1. updated website to make it clear(er) that it all works under Windows (like
wot Charlie said...).
2. made the changes to the German Messages that Thomas DL3SBB sent me a 
loooong time ago.
3. made 'dx by' require at least privilege 1.
29Dec03=======================================================================
1. updated dxoldtonew.pl so that it takes an AK1A DX.DAT file (argument on
command line or a default of /spider/data/DX.DAT and outputs the standard
DXSpider format spot files. Please be warned that if any of these files 
already exist, the data will be appended onto the end of the file. Please
make sure you have backups or at least be aware that this may give strange
results which may be 'out of order'.
24May03=======================================================================
1. Added more french translations from Robert (HB9BZA) and we now have some
french help as well (also from Robert). A splendid effort. Thank you.
16May03=======================================================================
1. Correct Windows section of the Addendum file! (g0vgs)
06May03=======================================================================
1. Add Portuguese language courtesy of David CT1DRB (set/lang pt)
2. Add French language courtesy of Robert HB9BZA (set/lang fr)
02Apr03=======================================================================
1. Fix some minor problems with the manuals (g0vgs)
01Apr03=======================================================================
1. Update filtering primer, changes by N3RD (g0vgs)
28Mar03=======================================================================
1. Added an excellent document on filtering to the manuals from Jim, W3BG
2. started to remove old documents (g0vgs)
27Mar03=======================================================================
1. play around with sh/reg, sh/iso, sh/node and sh/lock to make them work
slightly better with the new user format.
2. update manuals (g0vgs)
26Mar03=======================================================================
1. add some ak1a compatibility changes to chat
2. added help text for chat, join, leave and sh/chat.
18Mar03=======================================================================
1. minor corrections to manuals (g0vgs)
17Mar03=======================================================================
1. changed the regex determining what is a callsign to be more comprehensive.
I would suggest re-running create_qsl.pl and then restarting.
2. Fix chat so that output appears to users again and PC sentence conforms
to standard. Add kludge to remove rewritten chats if I see them.
3. Only send chat PCs to spider or AK1A boxes
12Mar03=======================================================================
1. added HC and QRZ.com to possible QSL locations, if you want to pick up
historical info (ie start again), run create_qsl.pl after update and restart
the node (which you will need to do anyway).
2. changed the dbcreate command so that you can say: 
   dbcreate dxqsl cmd show/dxqsl
which will allow local and remote users to execute commands as though they
are Databases. You can also include these databases in chains. What you do
with this, is ofcourse a moot question.   
3. Update manuals (g0vgs)
11Mar03=======================================================================
1. Changed the name of show/qsl to show/dxqsl.
2. Alter Commands_en.hlp to match new name and issue manual updates (g0vgs)
10Mar03=======================================================================
1. added show/qsl command. This command basically takes the normal output of
sh/dx qsl and stores it in a database. In order to enable this command you 
will require the Storable module to be loaded (you will already have done
this with a bit of luck for the new DXUser interface). The suggested 
procedure is (after the update) to run /spider/perl/create_qsl.pl (this may
take a long time), then immediately it finishes, restart the node. The node 
will then keep the database up to date automatically. If you are not 
interested in historical data then you can leave this step out.
2. added show/contest command from Tommy SM3OSM via Rene OZ1LQH.
08Mar03=======================================================================
1. Added chat, join, leave commands to allow general purpose conferencing
on arbitrary subjects. [Translators: added e34,e35,join,leave]. There is
currently no help. There is also sh/chat.
28Feb03=======================================================================
1. Charlie K1XX fixed the sh/iso, sh/reg and sh/node commands
25Feb03=======================================================================
1. backported switch processing for PC sentences
24Feb03=======================================================================
1. add the 'run' command and the 'privilege' command to allow sysops to 
create scripts for people.
2. fix show/user so that it doesn't moan about uninitialised variables
23Feb03=======================================================================
1. Added show/wm7d command (a US only callbook server) [by K1XX].
2. Added a prototype show/db0sdx command (w.i.p).
3. Added set/dxcq and set/dxitu zone commands [Translators: I have added
dxcqu, dxcqs, dxitus and dxituu to Messages].
4. Add new Commands to manuals (g0vgs)
5. make sure that none of the above set/dx... commands are defaulted on
22Feb03=======================================================================
1. changed qrz.com address 
2. added Charlie's [K1XX] new wpxloc.raw data stuff to get WA1, KC3 type 
callsigns to work better.
3. added in set/usstate command which prints any US state information 
available on both the spotted (LHS of time) and spotter (RHS of time).
[Translators: I have added usstates and usstateu to Messages].
4. Merged in the new (faster) DXUser.pm.

[NOTE] this version will require Storable to be installed. On the
other hand the code may work without, in a compatible way. This bit hasn't 
been very well tested (the 'no Storable' condition that is). 

[*** NOTE ***] make sure that you do an 'export_user' BEFORE restarting
you node. (Yes I know this is like a shrinkwrap licence, but I can't
help it).

It will take several minutes for the node to restart when it does the 
conversion from .v2 to .v3 user file. Please go and have a good strong cup
of tea whilst this is happening.

If it fails then you will need to edit your latest user_asc file on (or about)
line 25 it says: $ref = decode($f[1]); you will need to change that to 
$ref = asc_decode($f[1]); and then do: perl user_asc
 
DO MAKE SURE THAT you include subdirectories in your CVS update 

21Feb03=======================================================================
1. moved the export of the users file to Wednesday night (GMT) to avoid 
possible crashes and/or delays during a contest weekend.
14Feb03=======================================================================
1. some major changes to the structure of the manual documentation.  To bring
the manuals into line, they now have the language tag (like 
installation_en.html).  Hopefully someone will translate the manuals 
eventually :-) I have left the old files in CVS for now to allow
everyone to change any symlinks etc to the new filenames.  I will remove the
old files shortly, please update your links! (g0vgs)
2. docs makefile updated and commands2sgml.pl added from M0AZM.  This script
inserts the helpfiles automagically from Commands_en.hlp into the relevant
manuals. (g0vgs)
3. Commands_en.hlp adjusted slightly to ensure at least one space before
examples for the purposes of the above script. (g0vgs)
4. Amend index.html to the right document names. (g0vgs)
09Feb03=======================================================================
1. Correct some typos in the manuals and update perl modules etc.  Also
amend some help files to show correct syntax, around the 'clear' commands
swapping [input] and <callsign> in each case, translators please take note.
Thanks to Dave N3RD for info. (g0vgs)
2. update the addendum for latest build and include information on additional
modules required. (g0vgs)
20Jan03=======================================================================
1. changed sh/c so that, by default, it only shows the caller's country nodes
sh/c all will show the old style full list. "sh/c sk gb" will show the config
of all the GB and SK nodes.
2. changed sh/stat and sh/route for nodes
19Jan03=======================================================================
1. I have made a fundemental change to the way PC19s are dealt with as a 
result of the discussions on the mailing list. From now on, only nodes that
issue PC16s will have PC19s propagated. If they *ever* issue a PC16 then from
then on they are considered as being 'connected' and thus routable. No PC16
and you have no route. This should stop all passive links being routed. For
the few cases where you know that that is a very small node and it rarely has
users, then you can do a set/routepc19 <node> to enable PC19 propagation. In
the even more rare case of you wanting to prevent PC19s being routed thru 
your node, you can use unset/routepc19. THIS IS NOT A SUBSTITUTE FOR ROUTE
FILTERING!!!!! [translators: I have added wpc16s, wpc16u, wpc19s, wpc19u]

BTW the first time you connect again you will notice a separate PC19 go out
for each 'new' PC16 that the node sees. This is normal and will go away the
second time the system needs to issue a PC19.
2. Alter the export_user command to remove users that have no useful info
and have not been seen for more than (default) 1 year.
3. fix the problem of users on more than one node not being propagated
4. remove spaces and all non-US ascii characters from PC41 for the dup check.
5. put in check to see if the parent of a newly allowed PC19 is still there
(this needs further investigation).
17Jan03=======================================================================
1. Fix problem with lines being left in the main input queue for a 
disconnected/ing node.
14Jan03=======================================================================
1. Tidy up AUTOLOAD functions
2. Make sure that empty PC16s are not sent on startup to a node.
12Jan03=======================================================================
1. add Czech language courtesy of Milan OK1XH
06Jan03=======================================================================
1. add the latest changes to the spider-web java interface from Rene, OZ1LQH.
Please note that there is a change to the spider.cgi file this time so that
the client show 'Connected to Node_Call' instead of the hostname.  You will
need to update your cgi file when you update the changes.  Please make sure
that you back up your old files first! (g0vgs)
2. yet more changes to the java client from Rene :-)  Also added a makefile
and a Changes file for the client in the spider-web directory.
05Jan03=======================================================================
1. fix some irritating messages caused by protocol loops in sh/c
2. update copyright
3. move GN from GJ to GI
31Dec02=======================================================================
1. Update files in the java client with fixes and additions from Rene, OZ1LQH
05Dec02=======================================================================
1. Fix SSID issues with AGWMsg.
2. updated show/hftable, vhftable, hfstats, vhfstats and dxstats after K1XX
sent in some sample code indicated new functionality he requires. Translators
please note that the stat* messages have been changed and e33 added. I have 
also added quite a bit of extra examples and things to the relevant HELP
texts. It is now possible to search from any date for up to 365 days of data.
You can get the information by prefix or by callsign or for ALL spots. 
04Dec02=======================================================================
1. updated sh/log to allow searching for more arbitrary strings such as IP
addresses
08Nov02=======================================================================
1. update Keps.pm to reflect which satellites now come round in the weekly
updates. I suggest that you copy this file to /spider/local and do a load/kep
and you should lose all the 'old' satellites (eg MIR).
08Nov02=======================================================================
1. made some small mods to grepdbg and spot2csv.pl
2. fix a possible DOS in dx command
07Nov02=======================================================================
1. allow three digit longitudes
2. make a small change to see if messages now stay in place.
3. make keep actually stick over a reboot and take it fully into account for
deletions (translators: I added m18).
4. try not to delete new messages (even if this is an update that reads 'old'
messages with missing fields).
29Oct02=======================================================================
1. make sh/log et al a bit more efficient.
2. fix dupe message in dx.
3. update cty.dat to the latest, add k8T, K8O to KH8 and TX5BTY to FO/A
4. clear cache on reload of prefixes
25Oct02=======================================================================
1. remove the dupefile automatically if it becomes corrupted
2. instrument the startup slightly more
21Oct02=======================================================================
1. Fix msg aging.
2. make the default pinginterval and obscount variable (set/var 
$DXProt::pingint and $DXProt::obscount) 
20Oct02=======================================================================
1. remove dupe check on local sysop announces
2. fix format errors on sh/muf for 5.8.0
3. add new version of the administration manual that includes WinCVS with
thanks to K1XX (g0vgs).
17Oct02=======================================================================
1. added new Spanish files for help and Messages from Angel, EA7WA.
16Oct02=======================================================================
1. decrease the default max length of PC16/19 to around 180 characters to be
slightly friendlier to ARC, which seems to have a difficulty reconstructing
lines from multiple packets. Also make the value settable via set/var.
2. strip off blank spaces from the ends of lines of  command output.
15Oct02=======================================================================
1. made some detail changes to the raw USDB data and the routines that 
generate and operate on them. There were some bugs involving a few 'missing'
callsigns which been fixed. Also there were some, for our purposes, invalid
callsigns in the database which have been removed (down to about 820,000 
entries now). You should really update your database. 

The latest code now (conditionally; ie if you have it loaded it will use it)
support Compress::Zlib on both *nux and Windows. The suggested procedure 
is this:-

1. Download the corrected database from
   http://www.dxcluster.org/download/usdbraw.gz to somewhere like /tmp.
2. update from CVS.
3. Restart (on linux, just stop the node and *don't* restart on Windows).
4. remove /spider/data/usdb.v1
5. cd /spider/perl
6. (perl) create_usdb.pl /tmp/usdbraw.gz (or wherever you put it)
6a. If you don't have Compress::Zlib loaded then you will need to gunzip
    it manually and do: create_usdb.pl /tmp/usdbraw (not Windows :-)
7. on linux, in a console window do: load/usdb, on windows: restart the node. 
--
2. Added set/usdb command to add adding or changing of a callsign in the USDB
3. Stop dupe spots from the same spotter (with or without comment corruption)
14Oct02=======================================================================
1. added show/usdb command as a simple, direct interface to the information
available in the USDB stuff.
13Oct02=======================================================================
1. A large change has occurred. There is now some (optional) US state recog-
nition. This is in its early stages but appears to work for me. You will need
to :-

1. download the database at http://www.dxcluster.org/download/usdbraw.gz 
2. save it somewhere (/tmp, anywhere).
3. Decompress it using your favorite program (gunzip / winzip) [call it
   usdbraw if winzip]{BE WARNED, some browsers may decompress it on the
   fly for you, you can tell; if it is 5Mb it is compressed - 16Mb not}.
4. remove any /spider/data/user.v1 files lying around (at least for this
   first time.
5. cd /spider/perl
6. perl create_usdb.pl /tmp/usdbraw  (ie the UNCOMPRESSED file)
7. Wait, I suggest some cups of tea are in order.
8. Wait a bit more.

You don't need Compress::Zlib anymore, I assumed it was universal.

You will be able do this while the node is running somewhen. There is a 
planned method of keeping the US DB up to date with smaller (ie < 15Mb) patch
files once a week but you will have to wait a bit for the code to bed down 
first. You can filter on routes, spots and announces using 'call_state' or
'by_state' and a comma separated list of state codes. The HELP has been 
updated (which may help...). 

Once you have run the create_usdb.pl you will need to restart.

If you don't need this, then don't run create_usdb.pl it will simply be
a waste of time. The run-time version is 30Mb and has 840,000 odd entries
in it. This does not replace or supplant sh/qrz (sorry Charlie [who put me
up to this]). 

2. There are a number of other niff-naff changes which I hope will improve
rather than hinder your user experience (including check forward as well as
back for those speedy clocked dupes mentioned below).  
12Oct02=======================================================================
1. attempt to improve the "check back for 5 minutes to see if this spot is 
the same as a previous one but for the time spotted" dupe check.
2. improve the sh/vhftable and sh/hftable commands to allow you to enquire
by dxcc country (using the relevant prefixes or dxcc country numbers).
[note to translators, I have changed the help text and Messages tags for
stat*].
07Oct02=======================================================================
1. fix problem with (invalid) callsigns starting with '0' (zero) eg 0f6ira.
03Oct02=======================================================================
1. only sysop (priv=5+) can now send to distro SYSOP, ordinary users will have 
their message routed to the $main::myalias callsign as a private message. 
29Sep02=======================================================================
1. Added LRU caching to DXUsers and Prefix.
2. make Timer::handler only search its chain once a second seeing as that
is the minimum granularity available.
3. add some separation between cfg file making, data generation and mrtg 
running. See /spider/cmd/mrtg.pl for some instructions...
4. Added data in and out to the MRTG stats, you need to do an indexmaker
to get them onto the index page, I have also added some colour to the
legend to make what is being displayed a bit more obvious.

See http://gb7djk.dxcluster.org/mrtg/stats.html for an example of the
default screen.

28Sep02=======================================================================
1. Put some transparent caching into Prefix.pm to see if this has a 
performance impact.
2. Fix doing a new log open for every log file write.
26Sep02=======================================================================
1. added WWV and WCY to the Mrtg stats. Don't forget to do an indexmaker!
25Sep02=======================================================================
1. added mrtg stuff to the system as a template. In order to use this you
must install mrtg onto your system and copy all the mrtg files (or at least
all the images) to new directory /spider/html/mrtg. The system generates the
config file for you as part of its workings. To get it to update add a line
to your spider crontab like: 

00,05,10,15,20,25,30,35,40,45,50,55 * * * * run_cmd('mrtg all')

You will also need to do an indexmaker once in the html directory. I put the 
index page into /spider/html/mrtg/stats.html YMMV. I do:

indexmaker --output stats.html --columns=1 --title "MRTG statistics for 
GB7DJK" ../../mrtg/mrtg.cfg

But all on one line.
2. I have made a technical change to the way ax25 connects outward on unix 
boxes are done. I currently have no way of testing this. I think it still 
works.
22Sep02=======================================================================
1. Add changes to the installation manual for Windows users from K1XX
21Sep02=======================================================================
1. make some detail changes for connects out in Msg.pm
17Sep02=======================================================================
1. Added shu command for Charlie's (K1XX) benefit (together with the rest of
our butterfingered sysops) who miss the '/' out of sh/u frequently enough 
to curse. 'shu' simply types out a message saying 'type SHUT' to shutdown the
node. Added 'shu' to /spider/perl/Messages. No need to restart, just 
load/mess and load/alias after doing a CVS.
21Aug02=======================================================================
1. added 'warc' and 'contesthf' to the regions in bands.pl (K1XX).
20Aug02=======================================================================
1. fix lines containing just the character '0' in messages (and console.pl)
(K1XX).
2. remove all newline characters from AGW data, thus treating it like a 
'normal' ax25 connection where the 'newline' convention is just carriage
return (K1XX)
06Aug02=======================================================================
1. added 5.5Mhz band as '60m'.
29Jul02=======================================================================
1. Changed max R value in wcy to 500 from 300.
2. Got rid of warnings on startup using 5.8.0 
28Jul02=======================================================================
1. stick the invalid key deletes in an eval loop in export_user
18Jul02=======================================================================
1. Make additions and changes to manuals. (g0vgs)
16Jul02=======================================================================
1. Add changes to the spider-web java web client.  Thanks to Rene, OZ1LQH.  It
should now be easier to install and run for all systems. (g0vgs)
11Jul02=======================================================================
1. NP work has now started in ernest ([ed]who he?). You will need to download
Digest::SHA1 and any dependant packages to run this release. HOWEVER tempted
you are, please don't set/newprotocol on any nodes. It won't work.
http://www.cpan.org/modules/by-module/Digest/Digest-SHA1-2.01.tar.gz
2. Make the cluster node registered on from startup (from Mark HB9DBM).
3. Make the 'export_users' process *MUCH* more robust. It should now accept
funny characters and not rely on an absolutely 'perfect' user file to work.
Errors are displayed (and logged if done from the cluster) and then ignored.
Invalid callsigns are removed. 
09Jul02=======================================================================
1. make the is_qra more accurate (from Mark HB9DBM).
04Jul02=======================================================================
1. added another fix to Prefix.pm so that it resolves Japan callsigns again
also you can 'set/debug prefix' to see what it is trying to do.
03Jul02=======================================================================
1. Added the DEMONSTRATE command which allows a sysop to demonstrate a 
command to a user (from a request by Charlie K1XX). 
2. added message e31 (xxxx is not a user)
02Jul02=======================================================================
1. Fixed the problem with badspotter or badnode being set to baddx if either
of the data files are missing. 
25Jun02=======================================================================
1. as predicted there was an error in the Prefix routine, I have improved it.
24Jun02=======================================================================
1. make set/badspotter non SSID sensitive. Set/badnode is left to be SSID
sensitive. 
2. added 3XA(=3X) and K1B(=KH1) also changed the logic of sh/prefix. This
may break things, please test it. 
19Jun02=======================================================================
1. make set/badspotter and set/badnode apply to announces and talks as well
as spots. 
12Jun02=======================================================================
1. fixed (un)set/wwv and (un)set/wcy so they don't issue spurious messages.
Thanks Rene (oz1lqh)
07Jun02=======================================================================
1. fix messages in DXDb.pm to point to the correct ones. Thanks Rene (oz1lqh)
2. add missing wcys and wcyu messages to Messages. Thanks Rene (again)
3. upissue version number to 1.50 (finally)
16Apr02=======================================================================
1. allow the rest of PC19 to continue if it contains a reference to a locally
connected node. Thank you Tommy SM3OSM.
19Mar02=======================================================================
1. fix problems with ephemeral dup checking on PC16,17,19,21
2. perturb the problem with national character sets.
15Mar02=======================================================================
1. add help for 'accept' and 'reject'. (g0vgs)
2. adjustments to the manuals (g0vgs)
3. make changes to reflect the correct output of sh/sun and sh/moon based
on information from Steve, K9AN. (g0vgs)
23Feb02=======================================================================
1. remove old satellites from keps.
2. Add information on setting up the ax25 utils to the installation manual
(g0vgs)
19Feb02=======================================================================
1. move the PC11 dup check after the input filter
06Feb02=======================================================================
1. changes to manuals to (hopefully) improve documentation and alter my email
address (g0vgs)
02Feb02=======================================================================
1. changed sh/qrz to the latest incarnation of the command at qrz.com.
29Jan02=======================================================================
1. add VP8GEO to South Georgia
27Jan02=======================================================================
1. make save work in cron context
2. try to get the C client to handle closes on its standard input better
3. put some validation in cluster.pl to check that people have set it up 
handled.
4. fix the long callsign checking
22Jan02=======================================================================
1. limit spot dupe checking to first 12 characters
13Jan02=======================================================================
1. changed the backstop termination alarm routing in the C client so that
it flushes the input and output buffer and then commits suicide.
12Jan02=======================================================================
1. put setsockopts into eval block to allow some of them to fail
11Jan02=======================================================================
1. Make M$ TCP connx blocking again, sigh...
2. backed out ALL the M$ speedup and make nicer changes :-(
3. cope with data coming in during the disconnection process. Don't worry
Earth people, this will take no longer than 15 of your Earth seconds...
10Jan02=======================================================================
1. set SO_LINGER = 0 to try to prevent the system sending data on a closing
socket. This MAY help some of the hanging problems (but I am now beginning
to doubt this).
2. do the same on the C client (which means DON'T FORGET to make it).
3. set no nagling on the output from the node.
4. set KEEPALIVE on TCP connections for both the node and C Client (you will
have to make the C client again) and you will need to restart.
5. It appears that it IS possible to set non blocking on M$ you just need to
know how.
6. Fix problem with load/cmd_cache core dumping the system
08Jan02=======================================================================
1. altered sh/qrz to point to the new server
2. alter the character set handling a bit to make it better for spanish
06Jan02=======================================================================
1. fix leading space removal from messages input from the keyboard
2. make some mods to allow perl 5.7.2 to run
3. create $DXProt::eph_restime to allow variable slugging of ephemeral dups
4. create $DXProt::eph_info_restime to allow a long dupe time for these
5. create $DXProt::eph_pc34 to allow a short anti dupe slug for rcmd loops
6. Add a new sysop cmd 'save' which will save the output of any command (or
list of commands in "<cmd>") to a file.
7. Add a new command "echo" which echos its argument to the screen (useful
for titling in the save command above.
8. Increase interval between logins causing for/opernam to 60 days (from 30)
+ a random factor between 0 and 9.
9. Added Italian translation of Messages from Luca IT9ROT (thank you 
very much).
10. Added the /<cmd> feature (as in talk) to execute a cmd whilst typing a 
message, then enhanced it so that if you do //sh/dx (for instance) it will
put the result into the message (as well as show it to you).
11. Added the // feature to talk as well. 
02Jan02=======================================================================
1. updated the copyright dates
2. modernised and extended the Windows instructions a bit.
3. added a TODO file which is the list of things that I need to do. Please
badger me to put YOUR enhancement on this list. It will then get done.
31Dec01=======================================================================
1. Make a couple of changes to the Installation Manual and add a FAQ on msg
deletion. (g0vgs)
2. Fix unset/register so it works (g0vgs)
30Dec01=======================================================================
1. make PC21 coming from the channel's node call then treat it as a PC39 and
disconnect it.
2. Send the client a 'Z' command (shutdown) to see if this has any effect on
the hangs.
26Dec01=======================================================================
1. make some detail changes to help texts
2. Added 'all' to the Band's region table to allow 'acc/spot on all/cw'
23Dec01=======================================================================
1. allow sh/dx on 1000/4000 (or 1000-4000).
2. merge sh/dx and sh/dxcc commands (Alias sh/dxcc to sh/dx dxcc). You can
now do things like 'sh/dxcc oq2 by w dxcc'. 
20Dec01=======================================================================
1. Fix 'not' in filtering
2. alter default max spots to 100 and the no of WWV to 5
17Dec01=======================================================================
1. added new satellite stuff from Steve K9AN. Fixed upper/lower problem
in convkeps.pl.
2. enhanced load/keps to accept a message no. This will create a new keps
file from a msg (hopefully containing 2 Line Nasa keps) and then load - all
in one step. Added load/keps to the help files
3. Updated spanish Messages
4. Improve wcy command from Stephan DK8LV's input
5. Added set/prompt (and unset/prompt) command so that Stephan can fool some
external programs into thinking it is talking to clx.
15Dec01=======================================================================
1. added superfluous spaces back into PC73 for the benefit of clx
14Dec01=======================================================================
1. make Spanish in set/lang & Messages 'es' instead of 'sp'
2. added prototype WCY and WWV commands (for qualified users only)
3. Added Commands_es.hlp contributed by Angel EA7WA
12Dec01=======================================================================
1. added Commands_de.hlp contributed (in record time) by Stephan DK8LV.
2. fixed help command so it uses it!
11Dec01=======================================================================
1. make PC17 generation more unconditional
08Dec01=======================================================================
1. added unset/hops command
02Dec01=======================================================================
1. Fix spurious 'new message for you' messages if things are deleted but 
unread.
2. stop remote passive nodes (those with version numbers of 0000) from
poluting the nodes table. Maybe this will make things slightly more stable.
3. Take off rspf checks on announces and spots and allow the dupe filters
to take the strain.
4. Move the dupe checking AFTER the input filtering for announces and spots.
5. Changed the checking of PC19/21 that it doesn't alter the wrong node
6. Alter the storage of messages so that illegal characters are stored as '.' 
in an attempt to stop such messages from hanging.
26Nov01=======================================================================
1. Make changes to the installation manual to show making the client before
actually trying to use it!  Thanks to oz1lqh.  Also add a line for SuSE
distros on useradd.
22Nov01=======================================================================
1. finally fix DELETE = ^H = Backspace in console.pl
21Nov01=======================================================================
1. altered the PC16/17 generation slightly to see whether this cures Roland's
problem.
19Nov01=======================================================================
1. added Ducie Island to prefixes
17Nov01=======================================================================
1. updated the Java Web Interface from Ian, m0azm to allow passwords.  If
a user with no password enters anything, including null, it is happily
accepted and ignored.
2. added the German language to the Messages file from Stephan, dk8lv
14Nov01=======================================================================
1. make the number of characters of the dx comment dependant on the type of
connection. This should mean that 'legacy' user programs can cope.
2. move the handling of unprintable characters out of IntMsg
07Nov01=======================================================================
1. fix is_pctext so that it actually catches corrupt spots and announces.
2. fix console.pl so that you can type in '0' again
3. Fix problem with reply disappearing up its own bottom.
4. Added Steve's latest sh/moon stuff
06Nov01=======================================================================
1. fix read so that sysop reading doesn't increment the read counter for 
private mail not addressed to them.
2. fix console.pl to show blank lines more reliably.
3. fix msgs so that 2 R: lines are only stored on initial entry (not just
after forwarding).
04Nov01=======================================================================
1. Allow the user to equal the node in RSPF checks (this allows spots and 
stuff with the origin and spotter to be the same (although it is STRONGLY 
recommended that they are NOT!!! [hint hint]).
2. make the send command rather more sensitive to what is allowed. Basically
it will only allow TO addresses that are bull addresses (if not private) or
vaild callsigns (if private). Bull addresses are the ones in 
/spider/msg/forward.pl with a 'T' flag on them. If there is no forward 
file it will only allow 'ALL' and 'DX' as valid Bull TO addresses. You may
use commas as callsign separators if you like.  
02Nov01=======================================================================
1. fixed some Aliasing problems, but this whole area will have to be addressed
more comprehensively.
2. Changed talk logging so that it hopefully is more consistant and maybe even
useful.
3. Altered the mechanism of the personal emailing so that it uses lower level
components and should be therefore available on M$ platforms. You will need
to install a version of libnet (perl -MCPAN -eshell, then install Net::SMTP).
I believe all 5.6.x perls have this built in (ie M$ should have this). If you
are on M$ or you want to use an MTA via SMTP in linux then you need to declare
the dns name of the MTA by: set/var $DXMsg::email_server = 'post.fred.net' 
(or whatever the MTA is called). You can also use local programs other than
sendmail by: set/var $DXMsg::email_prog = '/usr/bin/postfix ..' or whatever.
Finally you can alter the 'from' address using: set/var $DXMsg::email_from
= 'FBloggs@msn.com' (\@ if you use " and ") - bewarned that you may be 
prevented from using just any old address. You can place these commands in
/spider/scripts/startup for permanent use.
01Nov01=======================================================================
1. added information on registration, login scripts and passwords to the
26Oct01=======================================================================
1. If $main::reqreg = 1 then set/register will allow 'registered' users 
full access, if $main::reqreg = 2 then registered users will be 'read-only'
(ie the opposite). If $main::reqreg = 0 then registration and its effects
are disabled.
25Oct01=======================================================================
1. added unset/password command to allow sysops (only) to completely delete
and remove a user's password.
2. make 'read' increment the 'no of times read' for all messages.
3. give a read receipt for everybody that reads a message so marked.
4. enhance set/email so that if you set email address(es) with this command
it will send any messages to your callsign as they come in. unset/email
will disable forwarding. 
24Oct01=======================================================================
1. added (un)set/register, show/registered commands which when a 'set/var
$main::reqreg = 1' is done in the startup script will require users to 
be 'registered' in order for them to have 'write' access to the node. Non-
registered users will only be allowed to TALK or SEND PRIVATE to the cluster
sysop callsign.
2. Added password interrogation to the ExtMsg connections. If a user comes
in via telnet and this is being done with the internal listener and a pass-
word has been set for that user - he will be asked for it. You can force 
a password interrogation (for ALL users) with a 'set/var $main::passwdreq = 1'
in the node's startup script. It is anticipated that if you are using
registration you will also issue passwords to those registered users.
3. set/password has been changed so that users already with passwords can 
change them.   
4. A non-registered user will get the /spider/data/motd_nor file instead of
the motd on login.
5. made the BadWord regexes slightly less aggressive WARNING this may let
some constructions thru, but hopefully will also allow more legitimate 
foreign (mainly) things thru as well. 
19Oct01=======================================================================
1. Allow DELETE (0x7f) for backspace in console.pl
2. redo prefix table using latest cty.dat
14Oct01=======================================================================
1. Add the shortform SH/ST like display to sh/user <call> to make it more
AK1A compatible (G0RDI+G4PDQ pace).
12Oct01=======================================================================
1. make del nnn delete messages again (fix system Aliases file)
2. substr the subject so that the dup works for stuff coming back via AK1A
09Oct01=======================================================================
1. change Aliases to allow shutdown as a command again. If you have changed
/spider/cmd/Aliases and you update from CVS you may find it better to remove
this file and then do another 'cvs update'. Otherwise you may get conflicts
and the Aliase file will not load properly. The cvs update will recreate 
the (now) missing file.
2. Remove the 'please don't use XXXX on here' messages to prevent people
from exploring the 'bad words space'. Three bad words will still disconnect
without warning. 
3. Sending dx spots/announces with bad words will succeed - but only back to
the sender. These two mods are designed to annoy the perpitrators of the
sort of filth as much as possible whilst not inconveniencing 'normal' users.
4. Add expunge feature to kill. Deleting messages now marks a msg for 
deletion two days hence. To have the old behaviour, do a 'kill exp' or use
the standard alias "expunge". This will cause the message to be deleted at
the next queue message cycle.
5. Put in prototype echo handling for direct connections using ExtMsg and
Listeners.pm.
6. fix msgs to g1tlh-2 (as opposed to g1tlh)
04Oct01=======================================================================
1. allow a residence time of (default) 2 days before actually deleting a msg.
2. reduce the number R: lines on a bull from a bbs to 2 (the origin and the
last port of call).
3. ignore deleted messages for queuing purposes
4. store deleted status across restarts!
5. make callsign checking more rigorous
6. dup check PC49 (kill full)
7. improved the regex matching of badwords (more efficient, better coverage)
8. added default badword and badw_regex tables (as .issue files) which will
activate unless there is one there already. It will NOT overwrite an existing
file - so if you change it your changes will remain intact.
03Oct01=======================================================================
1. don't allow @WWW to become a 'TO' field...
2. handle @gb7tlh.#35.eu type addresses as well
02Oct01=======================================================================
1. fixed the 'ever lengthening msg' syndrome and probably made the whole
thing more reliable at the same time.
2. do some restructuring of the msg system and upissue the version no.
3. fix @xxxx syntax for bbs input
01Oct01=======================================================================
1. made login info not the default
2. change the looping protoection for PC16/17/19/21 and also be more rigorous
in who we accept which PC16/17/21's from.
3. fix MAJOR disconnect bug introduced accidentally in the NP work.
4. Try each badword with an S on the end as well and also check for 'f.u   c'
type things as well (this only works for a few wellknown english ones).
5. Go back to the old way of caching commands (but without the silly warnings
because I know better what I am doing now). This allows symbolic debugging
of commands again without coredumps. Hurrah!
6. Add badword handling for messages. Users will get rude messages back if
they try to send naughty words in msgs. Incoming messages with badwords will
be dropped on receipt and their contents logged.
7. and if you swear 3 or more times you are unceremoniously logged out.
30Sep01=======================================================================
1. made some small bug fixes in rspf checking and also messages. 
23Sep01=======================================================================
1. I have incorporated Steve's (K9AN) lastest sh/sun and sh/moon stuff which
copes much better with some of the end effects that occur in these calc-
ulations. You can now also see up to a year into the past or future. The 
results compare favourably with the US Naval Obs (unlike certain other
software's output which "I would not want to use their results to aim my 
moon rocket..."). It also fixes some ambiguity about which day the results
are actually for.
21Sep01=======================================================================
1. fix set/lockout so that it is possible to lock out all SSIDs except those
specifically unlocked and so that you don't need to lock the non-SSID call in
order to lock an SSID call. So set/lock g1tlh will lock out all instances of
g1tlh, g1tlh-1, g1tlh-15 etc except (for instance) unset/lock g1tlh-9.
2. show/lock allows partial callsign matching so sh/lock gb7 will only show
GB7* calls that are locked.
3. Had a grand shift around for the start of NP.
19Sep01=======================================================================
1. put in some rudimentory rsfp checking for various things
2. tried to do some fixes on console.pl - YOU WILL REQUIRE Curses 1.06 from
CPAN (perl -MCPAN -eshell, then at cpan> install Curses). 
17Sep01=======================================================================
1. Fixed help and apropos commands so that they default to english if
the language is not english and help in the 'not english' language isn't
available.
2. added some help text for sh/newc.
15Sep01=======================================================================
1. released 1.48
2. found 1st bug, fixed unset/logininfo reseting itself after logout 
14Sep01=======================================================================
1. added the start of script files on login/startup. You can now add 
commands (for example to set variables) to a file called 
/spider/scripts/startup. You can also put in scripts for a callsign which
will be executed when that callsign logs on. A sample script is in the
directory (you did remember to do cvs update -d?). User settable versions
of this will happen when the general mechanism for doing that is available.
2. Added set/unset/anntalk commands. If you unset/anntalk then you will
no longer see many of the of talk like announces. Unfortunately you may
miss the odd useful one as well (but since everything is repeated many times
you probably won't :-)
3. centralise the invalid callsign check so that g1tlh1 and similar calls
will not be allowed to login anymore.
4. Fiddle with the lockout mechanism so that set/login g1tlh also locks out
g1tlh-1 -> g1tlh-15 UNLESS one of these is specifically unlocked.
5. Make sh/log only show stuff that sh/ann, sh/talk, sh/rcmd doesn't.
6. Make the scripts look for user and node_default files if there isn't a 
more specific one.
7. add the blank command which prints nn blank lines (default 1), this cmd
can also print lines of characters: see help for examples.
13Sep01=======================================================================
1. did some work on making talk more intelligent and fixed a>b problem.
2. fixed a nasty problem on input when being hit with full buffers of 
data (eg at init time with large lists of node/users on fast links).
3. fixed realtime input filter changing.
4. added announce->talk conversion for routable calls when announces of the
form 'to g1tlh hello', 't g1tlh hello'  or 'g1tlh hello' appear. 
This also suppresses similar announces for users whose callsign is not the 
one in the announce.
5. Change the badwords interface to be the same as baddx, badspotter et al.
added set/badword, unset/badword and show/badword. This routine will auto
convert (and delete afterwards) the old badwords file. 
6. fix intermittant bullitin mail forwarding?
11Sep01=======================================================================
1. added IP address logging of connections
10Sep01=======================================================================
1. clear/* node_default and user_default now work.
2. in acc or rej/* you can now use (comma separated) prefixes as well as lists
of numbers for things like *_dxcc, *_itu and *_cq (eg: by_dxcc ve,w); just
remember that countries like ve and w have lots of zones and itus!
3. Added all the clear/* commands to help and added some comments about 2.
4. All filters (including *_default ones) are now reinstalled on channels in
realtime, so changing a filter does NOT require a disconnect and reconnect
cycle anymore. 
09Sep01=======================================================================
1. Add show/dxstats command
2. Add show/hfstats command
3. Add show/vhfstats command
4. Add show/hftable command
5. Add show/vhftable command (BE WARNED, the first time you run one of these
commands it will take some considerable time to complete, thereafter it will
be a lot faster).
08Sep01=======================================================================
1. Update the sgml docs on filtering a bit.
06Sep01=======================================================================
1. prevent nodes appearing as users from incoming PC16s
2. Change ping averaging to be like TCP and become a smoothed RTT.
3. Make all the Prompts in stat/* like output appear in alphebetical order
4. Fix problem with 17m spots not appearing in sh/dx
5. pump up eph dups everytime they re-occur and increase life to 180 secs
04Sep01=======================================================================
1. add delete/user command
03Sep01=======================================================================
1. make spot dups look back 5 mins.
2. strip the top off each character in any text field of a Spot for duping.
3. Try to make the routing tables more accurate for users that login to
more than one node.
4. Make PC50s come out in one heap on all channels every 14 mins, instead of
on the 14th minute in the connection time for each channel. This should 
reduce (slightly) the dups that are dumped.
5. Speed up input queue processing (a lot).
6. make set/isolate and acc/route mutually exclusive (and issue appropriate
error messages) and fix set/iso on PC18 input.
7. Improve stat/route_node and stat/route_user for diagnostics.
8. strip top bit of comments in ann/spots.
9. fix the announce filtering problem.
10. Fix the double announcement of node disconnections?
01Sep01=======================================================================
1. Change build number calc (hopefully for the last time)
27Aug01=======================================================================
1. make rej/wwv and rej/wcy work
26Aug01=======================================================================
1. make all newly learned nodes locked out by default.
2. add lock_nodes.pl which locks out all the nodes in the user file whose
privilege is 1 or less and which isn't mentioned as an argument to the 
command on the command line.
3. make set/node, set/spider and their friends unlock a node as well as make
them one. 
4. Make sh/log et al more efficient / less memory hungry (and the display
the correct way round!)
24Aug01=======================================================================
1. Allow badmsg to reject on interface callsign ('I')
20Aug01=======================================================================
1. protect against PC41s with field[3] == field[2]
2. Redo Julian stuff as proper objects
3. Make the various Log display come out forwards instead of backwards
4. Add the dbgclean routine to system cron to clear out all debug files 
more then 10 days old.
19Aug01=======================================================================
1. Fix rcmds
2. make isolation when there are no filters present work again?
3. dup check PC16/17/19/21 !
17Aug01=======================================================================
1. Sort out PC41 handling to include type 5 records for QRA locators and also
remove all filtering (but retain ephemeral dup checking).
2. Improve format checking in latlong and qra locators.
3. Sort sh/st so that sh/st by itself displays only the local call not the
whole lot (all 17000+ users records in my case). SH/ST ALL does this.
16Aug01=======================================================================
1. send a forward/opernam for a logged in user once a month (when they next
login).
2. rearrange rcmd stuff to be more maintainable and also be certain that 
they are translated in both directions correctly for clx and ak1a style.
3. Allow PC41s to be propagated and hope that the ephemeral dup filters 
do their job!
15Aug01=======================================================================
1. fix problem with talks not coming out anymore
13Aug01=======================================================================
1. fixed problem of dxspots not being echoed back to spotter (announces too)
02Aug01=======================================================================
1. correct manual and help references on accept/route and reject/route. Thanks
to ea1dav for pointing out the errors
2. make sure that the actual line is printed in grepdbg & watchdbg esp. with
ALL the '^' and leading space characters as they really are
30Jul01=======================================================================
1. changes to manuals to add links etc. (g0vgs)
23Jul01=======================================================================
1. made ann,dx spots,wwv,wcy,wx more 'object oriented'.
2. allow for 'enhanced clients' and tell them what sort of thing is being 
sent.
3. Allow debug info to be sent via interface to an enhanced client.
21Jul01=======================================================================
1. started a gtkconsole program. It appears to sort of work. Requires Gtk-
Perl-0.7007.
2. start doing some spot statistical stuff. 
19Jul01=======================================================================
1. changes to Admin Manual to reflect route filtering.  Some alterations to
the help files (g0vgs)
09Jul01=======================================================================
1. fix cron so that it allows stuff to be executed on the hour (ie min=0)
06Jul01=======================================================================
1. fix talk and routing problems to mycall
2. add unset/privilege command to relinquish any sysop privileges you might 
have for the current session.
05Jul01=======================================================================
1. disconnect channels whose route node has disappeared
29Jun01=======================================================================
1. fix merge command
28Jun01=======================================================================
1. fix problems with users on more than one node
27Jun01=======================================================================
1. try adding an ARC mail hack
2. slug the not here messages so they can't loopback
25Jun01=======================================================================
1. added automatic 'not here' message
21Jun01=======================================================================
1. fix (some) problems with 'init'
2. fix stat/msg a bit more
3. small change to PC28 generation to make sure that the subject always 
contains at least a blank
16Jun01=======================================================================
1. fix talk
2. fix stat/msg 
14Jun01=======================================================================
1. changed debug api to (potentially) use less cpu time
2. changed the spider.cgi in Arnold's borrowed java client to Ian's perl 
script
3. Added input route filtering
4. put back the set/isolate logic into routing which is now overridable with
filters whcih means a default filter is no longer generated. If you want the
OLD behaviour, do rm /spider/filter/route/*.pl*, restart and try again. 
5. Add http_proxy to Internet.pm and allow sh/qrz to use an HTTP Proxy
13Jun01=======================================================================
1. fix init cnd rinit cmds
2. add missing clear/route cmd
10Jun01=======================================================================
1. fix set/here and unset/here
2. fix indirect routing to users two hops away
09Jun01=======================================================================
1. more fixes
2. add set/debug filter so that you can see why your filters aren't working
(for sysops only)
3. add ephemera deduping for all those PC41,24,50 etc etc broadcasts 
4. Fix a problem with the connect text being sent on outgoing connections
(this confuses db0fhf amongst other things)
5. catch deep recursion bugs before you run out of memory.
6. Make sure that PC16|17|19|21 update as well as add and delete
7. local announces by the sysop will always be displayed
08Jun01=======================================================================
1. first cut with new routing code. Created NEW_ROUTE branch
2. added acc/route and rej/route commands
3. added stat/route_node and stat/route_user commands to look at the routing
table entities
07Jun01=======================================================================
1. move userconfig.pl and nodeconfig.pl to stat/
2. fix problem with locally connected users not being removed from the 
routing tables
3. Fix the build calc to take into account subdirectories
06Jun01=======================================================================
1. add stat/route_node and stat/route_user commands
2. add sh/userconfig command (to show backward links to nodes)
3. add sh/nodeconfig command
05Jun01=======================================================================
1. add set/bbs command
2. more work on Routing code.
3. status/msg on its own will print the status of the msg system.
4. add sh/newconfig command
03Jun01=======================================================================
1. Fix the problem with ExtMsg and unresolvable IP addresses, hopefully
properly this time.
15May01=======================================================================
1. set/lockout now prevents any outgoing connection taking place.
2. Started the new routing stuff which will run in parallel for a while.
3. changed the msg timeout arrangements so that it might not get stuck so
easily.
4. add $DXMsg::bulltopriv global to make msgs to known callsigns private 
14May01=======================================================================
1. fix problem with re-reading in db definitions for remote databases.
2. try to prevent situations where two can (semi) successfully login, probably
under load, and get a 'tried to connect whilst already connected' abort.
3. change the max number of days to search for spots to 100
11May01=======================================================================
1. allow stat/msg on priv 1
07May01=======================================================================
1. set/page 0 switches off paging
03May01=======================================================================
1. It appears that for ages now, not enough PC19 and PC16s are being sent
if you have more than one of them. Sigh..
02May01=======================================================================
1. put an upper limit on the number of concurrent errors allowed in command
mode (20). This should disconnect runaway spot suckers....
28Apr01=======================================================================
1. fix an occasional problem with 'sorry connected to' messages
23Apr01=======================================================================
1. fix very long standing bug in storing and transmitting spots. The decimal
point was left off :-(
22Apr01=======================================================================
1. Sysops can now have full privileges if there is a ExtMsg listener on 
localhost (or everything) and they telnet to localhost and login with their
callsign. This means that they don't need a client anymore (for local access)
2. added input spot filtering. 
3. Added run_cmd to DXCron which allows you to run any command on the system
from the crontab. (Dunno why I didn't do this before). 
18Apr01=======================================================================
1. added Ian M0AZM's Java Client (SpiderConsole)
17Apr01=======================================================================
1. made a slight speedup on write in Msg.pm (about doubled it)
16Apr01=======================================================================
1. make the correct error messages come out on reject/accept when people
leave out keywords like 'on'.
2. Fairly major changes to the documentation tree.  Split the admin manual
into 2 sections, Installation and Admin and merge the Windows stuff.
15Apr01=======================================================================
1. made some mods to the sgml documentation for 1.47
2. added show/connect command
11Apr01=======================================================================
1. fixed more of the "xxx disappeared from yyy" messages
2. altered the build no logic so that it always checksums the same files
regardless of whatever else you might have in the directory.
3. made shortcut at shutdown so that you don't get a storm of PC21s on busy
nodes as each connection goes down. Just send a pc39 to each interface and
nothing else.
4. changed action of SIG{INT} and SIG{TERM} so that they now work on MSWin32
10Apr01=======================================================================
1. altered PC21 logic somewhat to eliminate dup PC21s
2. disconnect should remove dangling local users in the routing table.
3. fixed nasty recursive timer bug
4. added some extra info to make connect tracking a bit easier.
5. improved docs on connect scripts a bit (to include agw connects)
09Apr01=======================================================================
1. changed lockfile name to cluster.lck (from .lock) for MSWin's benefit
08Apr01=======================================================================
1. added a quick installation guide to the admin manual and removed references
to client.pl (g0vgs)
01Apr01=======================================================================
1. changed agwrestart semantics. You need to use main::agwrestart() in your
crontabs rather than AGWMsg::init();
2. try to thread winclient.pl for MSWin32.
31Mar01=======================================================================
1. added agwrestart command
2. add Iains Windoze installation manual (g0vgs)
3. various alterations to adminmanual and initial version of the CVS changes
file (g0vgs)
30Mar01=======================================================================
1. fix errors on accept in ExtMsg and in Msg
2. fix the non-blocking problems of connects (and other things in general).
non-blocking only works for unix implementations at the moment.
3. add rinit command (sends a PC20)
4. improve debuging so that stuff is always escaped and a new 'raw' debug 
mode that shows everything sent and received in glorious hex and characters
29Mar01=======================================================================
1. add better tracking of AGW circuits (possibly)
2. add set and unset/agwmonitor (ing) [for all the notice it seems to take]
28Mar01=======================================================================
1. AGW engine stuff now accepts incoming calls and at least attempts to do
outgoing ones. YMMV.
2. fixed 'always' telnet on a client line in a connect script
27Mar01=======================================================================
1. add first cut at an AGW Engine. Copy /spider/perl/AGWConnect.pm to 
/spider/local and edit it appropriately. You shouldn't need a login and passwd
if you are using the default setup. It may allow incoming connects (and then
again it may not - I don't have a reliable infrostructure to test with at the
moment). The AGW Engine is a M$ thingy, but that don't preclude you connecting
to it from a unix box. 
22Mar01=======================================================================
1. edit the helpfile for set/debug and add help for show/debug
2. Allow ^Z again on messages
3. Added back onboard support for ax25 OUTBOUND connections. You will need
exactly the same facilities as before (ie netrom_call, ax25_call suid root 
etc) but it is called direct from the cluster.pl - client.pl is DEAD!
19Mar01=======================================================================
1. Add 'not allowed' messages into sh/filter with callsign and reduce priv
2. decode %xx characters in winclient.pl
necessary to 1.
18Mar01=======================================================================
1. minor changes to user and admin manuals.  Added revsion numbers
17Mar01=======================================================================
1. put block check back in, try a work around for EWOULDBLOCK/EINPROGRESS
for M$. 
16Mar01=======================================================================
1. integrate build number into main cluster and change the PC18 to show 
version and build in the text portion
14Mar01=======================================================================
1. first cut at outgoing ax25 /external program connects
2. slight change of interface to connect
3. added a build number to sh/version
13Mar01=======================================================================
1. implemented first cut at non blocking connect
2. removed memory leakage in connects
3. add link IP address if available on who
4. made the \r\n work correctly on External connections
5. removed client.pl
6. fixed memory leakages in DXMsg
7. fixed pc39/21 handling
8. fixed routing table issues and general disconnection tidy up
10Mar01=======================================================================
1. minor changes to the admin manual to reflect differences in distibutions
thanks to pa3ezl (g0vgs)
2. add (finally) the first draft of the usermanual (g0vgs)
05Mar01=======================================================================
1. do some major surgery on the connect logic to shorten the possibility of 
duplicate connects happening
2. fix stupid error on sh/qrz queries that don't work
04Mar01=======================================================================
1. allow fallback to english for help
03Mar01=======================================================================
1. allow incoming and outgoing IP connects direct to cluster.pl
2. fixed (long standing)a hole in PC17 handling
3. added winclient.pl (actually just a very basic client) from Iain G0RDI
4. Added Spanish as a language (thanks ea1dav) (g0vgs) 
5. ignore BUST(ED) spots
28Feb01=======================================================================
1. allow sh/c gb7 (ie show the config of all gb7 nodes)(for example)
2. get rid of spurious DXHash 'uninitialised' messages if no corresponding 
file is present.
3. changed policy of $censorpc in DXProt.pm so that badwords are looked for
in all text announces etc.
4. Unpad (remove excess spaces from) spotted callsigns in PC11. 
5. test for opertaing system in various places and do different if M$
27Feb01=======================================================================
1. allow partial node callsigns on sh/c (eg sh/c gb7)
2. Changed Msg.pm to allow a more generalised interface with more than one
listener.
3. Added IntMsg.pm to implement the internal connection management that is
currently scattered about the cluster code.
25Feb01=======================================================================
1. Fixed watchdbg so that simple arguments work again
22Feb01=======================================================================
1. Added platform name to sh/version
2. changed client.pl so that it send \r\n instead of \n on telnet connects
3. added lineend '\r\n' command to connect scripts so you can override 
defaults
03Feb01=======================================================================
1. Changes and additions to the manual and added a help file for sh/log (g0vgs)
13Jan01=======================================================================
1. Documentation alterations to match new commands etc (g0vgs)
08Jan01=======================================================================
1. Changed the way that badnodes, baddx etc work. There is a new general way
implemented (dunno why I didn't do this before - hey ho...) as a consequence
there are set/unset/show baddx (for bad dx callsigns) badnode (for dx from
bad nodes) badspotter (for bad spotters of dx eg VE2STN). Expect more of 
this sort of thing...
2. Added one to the copyright dates...
06Jan01=======================================================================
1. Fix set/obscount so it actually works.
2. Allow different number formats for set/pingint eg: 5m for 5 minutes and
120s for 120 seconds (and 1h for 1 hour).
03Jan01=======================================================================
1. Added a txt directory for txt versions of manuals (g0vgs)
2. Various documentation changes
02Jan01=======================================================================
1. added a help file for forward/latlong and updated the admin manual to
match. (g0vgs)
2. Add spot2csv.pl to convert spot files into tab delimited .csv format.
3. Add show/route to see which interface a station is connected on.
31Dec00=======================================================================
1. add lat/long info to show/prefix
30Dec00=======================================================================
1. added latest version of the admin manual from Ian G0VGS.
23Dec00=======================================================================
1. don't route anything back down the channel it came from.
2. and, in the process, fix some silly errors in routing converted rcmd PCs
3. changed all occurrances of 'freq' in filter help to 'on' and corrected
some errors (eg freq/ssb).
4. added latest admin manual.
18Dec00=======================================================================
1. fix double printing of DB results
2. add new style filtering for WWV and WCY to complete the set
3. got the field nos right (hopefully) on Announces for filters
05Dec00=======================================================================
1. fix frequency hinting routine so it correctly handles things like 'on 23cm'
where digits are the 'wrong' way round.
2. made default max days to search for spots 3 months.
3. added hex decodes for those pesky 'national' characters that aren't really
in grepdbg and watchdbg.
4. decide that we are using Latin-1 and therefore characters 0x80-0x9f are
not allowed.
5. fix the announces so that they are all UPPER CASE for poor old DXTelnet.
03Dec00=======================================================================
1. change grepdbg and watchdbg so that you can see a number of lines before
the condx that you are looking for so:-
  grepdbg 3 LOOP
  watchdbg 3 LOOP 
will show both the LOOP line and the preceeding 2 lines.
2. add PCPROT to all error condx lines in DXProt.pm so that you can watch
for them more easily.
30Nov00=======================================================================
1. remove %nn strings from dups of announces and spots
2. remove check for ssids on PC41s 
29Nov00=======================================================================
1. make some small changes to DXmsg to try to track delete problems?
2. fix ann/full so it doesn't dup
27Nov00=======================================================================
1. alter sh/wcy output slightly
26Nov00=======================================================================
1. made it possible for sysop calls to be used on other nodes and still have
anti loop checking on PC16/17.
25Nov00=======================================================================
1. -l <nnn> now works on C client
2. -e toggles echo cancelling (normally on) on C client
20Nov00=======================================================================
1. added even more checking to PC16,17 and 39
19Nov00=======================================================================
1. improve reaping code a bit more.
2. put some extra checking in the PC16,17,19,21 code.
3. fix problem with the aliased user disappearing and loads of 'unitialised'
messages coming out.
16Nov00=======================================================================
1. Alter the process reaping code in cluster.pl to use waitpid
12Nov00=======================================================================
1. Fix lack 't' action in Filter.pm
08Nov00=======================================================================
1. fix cosmetic errors in for/oper for 'users'.
07Nov00=======================================================================
1. removed sh/call because the owner isn't happy about us using it. 
2. change sh/qrz to the new interface. MUCH QUICKER! you will need a user id
and password from qrz.com to use it and you will have to copy the 
/spider/perl/Internet.pm to /spider/local and alter it accordingly. Do 
remember to set $allow=1 as well! The new interface comes courtesy of Fred
LLoyd, the proprietor of http://www.qrz.com
06Nov00=======================================================================
1. Added sh/qrz to the list of callbook services
05Nov00=======================================================================
1. 75% speed up on sh/dx !, lower memory usage as well!
2. Fixed problem with clear/spot 0 (how did this one last so long!!!)
3. add 'on' in accept/reject spots as synonym for 'freq'
4. add the same speed up to general log printing
5. fixed help \ 
04Nov00=======================================================================
1. fix sh/filter so ity now works for any callsign (and not just connected
ones).
2. Have only one is_callsign and not an iscallsign as well.
3. Add set/hops and show/hops commands.
4. Add unset/badnode command and put some help in for these commands
03Nov00=======================================================================
1. allow - in filter strings
2. store only the filter expression NOTE BENE: you will need to clear all 
your existing filters and re-enter them!!!!!!
3. Added announce filtering
4. Fixed problem with announce filtering on output to the node
02Nov00=======================================================================
1. updated filtering logic. You will need to RECREATE your filters (clear/spot
all, then start again) for testing.
2. allow PC73 for DXNet
3. added some help text for filtering and filtering spots in particular.
01Nov00=======================================================================
1. put PC11 field 2 check back to m for pc text.
2. improve 'simple' callsign checking
3. Added the first cut of the new user/sysop filtering code. This cut works 
for spots and the syntax is:-

accept/spots [<call>] [input] [<filterno>] things ..
reject/spots [<call>] [input] [<filterno>] things ..

where things are: 
  freq 0/30000 | hf | hf/cw | 6m,4m,2m
  call G,PA,HB9
  info iota
  by G,PA,HB9
  call_dxcc 61,62
  call_itu 31
  call_zone 14,15,16
  by_dxcc 61,62
  by_itu 31
  by_zone 14,15,16
  origin GB7,MB7
  channel GB7DJK,GB7BAA
      
You can simply string these together on one line one after the other and 
there is an implied 'and', you can also string together with 'or' 'not' (or
'!') and '(' and ')' - in otherwords an arbitrary expression.
              
You can see what you have done with:

show/filter [<call>]

You can clear your work with:

clear/spots [<call>] [input] [<filterno>|all]

Have fun and someone please write the documentation.
4. Added show/msg_status.pl sysop command (shows some info on what is busy in 
the message system)
31Oct00=======================================================================
1. add 0x8e to the list of characters we clobber (make xterm go into graphics
mode).
30Oct00=======================================================================
1. put in new Filter::it code and tested it. Now all we have to do is write
the user access routines (oh and the help files!).
29Oct00=======================================================================
1. put in echo cancelling measures into the clients. This doesn't mean you
shouldn't take steps to prevent echoing on node links, but it may help where
(whatever you do) it still bloody echos! This is experimental.
2. store dxchan and mynode as callsigns (and not references) in the routing 
tables and do some checking in accessors to see if we can capture some errors.
3. tart up the stat/chan etc display to give more useful debugging info 
28Oct00=======================================================================
1. updated show/sun and show/moon from stuff sent by Steve Franke K9AN
2. added show/call which queries jeifer.pineknot.com for any call in the 
world (as opposed to UALR which only does US calls). Inspired by a bit of 
perl sent to me by Steve Franke (again!) and also Angel EA7WA who gave me the
pineknot ip address.
3. fixed clients so that they accept -0 as a valid SSID and then strip it off
as though they had come in without (why has this taken so long to appear? How
long have we been running this code ??????). 
27Oct00=======================================================================
1. alter the code in clean_old of DXMsg system to see if we get some different
behaviour with random crashing
26Oct00=======================================================================
1. if there is a 'connected' file in /spider/data then the client will send
it out to the user after connection.
25Oct00=======================================================================
1. fix catchup and uncatchup commands so that they accept ranges
24Oct00=======================================================================
1. added cty.dat from http://www.k1ea.com/cty/index.htm to the prefix_data.pl
data file and modified create_prefix.pl accordingly.
2. the 'no text line' messages should now propagate correctly
3. added the dxcc, itu and cq zone numbers for announcer and origining node 
on announce filters - see the /spider/filter/ann/*.issue files for more info.
4. you can now specify a 'user_default.pl', 'node_default.pl' and 
'in_node_default.pl' in each of the filter directories
23Oct00=======================================================================
1. Added K5K as Kingman Reef
1. Added K7K as Kure
17Oct00=======================================================================
1. force frames to go down the local interface when doing a route. This is 
particularly important for pings!
16Oct00=======================================================================
1. add a ':' after 'G7BRN de G1TLH' in a talk message.
2. added /J to the list of things to ignore (as in G1TLH/J) in prefix 
processing (ie /J mean Jota not /JA [Japan]).
3. change all INCOMING 00-08 0A-1F and 9B characters that make it past the
intermediate client->server protocol to '.'.
04Sep00=======================================================================
1. made PC10,11,12 badword checking dependant on a flag variable ($censorpc)
default = 0 (off).
02Sep00=======================================================================
1. fix a long standing talk bug to do with routing to specific nodes (t xxx >
yyy .....)
2. Add badwords checking in various places. You put a list of words into
/spider/data/badwords one or several per line. Lines starting with # are
ignored. PC10, PC11, PC12 with words contained in this file will not be
sent on. Also ann, talk and dx commands have badword checking added. Words
are NOT case sensitive, but you will need to put all the endings in (eg 
...k, ...ker, ...king).
3. Added new version of admin manual from G0VGS.
01Sep00=======================================================================
1. allow blank on field 4 of PC10 (even though it's "illegal").
28Aug00=======================================================================
1. changes DXChannel::get_all_ak1a to get_all_nodes.
2. ignore PC21s coming in on the interface with that callsign (ie nodes 
trying to disconnect themselves).
3. output correct PC29 on blank lines and escape ^ characters differently 
(and transparently for spider nodes).
26Aug00=======================================================================
1. make blank origins on messages the node call.
2. added new version of FAQ from Ian G0VGS
3. added a dummy PC75 command (WCY merge?)
4. Don't allow mail routing for clx nodes
5. Log isolates
25Aug00=======================================================================
1. moan about and then delete empty message files
24Aug00=======================================================================
1. Removed WWV command so that users can't interfere (read mess up) the
automatic feeds which come from various places on the net.
23Aug00=======================================================================
1. Added persistant dupe file so that all dupes are stored here (including
announces) - announces are now kept for 5 days (as default).
2. limit the characters stored in a dupe for spots and announces
20Aug00=======================================================================
1. Added system Alias for set/nodxgrid => unset/dxgrid
2. Add full individual checking for all PC protocol fields in all messages
and removed any language dependant stuff (hopefully).
3. console.pl is now a bit more international (client.c/pl already are)
19Aug00=======================================================================
1. Added an efficiency thing for AUTOLOADed accessors from OO Perl by Conway.
2. Fiddled with the rtty and digital bandplan frequencies.
18Aug00=======================================================================
1. added a couple of changes for perl 5.6.0
2. removed del_dup from DXUser for earlier versions of DB '1.85' (ie real ones
not 2.x versions in 1.85 compatibility mode).
3. Started the OOing of the PC protocol stuff.
15Aug00=======================================================================
1. added 1.25 of the admin manual html
14Aug00=======================================================================
1. Added regex support to sh/dup_*.pl commands
2. fixed rcmd in crontab so that will work again
13Aug00=======================================================================
1. removed extra /60 in AnnTalk to make deduping of announces work a bit
better for longer...
05Aug00=======================================================================
1. Fixed hex character problem put in somewhen in the C Client
03Aug00=======================================================================
1. caught some more signals (are any of these causing the random stopping
of the code?
2. the Console now requires 1.05 of the Curses module ^R REFRESHES THE SCREEN
(as does ^L) AT LAST!!!!!
02Aug00=======================================================================
1. put back hex check exception for PC29
01Aug00=======================================================================
1. made the export and import ascii system work finally. The user_asc file
generated (automatically and 0000Z Sunday morning) is autoloading. Just 
execute it and it will automatically reload your user database.
2. remove import_users.pl no longer necessary
31Jul00=======================================================================
1. try to fix paging problem.
2. added help for spoof and set/forward
3. fixed bogus callsign check for field 2 of a PC12
4. Add DB_File to DXCommandmode to make it available for commands
30Jul00=======================================================================
1. Added talk mode so that I don't have to keep typing T <call> all the time.
2. fiddled around with storing of Debug messages a bit more.
3. bomb proofed the type command.
4. started the objectifying for talk, dx and announcements.
5. fix talkmode so that it only does 'via' PC10s when it really needs to.
6. SEND now displays a message if you try to do it in not prompt mode.
7. stopped a few more things being done by rcmd (eg send, talk, ann, dx)
8. tidied up the talking a bit more.
9. Increase default hop counts all round.
10. Adjust hex encoding so that 8 bit characters should now go thru
11. check more of the essential protocol fields for 8 bit characters.
29Jul00=======================================================================
1. added forward/latlong which will forward ALL the users that have a latitude
and longitude set on them to one or more locally connected nodes - with a hop
count of 1.
2. speeded up the show/node command by using the DB_File interface and 
sequentially reading the data directly and only 'get'ting the ones that are
nodes.
3. did the same for show/isolate and show/lockout.
28Jul00=======================================================================
1. fixed watchdbg midnight rollover loop and removed the date part of the 
date/time translation to leave just the time.
27Jul00=======================================================================
1. made sure that 'en' is the default language on new users.
2. issue error message if shutdown is attempted by a low privileged user.
3. Make sure a privilege is defined for all users (even if it is 0).
4. Try to fix some more dups (and the time on them).
5. make the time stored on dups generated locally on spots an integer no of 
minutes * 60 
6. send unsolicited PC[38]5s to the sysop if online.
7. merged current html from www.dxcluster.org with Ian's stuff
8. Added sgml files into the source tree
9. changed default paclen in client.c to 236
26Jul00=======================================================================
1. added wantgrid (to control display of grid square info on DX Broadcasts)
2. added lastoper for controlling periodic demands for user info from other
nodes.
3. added spiderFAQ stuff from Ian G0VGS and latest update of the admin manual
4. changed updating and deleting from user file in an attempt to keep down
duplicates and possibly corruptions.
5. added a DXUser::export routine to allow the cluster to automatically 
export the user data in ascii from cron.
6. added a line in the ISSUED crontab to do the export once a week
7. delete annok and dxok if set to 1 in user records.
8. added export_users command to allow arbitary exporting of user files
9. added set and unset/dxgrid command to allow control over the grid squares 
on DX announcements
10. Removed export_user.pl (no longer needed)
11. made import_users.pl accept a non related input filename and always
update the current user file.
12. added an 'auto rcmd <node> for/oper <call>' for people I can see on the
cluster that issue spots and for whom I have no qra info (no more than once
a month). This isn't the default - set $send_opernam in
/spider/local/DXProtVars.pm (copied from /spider/perl). Good for gateways.
13. Despace spot texts properly again for deduping purposes.
14. Corrected Pc84/85 handling a bit.
15. Sync the user database every 15 secs to see whether we can reduce the 
corruptions and duplicates.
25Jul00=======================================================================
1. ignore \n in ax25 mode for C client.
2. remove extra space at the end of a DX spot announce when no grid square
is output.
3. added new admin manual from Ian G0VGS
20Jul00=======================================================================
1. Finally managed to update my source with the sourceforge one
2. added user->qra cleaning in various places
3. added four digit locator strings to broadcast DX spots (for users).
4. PC11 with blank callsigns should now be ignored.
5. put back the unpadding to the PC11 dup checking to catch spots with added
blanks at the end of lines.
25Jun00=======================================================================
1. added 0 to the regex that checks for valid data on the cluster.pl->client
channel - this will allow G0VGS and G0RDI to connect....
2. removed technically unnecessary /= 60 from the dup routines to see if 
Arnold's Sparcs don't then crash.
19Jun00=======================================================================
1. move ann_dup, spot_dup etc to dup_ann, dup_spots etc
2. made mode 3 the default line ending convention for all out going connects
via telnet in client.pl
18Jun00=======================================================================
1. fixed line ending ambiguities (I think) for telnet connections. Well 
actually only really band aided it. It works but isn't how I want it. 
Client.pl has got to go....
2. Added 1.21 of Ian G0VGS's admin manual
17Jun00=======================================================================
1. I believe I have fixed all the login/logout 'broken pipe' errors
2. Added G0RDI's 'links' command.
3. added update_sysop.pl which cleans out all previous versions of the sysops
information from the user database and recreates it with that in DXVars.pm
4. Added node type to links and who
5. Hardened up the cluster->client link in the cluster software so that 
rubbish on port 27754 doesn't (usually) crash the cluster.
14Jun00=======================================================================
1. fixed sh/node crash
2. fixed RTT in who.pl
13Jun00=======================================================================
1. fixed looping bug in C client on ending.
12Jun00=======================================================================
1. Added RCMD for clx
2. Added WCY processing
3. Added new node types (clx, spider, dxnet, arcluster)
4. Store echo settings
5. Store pagelth settings
6. sort out source of DXVars for callbot.pl
7. added sh/isolate
8. added sh/lockout 
11Jun00=======================================================================
1. removed extraneous DXDebug from DXUtil
2. added help for set/echo
3. Centralised all spot, wwv and ann dup handling into respective packages.
4. Created new AnnTalk package (for above and OOing announce and talk 
handling).
5. Fixed problem with outputting lines with | in them to console.pl.
10Jun00=======================================================================
1. got rid of some more nasty bugs in sh/qra.
2. fixed 9A3xx to always be Croatia (and not Haiti!).
09Jun00=======================================================================
1. change some print commands in DXMsg to dbg('err'...
2. overloaded confess, croak et al into DXDebug and removed Carp from 
everywhere and checked that the necessary debugging really does go into
the debug files now.
3. changed print statements in cluster.pl to dbg('err',... so they go into
the debug files as well.
4. Altered the logic around duplicate spots, reduced the length of comment
checked to 20 characters (this should solve some problems including those
people sucking ar-cluster spots with prefixes in the extreme rh end). 
08Jun00=======================================================================
1. fixed problem with binary characters from cluster->client
2. added set/echo and unset/echo commands
3. echo login characters on login: prompt for C client
4. Send \r\n on telnet connections for C Client
5. Make echoing the default option (for M$ telnet clients :-()
11May00=======================================================================
1. fixed looping in Msg.pm (at last)
10May00=======================================================================
1. wrote a cross between 'tail -f' and grepdbg so that you can watch the
debug files for particular strings and only have them print out. 
05May00=======================================================================
1. rewrote parts of Msg.pm and client.c so that the messages no longer use
a length word at the front of each one. They are simply strings of characters
separated by a \n. No binary characters are allowed (they are encoded as %nn)
a la HTTP. This hopefully cures Arnold's problem and also make it more
secure anyway. It also paves the way for the ax25/ip multicast client.
30Apr00=======================================================================
1. put some extra checks and balances in to message send routine in Msg.pm to
see if I can prevent the error seen by Arnold (which I think is only likely to
appear in heavily loaded sites).
25Apr00=======================================================================
1. Changed reply so that you can reply to more than one address privately
31Mar00=======================================================================
1. fixed nnn-mmm in kill (erase/delete) msgs so that mmm is also deleted and
not just nnn -> mmm-1.
2. Added an autosplit to message importing so that messages are split
automagically into bits if the filename used in the import directory starts
with "split". This will add a [1/5] type string on the the end of the subject. 
3. dedupe more aggressively on the text of Spots so that only the 1st 27 chars
of text are considered (as opposed to the whole lot).
30Mar00=======================================================================
1. altered client.pl connect code so that it doesn't falsely recognise 
/spider/src/client as a 'client' instruction.
28Mar00=======================================================================
1. Added buffering to client 
2. Fixed LOGIN so that you can login with an arbitrary callsign
27Mar00=======================================================================
1. updated wpxloc.raw and rsgb.cty for 4W and TX0.
2. display 'start time' rather than 'last start time in' in who.
3. Allow local users to see their own sh/talk or sh/log stuff.
4. A more robust version of the C client.
5. Added a message exporting command 'export'.
6. allow swopping on all messages, including imported and manually sent ones
7. S A < B @ C $BID now works from the command line and thus bbses ought to
be able to send messages into the cluster. Bids are (currently) ignored.
26Mar00=======================================================================
1. first cut of C client
18Mar00=======================================================================
1. fixed convkeps.pl so that it accepts more formats for floating point.
08Mar00=======================================================================
1. tidied up Sun.pm and sh/sat
2. fixed sh/qra so that the correct lat/long is displayed if only one locator
is given.
10Jan00=======================================================================
1. added Steve Franke's new Sun.pm and show/satellite command
08Jan00=======================================================================
1. really removed the restriction on 0 length messages.
2. added a periodic msg file import system a la FBB. Stick one or more files
into /spider/msg/import with a suitable SEND line, subject and the text and 
it will import it. The importer will accept some BBS syntax (eg < GB7TLH) to
allow you to customise the 'from' callsign.
03Jan00=======================================================================
1. changed the copyright statement in sh/version!
2. added sh/date with special "be compatible with ak1a" syntax for the output
of sh/date with no arguments, otherwise the same as sh/time. A special favour
to G4PDQ...
3. and another one, added show/node especially for G4PDQ.
01Jan00=======================================================================
1. Fixed Julian routines to get rid of the millenium bug! (do as I say, not
as I do!).
2. updated gdx.pl so that external programs can do a sh/dx just as a normal
user can. On reflection this could be used as a model for all sorts of 
"external" interface routines.
3. renamed gdx.pl as showdx.
11Dec99=======================================================================
1. added missing pc48 so that it calls the DXDb::process routine 
10Dec99=======================================================================
1. allow msgs to marked as read or unread
02Dec99=======================================================================
1. DX command doesn't recognise '6M' as '6m' in SH/DX ON 6M.
2. set/node now sets the homenode as the callsign.
3. changed the label for the 18Mhz band from '18m' to '17m' in the bands 
table. 
01Dec99=======================================================================
1. started the callbot which lives at n2tly.dxcluster.net 9000.
2. added www.qrz.com
3. added www.buck.com
4. added k4ute at no4j.com
28Nov99=======================================================================
1. fixed all the stupid errors introduced in 1.36 confusing DXUser->get with
DXCluster->get_exact.
24Nov99=======================================================================
1. extended badmsg.pl stuff so that it works like the forward file and allows
one to reject on to, from, origin and subject fields.
2. added a swop.pl again in a forward.pl like format that allows simple swop
for a field or test on a field and set another.
3. Fixed the problem that read private mail follows you around as well as
unread private mail does.
4. Change the logic of connections so that the node will accept callsigns with
SSIDs to -8 as different entities from each other. SSIDs > 8 are subtracted 
from 15 and are assumed to be coming in via netrom diddled connections. This
affects lots of the commands as well. I may not have got them all.
5. Hangup clients on HUP signals. I originally ignored them, for reasons that
are now lost in the mists of time. HUP signals now cause clients to die 
(cleanly) and disconnect everything correctly.
6. Added show/time command
21Nov99=======================================================================
1. lose extraneous rubbish after the callsign as sent by BBSes.
2. Change end label on sh/moon to RGain dB rather than Loss dB.
3. Remove spurious call to DXCluster->get_exact in pc50.
4. Allow rcmd to locally connected nodes that are not (for some reason) in the
nodes table.
5. Try and send a PC39 in more cases to a cluster that I want to disconnect
from in the hope that it notices and disconnects its end.
20Nov99=======================================================================
1. Added set/unset logininfo which will tell anybody that has this set when
someone has either logged in or out of this node.
2. Added set/pinginterval command which alters the length of time between
pings sent to nodes, the value is minutes < 120 and seconds above that, 0
means disable pinging (not recommended).
3. If someone does a sysop whilst connected via ax25, don't show privilege
level or passwd in stat/user.
4. Fixed the problem with the dx command where if the callsign ended in a ?
then the call and the freq would be replicated in the remarks.
5. Set/unset ann, dx, talk, beep, wx, wwv all are now permanent (ie stored in
the user file)
19Nov99=======================================================================
1. Added new version of sh/sun and also sh/moon from Steve K9AN
2. Added rtt to who.
3. added Aliase for show/tnc_sta to who.
4. added Alias for show/uptime to sh/cl 
18Nov99=======================================================================
1. Added ping obs counter together with Time::HiRes timers. This will dis-
connect nodes that fail to respond to 3 ping requests (on the 4th attempt). 
The default time is a ping every 3 mins, therefore a link will be struck out
after 12 minutes of nil response.
2. Maintain a table of outstanding connects to other nodes and prevent over-
laps (special favour to G0RDI).
17Nov99=======================================================================
1. Started using Data::Dumper for things again
2. 'Fixed' DXUser file corruption?
3. Allow multiline (ie lines with \n in them) output in $DXChannel::send 
4. Added Andrew K9CW's updated wpxloc.raw, regenerated prefix_data.pl
5. Put in callsign matching and stuff into sh/sun.
14Nov99=======================================================================
1. added BBS.pm to start BBS input of mail
2. fixed eval in DXUser to log errors rather than banging out
12Nov99=======================================================================
1. added sh/sun command kindly supplied by Steve K9AN.
2. allow ^Z on its own on a line to terminate a message
08Nov99=======================================================================
1. added spoofing (mk1 version) for sysops, useful for those little jobs like
reseting a user's qra locator and such like "spoof g7brn set/qra jo02lq".
2. fixed set/location so it stores the qra locator in the qra locator slot, 
NOT the lat/long (who wrote this stuff...?).
07Nov99=======================================================================
1. reduced the amount of stuff compared against for dup announces.
2. Check the regex for DK0WCY announces produces results before storing it as
a WWV.
3. Added some logging for set/priv (un)set/lockout.
4. Added test long path calc to sh/muf
5. Only wonder down the msg queue every minute
6. Put in the initial DB code (at last), you can create and remove local and
standard remote dbs, you can import AK1A style .FUL ascii databases, you can
enquire on a local or remote database.
7. A return ping to a node will clear down all outstanding pings to
that node (which might cause some confusion if more then one ping is
outstanding for a node, but then - shit happens).
04Nov99=======================================================================
1. Removed ~ from the end of the PC18.
2. Removed a hangover from duff character checking in cluster.pl
3. Stop PC frames that are to be routed, being routed back to themselves.
03Nov99=======================================================================
1. Simplified command caching so it uses anonymous subroutines, you should
also get error messages back on the console now when developing.
2. Allow locally connected AK1A clusters that for some obscure reason don't
issue PC19s to still appear as connected and allow them to acquire users.
31Oct99=======================================================================
1. updated Minimuf.pm and show/muf.pl to the fixed versions sent to me by
Steve Franke K9AN. 
2. Made set/badnodes work, added show/badnodes. This is an interim fix until
input spot filtering works.
24Oct99=======================================================================
1. fixed announces so that nodes only get one of them (not two).
2. Altered the select timeouts to prevent apparent excessive CPU usage on
multiprocessor machines (or at least that is what seems to be the trouble
here). 
22Oct99=======================================================================
1. allow filter CALLSIGNS to be in upper or lower case.
2. create the concept of input and output filters, input filters are of the 
form "in_$call.pl" eg: "in_g1tlh.pl" (or "in_G1TLH.pl"), output filters are 
"g1tlh.pl" (or "G1TLH.pl").
3. all users can now filter on spots, ann and wwv (assuming the sysop has set
the filters up - still no user creatable filters. Nodes can filter on both
input for announces and output for all of these. I would recommend setting 
up a few filters that are likely to be wanted and then symlinking callsigns
to them as you get requests.
4. added callsign and length of history/position of screen stats to console.
If you want to change the colour of the callsign you will need to copy the
Console.pm to your /spider/local directory and change the $mycallcolor equate.
21Oct99=======================================================================
1. fixed reply so that reply b or reply nop generate a bulletin with the 
correct address.
2. implemented sh/muf command.
3. reduced privilege of catchup and uncatchup to 5. This so that, suitably
privileged, nodes that occasionally link can rcmd a "catchup <nodecall> all"
to the node they are connecting to and thus prevent a large tranche of, 
potentially duplicate, mail. This isn't an issue for DXSpider, but may be
an issue for any AK1A clusters you are connected to.
20Oct99=======================================================================
1. Translated all the subroutines of minimuf into perl as Minimuf.pm
2. Limited the length of an ANN that is saved for de-duping to $pc12_dup_lth
(def 72)
3. help command should now return stuff that you expect.
4. reduced necessary privilege to use 'MSG' command to 6.
5. Correct the count of spots and wwv for a merge.
6. Allow decodes of DK0WCY-3 WWV data beacon announces
7. rewrote send so that an SB doesn't send a buckshee bull to NOPRIVATE!
8. Changed default colouration on console so that all spots >= 50Mhz are red
9. Fixed init command so that PC21s are sent down non-initted channels
10. Allow forwarding of unknown private mail. This means that you can set up
forwarding of 'foreign' mail across to and by gateways using the same 
mechanism as bulletins (/spider/msg/forward.pl).
11. Allow line wrapping on the console (G0RDI, G0VGS et al).
18Oct99=======================================================================
1. changed help command so that it works correctly with multiple title lines.
2. added to address to the list of things a message checks to see whether it
is a duplicate (how on earth did it take _this_ long to find this one?).
3. Changes S CC so that the callsign it says it has sent to is the real one
(request from G8TIC)
21Sep99=======================================================================
1. allow zero messages to be stored (request from G4PDQ)
2. make DX more flexible and change spotter syntax to be consistant with
sh/dx (request from K9AN)
30Aug99=======================================================================
1. remove -@ as well as \d from SSIDs for spots
2. remove WEB and/or NET from the front or rear of callsigns in Prefix.pm
29Aug99=======================================================================
1. Added msg command to allow the changing of To, From, Subject and so on the
messages. This seems particularly important just now as a whole raft of G3's
seem to be putting out non private bulls to callsigns.
2. While I am at set messages to TO fields that appear to be users to private
if they have been sent as bulls.
3. Add DISTROs, if a callsign field appears in /spider/msg/distro in upper
use that as a list of callsigns to send further. Note this is potentially
recursive as callsigns in a distro can be distros.
25Aug99=======================================================================
1. check the date of a WWV much more carefully.
24Aug99=======================================================================
1. Prevented spots with lowercase callsigns being forwarded. This opens a
much bigger can of worms which I shall have to address later.
17Aug99=======================================================================
1. all protocol except PC29 containing %XX characters will be dumped.
2. Changed console.pl so that if you start typing it moves the top window
back to the bottom.
19Jul99=======================================================================
1. Added iota and qra clauses to sh/dx as well, these take optional arguments
and will look for the appropriate strings.
17Jul99=======================================================================
1. Started database integration.
2. added qsl clause to sh/dx that searches for qsl or via in the dx info
16Jul99=======================================================================
1. drop frames with 'illegal' characters in them (but pass frames with 
embedded %XX characters).
15Jul99=======================================================================
1. Changed grepdbg to accept a regexp. More useful (to me anyway).
2. Altered init command so that it doesn't send PC21s down the initted 
channel.
10Jul99=======================================================================
1. added an explicit disconnect from my side for already connected calls. This
appears to have fixed a problem where if two consoles connect at the same time
with the same (sysop?) callsign the cluster would stop.
2. added some debugging in the Message handler to allow more state to be seen.
3. Message handler now seems to work better for longer and doesn't spew out
PC42 aborts with quite such gay abandon.
05Jul99=======================================================================
1. added stat/msg and stat/cluster commands to allow me to poke about inside
the msg and cluster node tables.
04Jul99=======================================================================
1. removed silly 'new message has arrived' to connected nodes 
2. added a ! command to the console.pl program; works like the bash shell.
01Jul99=======================================================================
1. Altered priv to 5 for connect.pl to match disconnect for nodes
29Jun99=======================================================================
1. fixed merge command that I broke.
2. added some randomness in waittimes for aborted outgoing messages 
3. Message Queuing now only occurs every 5 minutes (configurable if anyone 
wants to write the command for doing it) and on receipt of a PC16. This is
a further attempt at sorting the crossing of messages!
4. a PC33 will cause another attempt at queuing. If you are on a roll, keep
going!
28Jun99=======================================================================
1. console.pl now works with history and editting.
2. added scrolling to stuff sent by the cluster.
3. added colours to things.
27Jun99=======================================================================
1. added WWV filtering
2. added timeouts to for forwarding Messages, also added a waiting time for
failed (stalled) outgoing messages.
3. Incoming messages will now have priority over outgoing messages to the
same node.
4. Added 'catchup' command which will 'catchup' messages to date for a node. 
This means that when you start forwarding to a node, it doesn't get all the
messages queued up that are probably old.
5. added 'uncatchup' which does the opposite of the above.
6. fixed kill full and PC49 handling so that it actually works.
7. Fixed local aliases so they add to the front of the standard ones. This
means you only need to add your specials or override the system ones you need
to.
21Jun99=======================================================================
1. changed regex for cluster->client msgs so that strings like |---| are no
longer ignored.
20Jun99=======================================================================
1. prevented a merge to myself (causes a loop)
18Jun99=======================================================================
1. fixed a problem with DXLogPrint repeating log entries.
2. altered the permissions on disconnnect so that priv 5 users can disconnect
clusters, but still require priv 8 to disconnect users.
3. made sure that an incoming PC18 clears out all the cluster info for
that channel before re-initialising.
4. add init command.
5. disconnect users before nodess on shutdown
15Jun99=======================================================================
1. added grepdbg program (so you can search your debug files and get times
and dates of incidents).
2. Moved DXVars.pm to DXVars.pm.issue to force new users to cp it to their
local directory.
3. added $allowzero to DXProt to allow thru PC19s with zero protocol versions.
14Jun99=======================================================================
1. changed IO::File in help and apropos to IO::File
2. added a check for isa('DXNode') for PC50s
08Jun99=======================================================================
1. Started work on the curses based operator console.
03Jun99=======================================================================
1. cluster seems to have a memory leak, put DESTROY functions in where 
appropriate.
2. try to make sure that PC21 commands are not issued inappropriately and
also reformat PC19 for onward broadcast so that nodes coming in on loops are
dropped from those broadcasts.
3. make sure PC16,17,19,21 doen't affect locally connected nodes.
4. Changed all instances of FileHandle to IO::File.
01Jun99=======================================================================
1. removed a output of an unwanted pc21 for isolated nodes
31May99=======================================================================
1. Added checking for PC16,17,19 and 21 to make sure that they come in from
the channels that they are supposed to.
2. Pass the RCMDing node's priv level to the command (rather than the 
connecting node's privilege level).
3. Pass thru merge requests for other nodes.
4. Removed a warning from client.pl
5. routed external DB commands and drop them (for now) locally
6. routed external mail commands (ie those addressed elsewhere)
7. routed external PC26/27 lines 
25May99=======================================================================
1. try to make the lastin value correct even for local users
2. got rid of the stupid bug that failed to print out the offline message
but put a "*main::STDOUTmain" for every line of that message instead.
3. Ported to 5.00503 (well actually just installed it and it just runs). 
4. Added who command
23May99=======================================================================
1. Got rid of some of the useless error messages on global destruction when
quiting a program.
2. Stuck -w back on client.pl
23May99=======================================================================
1. tried to change connection to raw mode for cluster connections
2. sh/c and sh/u are now sorted in alphabetical order
3. Limited the number of queued dx spots when composing messages to 20 (the 
oldest one is lost for every one added above 20).
4. Added generalised shell globbing everywhere I think it is useful, including
sh/dx, dir, sh/files etc
5. Made dir more compatible with ak1a and added 'to' and 'from' call searching
it should now do everything that ak1a does except counts.
6. added similar functionality to kill command so that you can kill ranges, to
and from callsigns etc.
22May99=======================================================================
1. added check for -1 from Date::Parse and return undef for out of range dates
2. added show/files and type commands
21May99=======================================================================
1. made set/nodx work again.
2. made dx stuff queue nicely again when sending messages.
18May99=======================================================================
1. Added announce dup checking.
2. Added system announce filtering.
08May99=======================================================================
1. Added a bit more checking to the rcmd thing to make more sure that this
rcmd isn't coming from an imposter. Not possible to prevent everything 
ofcourse, just make it a bit harder.
2. altered set/lockout and set/privilege so that they can't executed remotely.
3. Added some code to reject rubbish (with invalid binary characters) protocol
or user lines as input.
4. prevented PC command being executed remotely :-)
05May99=======================================================================
1. change the connection overlap from an abort to a disconnect.
02May99=======================================================================
1. Added the mechanism for doing user spot filtering for spots in the cluster 
(no user control just yet - but sysops can do it).
2. Fixed problem with nodes sending out the node lists of isolated nodes.
30Apr99=======================================================================
1. Try to make it even more AK1A friendly by putting the node list out in the
'correct' order.
2. added code so that local users and commands go to all connected nodes 
INCLUDING the isolated ones.
26Apr99=======================================================================
1. added set/user command as a hack, please use this with care, there is
very little checking.
2. added export_opernam.pl which is a basic reader of AK1A opernam.dat files
to stdout
25Apr99=======================================================================
1. Fixed problem with filtered spots not coming out.
2. Added the possibility of filtering on channel callsign
20Apr99=======================================================================
1. altered order of undefing and closing of user file in an attempt to make 
corruptions/missing users less likely.
2. made messages that are addressed to the node call appear to the alias call
3. check dates much more rigourously.
4. ignore SIGTERM and SIGINT during shutdown of the cluster
15Mar99=======================================================================
1. added $actiondata to filter line to allow per action data such as no of hops
2. fixed a silly problem in talk for non-existant callsigns
3. Added sysop command
02Mar99========================================================================
1. Changed DXUser so that it uses a homemade import/export hash routine 
2. DXUser now uses a DB_BTREE file
3. Added export_users.pl, import_users.pl and convert_users.pl
25Feb99========================================================================
1. added NL language stuff.
2. added set/language
21Feb99========================================================================
1. Allowed multiple 'on <freq>' for show/dx
2. Made sure the 'on 20m/ssb' thing worked (also 'on hf/cw').
3. first cut of the Filtering code, no user commands yet but the file
format is defined and manually added filters should work for spots
17Feb99========================================================================
1. added export_user.pl to export user files (for interest and safety)
2. changed DXUser::init to allow O_RDONLY access which may limit the number
of coredumps G0RDI seems to get.
15Feb99========================================================================
1. Added msg forwarding code which uses $main::root/msg/forward.pl.
14Feb99========================================================================
1. Changed A & K in WWV to be the other way around (I am told by G3IOR that
this will mean that we won't have pole to pole aurora nor all the power lines
overloading everywhere as well as a result of having values of K > 10).
2. allow the '~' character in message bodies.
3. Moved $main::data/badmsg.pl to $main::root/msg/badmsg.pl.
11Feb99========================================================================
1. Fixed a problem with isolated nodes' configurations being sent on sending 
local configs to new connections.
08Feb99========================================================================
1. added a $SIG{ALRM} in the client to actually catch the alarm when it goes 
off which means that the netrom/ax25 call programs terminate properly (and not
loop as fast as their little legs can paddle, soaking up CPU time).
2. Implemented read receipts as an especial request from G4PDQ.
3. Fiddled with DXUser a bit to see whether I can stop it core dumping on new
users in PC16s on G0RDI's machine.
4. Added E4 (Palestine) to Prefix data.
30Jan99========================================================================
1. Some of the dates we get can cause crashes, tried to make it more robust (oh
and Y2K compliant)
2. PC16 seem to come in with missing callsigns from somewhere
3. added $main::data/baddx.pl which prevents callsigns that are in the list being
a) forwarded b) stored and c) (except for the originator, if local) being
displayed locally.
4. added $main::data/badmsg.pl which deletes any messages whose TO address is
in this list (this is largely for european sensibilities). 
18Jan99========================================================================
1. added present(),presentish() and disconnect() to DXCron so that you can see 
(easily) if a station is on the cluster anywhere and also disconnect them
locally. 
2. added rcmd() to DXCron so you can send an rcmd to someone else from crontab.
3. <embarrassment>Fixed create_sysop.pl so that longitude is spelt correctly
there as well</embarrassment> made the update work properly. NOTE create_sysop
will only do what you expect if all cluster.pl and client.pl programs are 
stopped.
4. DXCron wasn't reading in reliably on startup, this is now (hopefully) fixed.
the -M semantics are rather strange!
5. The -w switch is now standard on cluster.pl
6. Added last_connect() which gives the last connect time of a user (or now
if connected).
7. Added present_on(call, node) and presentish_on(ditto) which returns true if 
the call is connected to the node.
8. incoming messages for users will now send a 'new message' message (instead
of merely generating the message)[who wrote this rubbish?].
9. Hooked $SIG{__WARN__} and $SIG{__DIE__} so we store these nasty error 
messages.
10. Print the no of users on restricted protocol links if we have had PC50
11. Had a go at making the sh/cl stats more accurate.
12. PC11 was trying to call Local::spot1 instead of Local::spot, no warning 
previously.
13. Added a simple lockfile to prevent more than one cluster running at a time
17Jan99========================================================================
1. fixed some permission problems on DXLog.
2. There is a circumstance in DXMsg which caused the cluster to stop on an 
null ref pointer which I can't get to the bottom of but have bandaided out 
for now.
3. Started filter and Database code.
4. Upper cased all the TO callsigns for sending to more than one station in
messages.
07Jan99========================================================================
1. Fixed Geomag after emacs reformatted it wrong so sh/wwv works again.
2. Added more range checking in WWV spots (they really are a heap of ...)
3. Changed create_sysop.pl so that you can update as well as create the user 
file
4. Remove spotter's SSID from WWV spots
06Jan99========================================================================
1. Do some range checking for spots and WWV in the future (got a WWV for Oct 
2034 whhich caused a bit of confusion!)
2. Make WWV spots broadcast them to the users! (as opposed to merely storing 
them)(thank you G0RDI).
3. Allow users to do show/announce (thank you JE1SGH).
4. Delay broadcasts to users if they are not in a 'prompt' state (means you can
add messages and see what you are doing on a busy system)
5. Made set/unset dx,ann,wx,talk,wwv do what is expected
6. added set/sys_location and set/set_qra to set the cluster lat/long and qra
7. New messages will now be announced on logon (if there are any)
03Jan99========================================================================
1. Upped the version no !!!!
2. made the DXProtocol routines much less sensitive to '~' characters (JE1SGH)
3. added '^' -> ':' conversions on ann, talk and dx commands
4. You can now send messages containing blank lines.
5. Fixed merge command problem reported by G0RDI
28Dec98========================================================================
1. Crossed fingers, got rid of the instabilities caused by execing programs
at vast speed (reduced it significantly anyway).
2. Personals will now move if homenode is known.
3. Added Local.pm for doing local specials
27Dec98========================================================================
1. Various detail changes to remove some more warning with -w on
2. Added DXCron handling - you can do crontabs now.
3. Added show/program command so you can see where it is loading your .pm files
from.
4. Added pc26/27 replies to locally connected cluster's merge (pc25) requests
5. Added spotters DXCC and original cluster to Spot data files.
23Dec98========================================================================
1. Reindented various things
2. Added missing $main::mycall on the end of outgoing PC11s (!)
3. Check that PC16/17 node calls really are nodes (AFAIAC).
22Dec98========================================================================
1. Added brackets round callsign if not here for prompt
2. Added Iain's set/password routine
3. Fixed sh/dx problems (the xemacs indent region messed Spot.pm up!)
4. Issued 1.15
21Dec98============= late! ====================================================
1. fixed problem with missing DXDebug in DXProt.
2. Fixed DXDebug so that it actually works as advertised with and without 
trailing \n. 
3. Added deduping of WWV spots as well (at for date,time,sfi,k and i) dups
4. Replaced the 0 in "02-Dec-1998" with ' ' so it reads " 2-Dec-1998", it seems
hard to credit it but some 'programs' out there that connect to clusters have
problems with the leading '0'!
5. In the same vain, included a strictly AK1A compatible sh/heading, apparently
this is necessary for the same reason as 4.
6. Started contrib tree stored the old show/heading in contrib/g0rdi/show.
7. Because I now correctly dedupe spots and wwv (there's a hostage to fortune..)
I have added a merge command. 
21Dec98========================================================================
1. Added "issue" to the client program for 'login' connections
2. Added more docs for client program.
3. Fixed problem introduced in 1.12 where a connect locally with a callsign of
someone connected remotely would stop the cluster.
4. issue release 1.13
20Dec98========================================================================
1. Removed all the warnings I get with perl -w (at least for just starting the
cluster and running a few commands).
2. Added per node hop control.
3. Added some docs on how to use it and isolation
4. Made talk command more intelligent in that if the user isn't seen and the
user's last node is visible it tries the talk anyway.
19Dec98========================================================================
1. Fixed problems with sh/rcmd (talk/ann/log) with a callsign as argument and
also made what G0RDI wanted work as well!
2. Added isolate flag to allow isolation of different networks at a gateway.
3. Changed make Makefile.PL to perl Makefile.PL in instructions
4. Copied latest instructions to html directory
5. Had another attempt at making clients disconnect without hanging everytime.
6. Changed msg queuing semantics so that the system routes on exact callsign.
7. Changed the protocol version so that it increments with the DXSpider version.
14Dec98========================================================================
1. Made the telnet thing work a bit better. It still will not work reliably to
a real telnetd on port 23.
2. Allowed network logins on client by specifying login instead of call.
3. made msg handling more robust (PC30 with unknown streams cause PC42), queueing
is only done on channels that are in state 'normal'.
4. Added pc command which takes a callsign and some text and sends it without
mods to the callsign, useful for sending manual PC protocol to unstick things.
Also for sending anonymous messages to online users.
5. Stopped duplicate messages being stored (it receives them and then bins them)
6. Implemented PC49 delete/full from outside (kill full on the inside)
7. Implemented the client command in connect scripts so that you can have 
different scripts for the same callsign.
8. Added sh/wwv command
13Dec98========================================================================
1. Fixed VS6 lat/long in prefix_data and wpxloc.raw
2. Sorted out last in times for remote users
3. editted and substitued G0RDI's version of the install instructions over
mine in spider/html
4. fixed telnet connections
5. added connect instructions to html tree.
6. Added some more help
7. Upissued version
12Dec98========================================================================
1. Incorporated sh/st, (un)set/lockout, forward/opername from Iain G0RDI
2. Added group handling with (un)set/group, show/group. This allows arbitrary
groups to be formed (for ann/<group> for example) and is also used to 'filter' 
spots, announces, wwvs etc into groups of cluster nodes (useful for creating 
disjoint cluster networks)
3. **** CHANGE mylongtitude to mylongitude in DXVars.pm ****
4. Altered QRA locator routines so they work correctly!
5. Fixed all commands that had the wrong mylat(itude) and mylong(itude) names
in.
07Dec98========================================================================
1. Added set/name, set/qra, set/location, set/qth, set/homenode, set/bbs, 
set/email
2. changed the Msg socket close to a shutdown (hopefully more reliable), this 
should stop clients hanging on exit.
3. Added Alias support for help
4. Added lltos and stoll routines to DXBearing
5. Added auto prompting for name, qth, location and homenode if any of these
aren't known.
06Dec98========================================================================
1. Fixed DXBearing::is_qra so that it correctly detects full QRA locators
2. Added sh/qra for doing locator distances and bearings
3. Added some stuff to Notes.txt on hints for command writers
4. Changed help system to use just one file per language
5. Started adding more help
6. Fixed 24Mhz band limits
7. Added apropos command and lots of new help text
05Dec98========================================================================
1. Added sh/heading and QRA locator calculation stuff
04Dec98========================================================================
1. Started Changes file
2. Added load/cmd_cache.pl to clear cmd cache shortcuts (use this if cluster.pl
get confused about where it is getting its commands from eg if you have
removed a file from local_cmd 'cos you want to go back to standard one)
3. Fixed bull handling at least to the extent that it stores them and
doesn't mess up the normal directory handling.
4. Fixed the unset/debug command so that it actually does the job!
5. Removed the middle line 'written in perl for unix' from show/version.pl
